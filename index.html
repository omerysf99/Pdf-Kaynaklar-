<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flappy Wallet Ultra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        body { background-color: #4eb5d3; font-family: 'Fredoka', sans-serif; margin: 0; overflow: hidden; user-select: none; touch-action: manipulation; }
        .page { display: none; height: calc(100vh - 75px); position: relative; }
        .page.active { display: block; }
        #game-container { display: none; position: absolute; inset: 0; z-index: 200; background: linear-gradient(#70c5ce, #4eb5d3); }
        #score-display { position: absolute; top: 40px; width: 100%; text-align: center; font-size: 50px; color: white; font-weight: 900; text-shadow: 3px 3px 0 #000; z-index: 210; }
        
        /* Bulut Animasyonu */
        .cloud { position: absolute; background: white; border-radius: 50px; opacity: 0.8; z-index: 1; }
        
        /* Modern Alert */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 85%; padding: 30px; border-radius: 30px; text-align: center; border-bottom: 8px solid #ddd; }

        .ground-line { height: 10px; background: #8bc34a; position: absolute; bottom: 75px; width: 100%; z-index: 10; border-top: 4px solid #558b2f; }
        .tab-btn.active { transform: translateY(-5px); color: #2563eb; }
    </style>
</head>
<body>

<div id="modal" class="modal-overlay">
    <div class="modal-content animate__animated animate__zoomIn">
        <h2 id="modal-title" class="text-3xl font-black text-gray-800 mb-2"></h2>
        <p id="modal-msg" class="text-gray-500 mb-6 font-semibold"></p>
        <button onclick="closeModal()" class="bg-blue-600 text-white w-full py-4 rounded-2xl font-bold shadow-xl active:scale-95 transition">DEVAM ET</button>
    </div>
</div>

<div class="max-w-md mx-auto h-screen flex flex-col relative bg-[#4eb5d3]">
    
    <div id="game-container">
        <div id="score-display">0</div>
        <canvas id="game-canvas"></canvas>
    </div>

    <div id="flappy-page" class="page active">
        <div class="p-4 flex gap-3">
            <div class="bg-white/90 rounded-3xl p-4 flex-1 shadow-xl border-b-4 border-blue-200">
                <span class="text-[10px] font-bold text-red-500 uppercase block">Deneme Hakkƒ±</span>
                <div class="flex items-center justify-between">
                    <span id="hearts-ui" class="text-3xl font-black text-gray-800">10</span>
                    <button onclick="checkAdmin()" class="bg-blue-100 p-2 rounded-full text-blue-600">‚ûï</button>
                </div>
            </div>
            <div class="bg-white/90 rounded-3xl p-4 flex-1 shadow-xl border-b-4 border-blue-200 text-[11px] font-bold">
                <div class="flex justify-between mb-1"><span>G√úNL√úK</span> <span id="daily-ui" class="text-blue-600">0.00</span></div>
                <div class="flex justify-between mb-1"><span>REKOR</span> <span id="best-ui" class="text-blue-600">0.00</span></div>
                <div class="flex justify-between text-green-600"><span>√áARPAN</span> <span>x1.00</span></div>
            </div>
        </div>

        <div class="flex-grow flex flex-col items-center justify-center">
            <div class="relative mb-12 animate__animated animate__pulse animate__infinite">
                <div class="w-20 h-14 bg-[#9c5c3c] border-[5px] border-black rounded-xl shadow-2xl flex items-center justify-center text-white font-black">CW</div>
                <div class="absolute -right-2 -top-2 bg-yellow-400 w-6 h-6 rounded-full border-4 border-black"></div>
            </div>
            
            <button id="play-btn" class="bg-white w-24 h-24 rounded-full shadow-[0_12px_0_#ddd] flex items-center justify-center active:shadow-none active:translate-y-2 transition-all">
                <div class="w-0 h-0 border-t-[20px] border-t-transparent border-l-[35px] border-l-green-500 border-b-[20px] border-b-transparent ml-2"></div>
            </button>
        </div>
    </div>

    <div id="wallet-page" class="page p-6">
        <div class="bg-white rounded-3xl p-8 shadow-2xl text-center">
            <div class="text-5xl mb-4">üí∞</div>
            <h2 class="text-gray-400 font-bold">Bakiyeniz</h2>
            <h1 class="text-4xl font-black text-gray-800">0.00 CW</h1>
            <button class="mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-bold">PARAYI √áEK</button>
        </div>
    </div>

    <div class="ground-line"></div>
    <div class="h-[75px] bg-white flex justify-around items-center z-[50] border-t border-gray-200">
        <button onclick="showPage('flappy')" class="tab-btn active flex flex-col items-center">
            <span class="text-2xl">üéÆ</span><small class="font-bold">Oyna</small>
        </button>
        <button onclick="showModal('Sƒ±ralama', 'Liderlik tablosu yakƒ±nda a√ßƒ±lacak!')" class="tab-btn flex flex-col items-center text-gray-400">
            <span class="text-2xl">üèÜ</span><small class="font-bold">Sƒ±ralama</small>
        </button>
        <button onclick="showPage('wallet')" class="tab-btn flex flex-col items-center text-gray-400">
            <span class="text-2xl">üí≥</span><small class="font-bold">C√ºzdan</small>
        </button>
    </div>
</div>

<script>
    let hearts = 10;
    let dailyBest = 0;
    let allTimeBest = 0;
    const ADMIN_ID = "8392479231";

    // MODAL Y√ñNETƒ∞Mƒ∞
    function showModal(title, msg) {
        document.getElementById('modal-title').innerText = title;
        document.getElementById('modal-msg').innerText = msg;
        document.getElementById('modal').style.display = 'flex';
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; }

    // ADMIN KONTROL√ú
    function checkAdmin() {
        let id = prompt("Admin ID giriniz:");
        if(id === ADMIN_ID) {
            hearts = 999;
            document.getElementById('hearts-ui').innerText = "‚àû";
            showModal("Admin Yetkisi", "Sƒ±nƒ±rsƒ±z kalp aktif edildi!");
        } else {
            alert("Hatalƒ± ID!");
        }
    }

    // SAYFA GE√áƒ∞≈ûƒ∞
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active', 'text-blue-500'));
        document.getElementById(id + '-page').classList.add('active');
        event.currentTarget.classList.add('active', 'text-blue-500');
    }

    // OYUN MOTORU
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    let score = 0;
    let gameLoop;

    canvas.width = window.innerWidth > 450 ? 450 : window.innerWidth;
    canvas.height = window.innerHeight - 75;

    const bird = {
        x: 60, y: 300, w: 38, h: 26,
        velocity: 0, gravity: 0.22, jump: 4.8,
        update() {
            this.velocity += this.gravity;
            this.y += this.velocity;
            if(this.y + this.h > canvas.height || this.y < 0) this.die();
        },
        draw() {
            ctx.save();
            ctx.translate(this.x + this.w/2, this.y + this.h/2);
            ctx.rotate(Math.min(Math.PI/4, Math.max(-Math.PI/4, this.velocity * 0.1)));
            ctx.fillStyle = "#9c5c3c";
            ctx.lineWidth = 3;
            ctx.fillRect(-this.w/2, -this.h/2, this.w, this.h);
            ctx.strokeRect(-this.w/2, -this.h/2, this.w, this.h);
            ctx.restore();
        },
        die() {
            cancelAnimationFrame(gameLoop);
            if(hearts !== 999) hearts--;
            document.getElementById('hearts-ui').innerText = hearts === 999 ? "‚àû" : hearts;
            
            if(score > dailyBest) dailyBest = score;
            if(score > allTimeBest) allTimeBest = score;
            document.getElementById('daily-ui').innerText = dailyBest + ".00";
            document.getElementById('best-ui').innerText = allTimeBest + ".00";

            showModal("Oyun Bitti!", `Skorun: ${score}\nKalan Kalp: ${hearts === 999 ? 'Sƒ±nƒ±rsƒ±z' : hearts}`);
            document.getElementById('game-container').style.display = 'none';
        }
    };

    let pipes = [];
    function createPipe() {
        const gap = 140;
        const pos = Math.random() * (canvas.height - 300) + 100;
        pipes.push({ x: canvas.width, y: pos, gap: gap, passed: false });
    }

    function update() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Arka Plan
        ctx.fillStyle = "#70c5ce";
        ctx.fillRect(0,0, canvas.width, canvas.height);

        bird.update();
        bird.draw();

        if(pipes.length === 0 || pipes[pipes.length-1].x < canvas.width - 180) createPipe();

        pipes.forEach((p, i) => {
            p.x -= 2.8;
            ctx.fillStyle = "#2ecc71";
            ctx.strokeStyle = "#1b5e20";
            ctx.lineWidth = 4;
            
            // √úst Boru
            ctx.fillRect(p.x, 0, 60, p.y);
            ctx.strokeRect(p.x, -5, 60, p.y + 5);
            // Alt Boru
            ctx.fillRect(p.x, p.y + p.gap, 60, canvas.height);
            ctx.strokeRect(p.x, p.y + p.gap, 60, canvas.height + 5);

            // √áarpƒ±≈üma
            if(bird.x + bird.w > p.x && bird.x < p.x + 60 && (bird.y < p.y || bird.y + bird.h > p.y + p.gap)) bird.die();
            
            // Skor
            if(!p.passed && p.x < bird.x) {
                p.passed = true;
                score++;
                document.getElementById('score-display').innerText = score;
            }
        });

        pipes = pipes.filter(p => p.x > -100);
        gameLoop = requestAnimationFrame(update);
    }

    document.getElementById('play-btn').addEventListener('click', () => {
        if(hearts <= 0) {
            showModal("Olamaz!", "Hakkƒ±n bitti kanka. Yarƒ±n gel veya Admin'e ula≈ü.");
            return;
        }
        score = 0;
        document.getElementById('score-display').innerText = "0";
        pipes = []; bird.y = 300; bird.velocity = 0;
        document.getElementById('game-container').style.display = 'block';
        update();
    });

    // Kontroller
    const jump = () => bird.velocity = -bird.jump;
    window.addEventListener('keydown', e => { if(e.code==='Space') jump(); });
    canvas.addEventListener('touchstart', e => { e.preventDefault(); jump(); });

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basit Flappy Bird</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #70c5ce;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            border: 2px solid #333;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            background-color: #fff;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Canvas boyutları
    canvas.width = 320;
    canvas.height = 480;

    // Oyun Değişkenleri
    let frames = 0;
    let score = 0;
    let gameActive = true;

    // Kuş Nesnesi
    const bird = {
        x: 50,
        y: 150,
        w: 34,
        h: 24,
        gravity: 0.25,
        jump: 4.6,
        velocity: 0,
        
        draw() {
            ctx.fillStyle = "#f7d015";
            ctx.fillRect(this.x, this.y, this.w, this.h);
            ctx.strokeStyle = "#000";
            ctx.strokeRect(this.x, this.y, this.w, this.h);
        },

        update() {
            this.velocity += this.gravity;
            this.y += this.velocity;

            // Zemin çarpışması
            if (this.y + this.h >= canvas.height) {
                this.y = canvas.height - this.h;
                gameOver();
            }
        },

        flap() {
            this.velocity = -this.jump;
        }
    };

    // Boru Nesneleri
    const pipes = {
        position: [],
        gap: 100,
        width: 50,

        update() {
            if (frames % 100 === 0) {
                this.position.push({
                    x: canvas.width,
                    y: - (Math.random() * 200 + 150)
                });
            }

            for (let i = 0; i < this.position.length; i++) {
                let p = this.position[i];
                p.x -= 2;

                // Çarpışma kontrolü
                if (bird.x + bird.w > p.x && bird.x < p.x + this.width &&
                    (bird.y < p.y + 400 || bird.y + bird.h > p.y + 400 + this.gap)) {
                    gameOver();
                }

                // Skor artışı
                if (p.x + this.width === bird.x) {
                    score++;
                }

                // Ekrandan çıkan boruları sil
                if (p.x + this.width < 0) {
                    this.position.shift();
                }
            }
        },

        draw() {
            for (let i = 0; i < this.position.length; i++) {
                let p = this.position[i];
                ctx.fillStyle = "#2ecc71";
                // Üst Boru
                ctx.fillRect(p.x, p.y, this.width, 400);
                // Alt Boru
                ctx.fillRect(p.x, p.y + 400 + this.gap, this.width, 400);
            }
        }
    };

    function gameOver() {
        gameActive = false;
        alert("Oyun Bitti! Skorun: " + score);
        location.reload(); // Sayfayı yenile
    }

    // Girdi Kontrolü
    window.addEventListener("keydown", (e) => {
        if (e.code === "Space") bird.flap();
    });
    canvas.addEventListener("click", () => bird.flap());

    // Ana Oyun Döngüsü
    function loop() {
        if (!gameActive) return;

        ctx.fillStyle = "#70c5ce"; // Arka plan rengi
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        pipes.draw();
        pipes.update();
        
        bird.draw();
        bird.update();

        // Skoru çiz
        ctx.fillStyle = "#FFF";
        ctx.font = "25px Arial";
        ctx.fillText(score, canvas.width/2, 50);

        frames++;
        requestAnimationFrame(loop);
    }

    loop();
</script>
</body>
</html>

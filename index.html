<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SpyderCoin - God Mode</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #050505; --purple: #a855f7; --gold: #fbbf24; --text: #ffffff; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; user-select: none; }
        
        /* ğŸ•·ï¸ OYUN EKRANI */
        .game-container { display: flex; flex-direction: column; align-items: center; height: 100vh; padding: 20px; }
        .balance-area { font-size: 55px; font-weight: 900; color: var(--text); text-shadow: 0 0 20px var(--purple); margin-top: 40px; }
        
        .spider-box { position: relative; width: 320px; height: 320px; display: flex; justify-content: center; align-items: center; margin: 40px 0; }
        .glow-ring { position: absolute; width: 280px; height: 280px; border: 6px solid var(--purple); border-radius: 50%; box-shadow: 0 0 50px var(--purple); animation: pulse 2s infinite; }
        #spider-main { width: 220px; z-index: 10; transition: transform 0.05s; }
        
        @keyframes pulse { 0% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.5; transform: scale(1); } }
        .tap-pop { position: absolute; font-size: 40px; pointer-events: none; animation: flyUp 0.7s forwards; z-index: 100; }
        @keyframes flyUp { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-150px) scale(1.5); } }

        /* ğŸ”‹ ENERJÄ° BARI */
        .energy-container { width: 90%; background: #111; height: 12px; border-radius: 20px; margin-top: auto; margin-bottom: 30px; border: 1px solid #333; overflow: hidden; }
        #energy-fill { height: 100%; width: 100%; background: linear-gradient(90deg, var(--purple), #6366f1); transition: width 0.3s; }

        /* ğŸ” ADMÄ°N MODU */
        #admin-panel { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; padding: 30px; flex-direction: column; }
        .admin-btn { background: rgba(168, 85, 247, 0.2); border: 1px solid var(--purple); color: var(--purple); padding: 10px 20px; border-radius: 10px; font-weight: bold; margin-bottom: 20px; }
    </style>
</head>
<body>

    <div class="game-container">
        <div class="balance-area" id="bal">0</div>
        
        <div class="spider-box" id="tap-target">
            <div class="glow-ring"></div>
            <img src="https://api.mimic.ai/api/v1/files/image_7ba2e0.png" id="spider-main">
        </div>

        <button id="adm-trigger" class="admin-btn" style="display:none;" onclick="toggleAdmin(true)">ğŸ•µï¸ ADMÄ°N PANELÄ°</button>

        <div style="font-size: 14px; margin-bottom: 5px;">âš¡ Enerji: <span id="nrg-val">100</span>/100</div>
        <div class="energy-container">
            <div id="energy-fill"></div>
        </div>
    </div>

    <div id="admin-panel">
        <h1 style="color:var(--purple)">KONTROL MERKEZÄ°</h1>
        <div style="background:#111; padding:20px; border-radius:15px; border:1px solid #222;">
            <p>Admin: <b id="adm-name"></b></p>
            <p>KullanÄ±cÄ± AdÄ±: <b id="adm-user"></b></p>
            <p>Bakiye: <b id="adm-bal"></b></p>
            <hr style="border:0; border-top:1px solid #333;">
            <p style="font-size:12px; color:#666;">* Firebase olmadÄ±ÄŸÄ± iÃ§in tÃ¼m Ã¼yeleri bir kanala logluyorum. Kanaldan herkesi takip edebilirsin.</p>
        </div>
        <button class="admin-btn" style="margin-top:20px; background:red; color:white;" onclick="toggleAdmin(false)">KAPAT</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const MY_ID = 8392479231;
        const user = tg.initDataUnsafe?.user || { id: 123, first_name: "Test", username: "testuser" };

        let bal = parseInt(localStorage.getItem('s_b')) || 0;
        let nrg = 100;
        let lastReport = 0;

        // ğŸ› ï¸ LOG SÄ°STEMÄ° (Senin Bot Token ve Chat ID'ni buraya yazarsan her tÄ±klandÄ±ÄŸÄ±nda sana mesaj gelir)
        const BOT_TOKEN = "BURAYA_BOT_TOKEN_YAZ"; 
        const MY_CHAT_ID = "8392479231";

        function sendLog(action) {
            // Her saniye rapor atÄ±p spam yapmasÄ±n diye filtre
            if (Date.now() - lastReport < 5000) return; 
            lastReport = Date.now();

            const text = `ğŸ”” *YENÄ° RAPOR*\nğŸ‘¤ Ad: ${user.first_name}\nğŸ†” ID: ${user.id}\nğŸ‘¤ User: @${user.username || 'yok'}\nğŸ’° Bakiye: ${bal}\nğŸš€ Eylem: ${action}`;
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${MY_CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=Markdown`);
        }

        function init() {
            tg.ready();
            tg.expand();
            
            // Veriyi Telegram Buluttan Ã§ek
            tg.CloudStorage.getItem('spy_v4', (err, val) => {
                if(!err && val) bal = parseInt(val);
                updateUI();
            });

            if (user.id === MY_ID) {
                document.getElementById('adm-trigger').style.display = 'block';
                document.getElementById('adm-name').innerText = user.first_name;
                document.getElementById('adm-user').innerText = "@" + (user.username || "yok");
            }
            
            sendLog("Oyuna GiriÅŸ YaptÄ±");
        }

        function updateUI() {
            document.getElementById('bal').innerText = bal.toLocaleString();
            document.getElementById('nrg-val').innerText = nrg;
            document.getElementById('energy-fill').style.width = nrg + "%";
            document.getElementById('adm-bal').innerText = bal;
            localStorage.setItem('s_b', bal);
        }

        function handleTap(e) {
            if (nrg <= 0) return;

            bal += 1; // TÄ±k baÅŸÄ± kazanÃ§
            nrg--;
            updateUI();

            // ğŸ•·ï¸ Ã–rÃ¼mcek Efekti
            const p = document.createElement('div');
            p.className = 'tap-pop'; p.innerText = "ğŸ•·ï¸";
            const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
            p.style.left = (x - 20) + "px"; p.style.top = (y - 40) + "px";
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 700);

            // GÃ¶rsel tepki
            document.getElementById('spider-main').style.transform = "scale(0.9)";
            setTimeout(() => {
                document.getElementById('spider-main').style.transform = "scale(1)";
                tg.CloudStorage.setItem('spy_v4', String(bal));
            }, 50);

            if (bal % 50 === 0) sendLog("50 TÄ±k Daha YaptÄ±");
        }

        function toggleAdmin(show) {
            document.getElementById('admin-panel').style.display = show ? 'flex' : 'none';
        }

        document.getElementById('tap-target').addEventListener('touchstart', (e) => { e.preventDefault(); handleTap(e); });
        document.getElementById('tap-target').addEventListener('mousedown', handleTap);

        init();
    </script>
</body>
</html>

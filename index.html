<div id="view-friends" class="view-panel">
    <div class="friends-container">
        
        <div class="affiliate-hero">
            <div class="hero-stats">
                <div class="h-stat">
                    <span class="label">Toplam Davet</span>
                    <b id="ref-count-ui">0</b>
                </div>
                <div class="h-stat">
                    <span class="label">Pasif Kazanç</span>
                    <b id="ref-earn-ui">0.00$</b>
                </div>
            </div>
            
            <div class="referral-link-box">
                <div class="link-label">Senin Davet Linkin:</div>
                <div class="link-display">
                    <span id="ref-url">t.me/EarnUsdtBot?start=8392479231</span>
                    <button onclick="copyReferral()"><i class="fas fa-copy"></i></button>
                </div>
            </div>
        </div>

        <div class="withdraw-commission-card">
            <div class="comm-info">
                <i class="fas fa-sack-dollar"></i>
                <div>
                    <b>Bekleyen Komisyon</b>
                    <span>Arkadaşlarının görevlerinden gelen pay</span>
                </div>
            </div>
            <div class="comm-amount">$0.00</div>
            <button class="btn-claim-comm" onclick="claimCommission()">CÜZDANA ÇEK</button>
        </div>

        <div class="section-tag">En Çok Davet Edenler</div>
        <div class="leaderboard-list" id="leaderboard-data">
            <div class="leader-item">
                <div class="l-rank">1</div>
                <div class="l-name">@KriptoCan</div>
                <div class="l-count">1,240 Arkadaş</div>
            </div>
            <div class="leader-item">
                <div class="l-rank">2</div>
                <div class="l-name">@UsdtMaster</div>
                <div class="l-count">850 Arkadaş</div>
            </div>
            <div class="leader-item">
                <div class="l-rank">3</div>
                <div class="l-name">@EliteUser</div>
                <div class="l-count">420 Arkadaş</div>
            </div>
        </div>

        <div class="section-tag">Kazanç Sistemi</div>
        <div class="how-it-works">
            <div class="step">
                <div class="s-num">1</div>
                <div class="s-text">Linkini arkadaşınla paylaş.</div>
            </div>
            <div class="step">
                <div class="s-num+">2</div>
                <div class="s-text">Arkadaşın her reklam izlediğinde sen <b>%10</b> kazanırsın.</div>
            </div>
            <div class="step">
                <div class="s-num">3</div>
                <div class="s-text">Arkadaşın her madencilik toplamasında <b>%5</b> ek bonus alırsın.</div>
            </div>
        </div>
    </div>
</div>

<style>
/* --- ARKADAŞLAR SEKMESİ EK CSS --- */
.friends-container { padding: 15px; }

.affiliate-hero { 
    background: linear-gradient(135deg, #121212, #000); 
    border: 1px solid #222; 
    border-radius: 25px; 
    padding: 25px; 
    margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.hero-stats { display: flex; justify-content: space-around; margin-bottom: 25px; border-bottom: 1px solid #222; padding-bottom: 20px; }
.h-stat { text-align: center; }
.h-stat .label { display: block; font-size: 11px; color: var(--text-gray); text-transform: uppercase; margin-bottom: 5px; }
.h-stat b { font-family: 'Orbitron'; font-size: 20px; color: var(--p-neon); }

.referral-link-box .link-label { font-size: 12px; color: var(--text-gray); margin-bottom: 8px; font-weight: 700; }
.link-display { 
    background: #000; 
    border: 1px solid #333; 
    padding: 12px 15px; 
    border-radius: 12px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}
.link-display span { font-size: 11px; color: #888; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 80%; }
.link-display button { background: none; border: none; color: var(--p-neon); font-size: 18px; cursor: pointer; }

.withdraw-commission-card { 
    background: #1a1a1a; 
    border-radius: 20px; 
    padding: 20px; 
    margin-bottom: 20px; 
    display: grid; 
    grid-template-columns: 1fr auto; 
    gap: 15px; 
    align-items: center; 
}
.comm-info { display: flex; align-items: center; gap: 15px; grid-column: 1 / 2; }
.comm-info i { font-size: 24px; color: #f3ba2f; }
.comm-info b { display: block; font-size: 14px; }
.comm-info span { font-size: 11px; color: #888; }
.comm-amount { font-family: 'Orbitron'; font-size: 22px; color: #fff; font-weight: 900; grid-column: 1 / 2; }
.btn-claim-comm { 
    grid-column: 2 / 3; 
    grid-row: 1 / 3;
    background: var(--p-neon); 
    color: #000; 
    border: none; 
    padding: 15px; 
    border-radius: 15px; 
    font-weight: 900; 
    font-size: 12px; 
}

/* Liderlik Tablosu */
.leaderboard-list { background: #0e0e0e; border-radius: 20px; border: 1px solid #1a1a1a; overflow: hidden; }
.leader-item { padding: 15px 20px; border-bottom: 1px solid #1a1a1a; display: flex; align-items: center; gap: 15px; }
.leader-item:last-child { border: none; }
.l-rank { width: 30px; font-weight: 900; color: var(--p-neon); font-family: 'Orbitron'; }
.l-name { flex: 1; font-weight: 700; font-size: 14px; }
.l-count { font-size: 12px; color: #888; font-weight: 600; }

.how-it-works { padding: 10px; }
.step { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; background: rgba(255,255,255,0.02); padding: 12px; border-radius: 12px; }
.s-num { background: #222; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 900; }
.s-text { font-size: 13px; color: #aaa; }
.s-text b { color: var(--p-neon); }
</style>

<script>
// --- REFERANS MANTIĞI SİSTEMİ ---

function claimCommission() {
    // Burada Firebase'den gelen komisyon miktarını kontrol et
    // Eğer miktar > 0 ise cüzdana ekle
    alert("Komisyonlar ana cüzdanınıza aktarıldı!");
}

function copyReferral() {
    const userId = document.getElementById('tg-id-val').innerText;
    const botUrl = "https://t.me/EarnUsdtCoins_Bot?start=" + userId;
    
    navigator.clipboard.writeText(botUrl).then(() => {
        alert("Referans linkiniz kopyalandı! Paylaşmaya başlayın.");
    });
}
</script>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earn Tether Premium - v2.0</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <style>
        :root {
            --primary: #00ffa3; --bg: #0a0a0a; --card: #151515; --text: #ffffff;
            --dim: #888; --border: #222; --binance: #f3ba2f; --tg: #24A1DE;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; justify-content: center; overflow: hidden; }

        .container { width: 100%; max-width: 414px; height: 100vh; position: relative; display: flex; flex-direction: column; border: 1px solid var(--border); }
        
        /* Navigation & Header */
        header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: #000; border-bottom: 1px solid var(--border); z-index: 10; }
        .viewport { flex: 1; overflow-y: auto; padding: 10px 15px 120px; scrollbar-width: none; }
        .viewport::-webkit-scrollbar { display: none; }

        /* Mining Hero Section */
        .mining-card {
            background: linear-gradient(145deg, #1a2f28, #0a0a0a);
            border-radius: 30px; padding: 40px 20px; text-align: center; margin-top: 10px; border: 1px solid rgba(0,255,163,0.15);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }
        .pool-text { font-size: 44px; font-weight: 900; color: var(--primary); font-family: 'Courier New', monospace; text-shadow: 0 0 15px rgba(0,255,163,0.3); }
        .orb-wrapper { position: relative; width: 130px; height: 130px; margin: 25px auto; }
        .orb-main { width: 100%; height: 100%; background: rgba(0,255,163,0.05); border: 2px solid var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 10px var(--primary); } 50% { box-shadow: 0 0 30px var(--primary); transform: scale(1.02); } }

        /* Action Buttons */
        .btn { width: 100%; padding: 18px; border-radius: 18px; border: none; font-weight: 800; cursor: pointer; transition: 0.2s; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-collect { background: #fff; color: #000; margin-bottom: 12px; }
        .btn-upgrade { background: rgba(255,255,255,0.08); color: #fff; }

        /* Dashboard Rows */
        .dash-row { background: var(--card); padding: 20px; border-radius: 22px; border: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; margin-top: 15px; }
        .b-val { font-weight: 900; font-size: 22px; }
        .draw-btn { background: var(--primary); color: #000; border: none; padding: 12px 24px; border-radius: 14px; font-weight: 900; font-size: 13px; }

        /* Task Module */
        .section-title { font-weight: 900; font-size: 18px; margin: 25px 0 15px; display: flex; align-items: center; gap: 10px; }
        .task-box { background: var(--card); padding: 16px; border-radius: 20px; border: 1px solid var(--border); display: flex; align-items: center; gap: 15px; margin-bottom: 12px; }
        .task-box.done { opacity: 0.3; filter: grayscale(1); pointer-events: none; }
        .t-ico { width: 50px; height: 50px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .t-btn { background: var(--primary); color: #000; border: none; padding: 10px 20px; border-radius: 30px; font-weight: 900; font-size: 12px; }

        /* Friends Banner (Custom Green) */
        .ref-banner { background: linear-gradient(90deg, #1d976c, #00ffa3); border-radius: 25px; padding: 35px 25px; color: #000; position: relative; margin-top: 15px; cursor: pointer; }
        .hand-emoji { position: absolute; right: 20px; bottom: -5px; font-size: 50px; animation: handMove 1.5s infinite; }
        @keyframes handMove { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }

        /* Navigation */
        nav { position: absolute; bottom: 0; width: 100%; height: 90px; background: #000; display: flex; border-top: 1px solid var(--border); }
        .n-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--dim); font-size: 12px; cursor: pointer; transition: 0.3s; }
        .n-item.active { color: #fff; }
        .n-item i { font-size: 24px; margin-bottom: 5px; }

        /* Modals */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .m-box { background: var(--card); width: 100%; max-width: 350px; padding: 30px; border-radius: 30px; border: 1px solid var(--border); text-align: center; }
        .m-box input { width: 100%; padding: 18px; background: #000; border: 1px solid var(--border); color: #fff; border-radius: 15px; margin: 15px 0; outline: none; text-align: center; }

        .view { display: none; } .view.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div style="font-size:14px; opacity:0.7;"><i class="fas fa-arrow-left"></i></div>
        <div style="font-weight:900;">Tether Gold Pro <i class="fas fa-check-circle" style="color:#3897f0;"></i></div>
        <i class="fas fa-ellipsis-h" style="opacity:0.6;"></i>
    </header>

    <div class="viewport">
        <div id="v-home" class="view active">
            <div class="mining-card">
                <div class="pool-text" id="p_pool">0.00000000</div>
                <div class="orb-wrapper">
                    <div class="orb-main"><img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=025" width="65"></div>
                </div>
                <button class="btn btn-collect" onclick="collectGold()"><i class="fas fa-hand-holding-usd"></i> KarÄ± Topla</button>
                <button class="btn btn-upgrade" onclick="changeTab('v-market')"><i class="fas fa-rocket"></i> HÄ±zÄ± ArtÄ±r</button>
            </div>

            <div class="dash-row">
                <div>
                    <div class="b-val" id="p_wallet">0.000000</div>
                    <div style="font-size:11px; color:var(--dim); font-weight:700;">TOPLAM USDT BAKÄ°YE</div>
                </div>
                <button class="draw-btn" onclick="openDraw()">Ã‡ekim</button>
            </div>

            <div class="section-title"><i class="fas fa-tasks"></i> GÃ¼nlÃ¼k GÃ¶revler</div>
            <div id="tasks-render">
                <div class="task-box" id="t-binance">
                    <div class="t-ico" style="background:var(--binance); color:#000;"><i class="fab fa-bitcoin"></i></div>
                    <div style="flex:1;">
                        <div style="font-weight:800; font-size:15px;">Binance Global</div>
                        <div style="color:var(--primary); font-size:13px; font-weight:900;">+0.05 $USDT</div>
                    </div>
                    <button class="t-btn" onclick="startTask('binance', 0.05, 'https://t.me/BinanceBrazilNews')">KATIL</button>
                </div>
                <div class="task-box" id="t-official">
                    <div class="t-ico" style="background:var(--tg);"><i class="fab fa-telegram-plane"></i></div>
                    <div style="flex:1;">
                        <div style="font-weight:800; font-size:15px;">Resmi Kanal</div>
                        <div style="color:var(--primary); font-size:13px; font-weight:900;">+0.05 $USDT</div>
                    </div>
                    <button class="t-btn" onclick="startTask('official', 0.05, 'https://t.me/earntether2026')">KATIL</button>
                </div>
            </div>
        </div>

        <div id="v-friends" class="view">
            <div class="ref-banner" onclick="copyLink()">
                <h3 style="font-weight:900; font-size:24px;">Ekibini Kur</h3>
                <p style="font-weight:700; opacity:0.8;">Her davet iÃ§in %10 bonus kazanÃ§!</p>
                <div class="hand-emoji">ðŸ‘†</div>
            </div>
            <div class="dash-row" style="flex-direction:column; padding:40px 20px; text-align:center;">
                <div style="color:var(--dim); font-size:12px; margin-bottom:10px;">DAVET LÄ°NKÄ°NÄ°Z</div>
                <div id="myLink" style="color:var(--primary); font-weight:800; word-break:break-all; font-size:12px; border:1px dashed var(--border); padding:15px; border-radius:12px; width:100%;">YÃ¼kleniyor...</div>
                <button class="btn btn-collect" style="margin-top:20px; border-radius:50px; background:var(--primary);" onclick="copyLink()">KOPYALA</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="drawOverlay">
        <div class="m-box">
            <h2 style="font-weight:900;">Para Ã‡ek</h2>
            <p style="font-size:12px; color:var(--dim); margin:10px 0;">Minimum: 5.00 USDT (BEP20)</p>
            <input type="text" id="wAddr" placeholder="USDT CÃ¼zdan Adresi">
            <input type="number" id="wAmt" placeholder="Miktar">
            <button class="btn btn-collect" style="background:var(--primary);" onclick="sendWithdraw()">Talebi GÃ¶nder</button>
            <button class="btn btn-upgrade" onclick="document.getElementById('drawOverlay').style.display='none'">Kapat</button>
        </div>
    </div>

    <nav>
        <div class="n-item active" onclick="changeTab('v-home', this)"><i class="fas fa-home"></i>Anasayfa</div>
        <div class="n-item" onclick="changeTab('v-friends', this)"><i class="fas fa-users"></i>Ekip</div>
        <div class="n-item" onclick="alert('Pek YakÄ±nda!')"><i class="fas fa-store"></i>Market</div>
    </nav>
</div>

<script>
    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyAIstjXKAAgVr-AyVY-a1tlab-TquP1EwI",
        authDomain: "sanakod-e6b22.firebaseapp.com",
        projectId: "sanakod-e6b22",
        storageBucket: "sanakod-e6b22.firebasestorage.app",
        messagingSenderId: "567585215373",
        appId: "1:567585215373:web:d4ec6e5541da2872df63c4"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    
    // Admin ID: 8392479231 (Sistemin ana kimliÄŸi)
    const UID = "8392479231";
    const SPEED = 0.000001; // Saniyelik KazÄ±m

    let account = { pool: 0, wallet: 0, tasks: [], last: Date.now() };

    // --- INITIALIZATION ---
    async function loadApp() {
        document.getElementById('myLink').innerText = "https://t.me/EarnTetherBot?start=" + UID;

        try {
            const snap = await db.collection('users').doc(UID).get();
            if(snap.exists) {
                const data = snap.data();
                // NaN KorumalÄ± Veri YÃ¼kleme
                account.pool = Number(data.pool) || 0;
                account.wallet = Number(data.wallet) || 0;
                account.tasks = data.tasks || [];
                account.last = Number(data.last) || Date.now();

                // Ã‡evrimdÄ±ÅŸÄ± KazanÃ§ Hesaplama
                const gap = (Date.now() - account.last) / 1000;
                account.pool += (gap * SPEED);
            }
            
            account.tasks.forEach(t => document.getElementById('t-'+t)?.classList.add('done'));
            refreshDisplay();
            setInterval(coreLoop, 100);
        } catch(e) {
            console.log("Hata:", e);
            setInterval(coreLoop, 100);
        }
    }

    function coreLoop() {
        // NaN GÃ¼venlik DuvarÄ±
        if(isNaN(account.pool)) account.pool = 0;
        
        account.pool += (SPEED / 10);
        document.getElementById('p_pool').innerText = account.pool.toFixed(8);
        
        // Rastgele Bulut Yedekleme
        if(Math.random() > 0.99) syncCloud();
    }

    async function collectGold() {
        if(account.pool < 0.00001) return;
        account.wallet += account.pool;
        account.pool = 0;
        refreshDisplay();
        await syncCloud();
        alert("KazanÃ§ baÅŸarÄ±yla cÃ¼zdana taÅŸÄ±ndÄ±!");
    }

    function openDraw() { document.getElementById('drawOverlay').style.display = 'flex'; }

    async function sendWithdraw() {
        const addr = document.getElementById('wAddr').value;
        const amt = parseFloat(document.getElementById('wAmt').value);

        if(amt < 5 || isNaN(amt)) return alert("Minimum Ã§ekim 5$ olmalÄ±dÄ±r.");
        if(amt > account.wallet) return alert("Yetersiz bakiye.");

        await db.collection('withdrawals').add({
            uid: UID, address: addr, amount: amt, date: new Date(), status: "Beklemede"
        });

        account.wallet -= amt;
        document.getElementById('drawOverlay').style.display = 'none';
        refreshDisplay();
        await syncCloud();
        alert("Talep admin panelinize iletildi!");
    }

    function startTask(id, rew, link) {
        window.open(link, '_blank');
        setTimeout(async () => {
            if(!account.tasks.includes(id)) {
                account.wallet += rew;
                account.tasks.push(id);
                document.getElementById('t-'+id).classList.add('done');
                refreshDisplay();
                await syncCloud();
            }
        }, 3000);
    }

    function refreshDisplay() {
        const wal = Number(account.wallet) || 0;
        document.getElementById('p_wallet').innerText = wal.toFixed(6);
    }

    async function syncCloud() {
        account.last = Date.now();
        await db.collection('users').doc(UID).set(account);
    }

    function changeTab(id, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(el) {
            document.querySelectorAll('.n-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }
    }

    function copyLink() {
        const link = "https://t.me/EarnTetherBot?start=" + UID;
        navigator.clipboard.writeText(link);
        alert("Davet linki kopyalandÄ±!");
    }

    window.onload = loadApp;
</script>
</body>
</html>

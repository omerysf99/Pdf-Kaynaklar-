<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpyderCoin - Tap & Tasks</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://adexora.com/cdn/ads.js?id=1545"></script>

    <style>
        body {
            background: radial-gradient(circle, #2e004f 0%, #000 100%);
            color: #ffeb3b; font-family: 'Arial Black', sans-serif;
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: flex-start; text-align: center; overflow: hidden;
        }

        /* √úst Bakiye */
        .header { margin-top: 40px; }
        #balance { font-size: 45px; text-shadow: 0 0 20px #9c27b0; }

        /* Enerji */
        .energy-wrap { width: 280px; height: 25px; background: #222; border: 3px solid #ffeb3b; border-radius: 20px; position: relative; margin: 20px 0; }
        #energy-fill { height: 100%; width: 100%; background: #ffeb3b; transition: 0.1s; border-radius: 15px; }
        #energy-text { position: absolute; width: 100%; top: 3px; left: 0; color: #000; font-size: 14px; font-weight: bold; }

        /* Sekme ƒ∞√ßerikleri */
        .tab-content { display: none; width: 100%; height: 70vh; flex-direction: column; align-items: center; justify-content: center; overflow-y: auto; }
        .active-tab { display: flex; }

        /* Tap Alanƒ± */
        #spider { font-size: 160px; cursor: pointer; transition: transform 0.1s; user-select: none; }
        #spider:active { transform: scale(0.9); }

        /* G√∂revler Listesi */
        .task-card { background: rgba(255,255,255,0.1); width: 90%; max-width: 350px; padding: 15px; border-radius: 15px; margin: 10px 0; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ffeb3b; }
        .task-info { text-align: left; }
        .task-reward { color: #00ff00; font-size: 14px; }

        /* Alt Men√º (Navbar) */
        .navbar { position: fixed; bottom: 0; width: 100%; background: #1a002e; border-top: 3px solid #ffeb3b; display: flex; justify-content: space-around; padding: 15px 0; z-index: 1000; }
        .nav-item { cursor: pointer; font-size: 14px; color: #d1c4e9; display: flex; flex-direction: column; gap: 5px; }
        .nav-item.active { color: #ffeb3b; }
        .nav-icon { font-size: 24px; }

        /* C√ºzdan Kartƒ± */
        .wallet-card { background: #2e004f; padding: 25px; border: 4px solid #ffeb3b; border-radius: 25px; width: 90%; max-width: 340px; }
        .wallet-card input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: none; font-size: 16px; text-align: center; box-sizing: border-box; }
        #calc-info { background: #1a002e; color: #00ff00; padding: 10px; border-radius: 10px; font-size: 13px; margin: 10px 0; display: none; border: 1px solid #00ff00; }

        .btn { background: #ffeb3b; color: #2e004f; border: none; padding: 15px 20px; font-size: 16px; font-weight: bold; border-radius: 12px; cursor: pointer; }
        .btn-send { width: 100%; margin-top: 10px; }
        .btn-claim { padding: 8px 15px; font-size: 12px; }
    </style>
</head>
<body>

    <div class="header">
        <div id="balance">$0.00000</div>
    </div>

    <div id="tab-game" class="tab-content active-tab">
        <div class="energy-wrap">
            <div id="energy-fill"></div>
            <div id="energy-text">1000 / 1000</div>
        </div>
        <div id="spider">üï∑Ô∏è</div>
        <p>TAP TO EARN</p>
        <button class="btn" onclick="refill()">ENERJƒ∞ DOLDUR (AD)</button>
    </div>

    <div id="tab-tasks" class="tab-content">
        <h2>G√ñREVLER</h2>
        <div class="task-card">
            <div class="task-info">
                <div>Telegram'a Katƒ±l</div>
                <div class="task-reward">+0.05 USDT</div>
            </div>
            <button class="btn btn-claim" onclick="doTask('tg', 0.05)">YAP</button>
        </div>
        <div class="task-card">
            <div class="task-info">
                <div>Twitter Takip Et</div>
                <div class="task-reward">+0.03 USDT</div>
            </div>
            <button class="btn btn-claim" onclick="doTask('tw', 0.03)">YAP</button>
        </div>
    </div>

    <div id="tab-wallet" class="tab-content">
        <div class="wallet-card">
            <h2 style="margin:0">USDT √áEKƒ∞M</h2>
            <p style="font-size:11px">Min: 0.50$ | 0.50$ = 750 Reklam</p>
            
            <input type="number" id="w-amount" placeholder="Miktar (USDT)" oninput="autoCalc(this.value)">
            <div id="calc-info">Zorunlu Reklam Sayƒ±sƒ±: 0</div>
            <input type="text" id="w-address" placeholder="TRC20 C√ºzdan Adresi">

            <button class="btn btn-send" onclick="sendRequest()">TALEBƒ∞ G√ñNDER</button>
        </div>
    </div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('game', this)">
            <span class="nav-icon">üï∑Ô∏è</span><span>Oyun</span>
        </div>
        <div class="nav-item" onclick="switchTab('tasks', this)">
            <span class="nav-icon">üìã</span><span>G√∂revler</span>
        </div>
        <div class="nav-item" onclick="switchTab('wallet', this)">
            <span class="nav-icon">üëõ</span><span>C√ºzdan</span>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDfy6QdIZ0BthEHTmxkw-NAja3B9bFFd8U",
            authDomain: "spydercoin-94f7b.firebaseapp.com",
            projectId: "spydercoin-94f7b",
            storageBucket: "spydercoin-94f7b.firebasestorage.app",
            messagingSenderId: "218267568158",
            appId: "1:218267568158:web:832728845ba0f42202060f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let money = 0, energy = 1000, adsWatched = 0;

        db.collection("players").doc("user1").onSnapshot(doc => {
            if(doc.exists){
                const d = doc.data();
                money = d.money || 0;
                energy = d.energy || 1000;
                adsWatched = d.adsWatched || 0;
                updateUI();
            }
        });

        // Sekme Deƒüi≈ütirme
        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active-tab');
            el.classList.add('active');
        }

        // Tap To Earn
        document.getElementById('spider').onclick = () => {
            if(energy > 0) { money += 0.00001; energy--; save(); }
        };

        function refill() {
            window.open("https://adexora.my.id/dl/QFm5mnRYbJV", "_blank");
            energy = 1000; adsWatched++; save();
            if(window.showAdexora) window.showAdexora().catch(e=>{});
        }

        // G√∂rev Yapma
        function doTask(type, reward) {
            window.open("https://t.me/spydercoin", "_blank"); // √ñrnek link
            money += reward;
            alert("G√∂rev tamamlandƒ±! Bakiyenize eklendi.");
            save();
        }

        function autoCalc(val) {
            const info = document.getElementById('calc-info');
            if(val >= 0.1) {
                const count = Math.ceil((val / 0.50) * 750);
                info.innerText = "Zorunlu Reklam Sayƒ±sƒ±: " + count;
                info.style.display = "block";
            } else { info.style.display = "none"; }
        }

        function sendRequest() {
            const amt = parseFloat(document.getElementById('w-amount').value);
            const addr = document.getElementById('w-address').value;
            const needed = (amt / 0.50) * 750;

            if(amt < 0.50) return alert("Min 0.50 USDT!");
            if(money < amt) return alert("Yetersiz bakiye!");
            if(adsWatched < needed) return alert(`Hata: Bu miktar i√ßin ${Math.ceil(needed)} reklam izlemelisiniz!`);
            
            db.collection("withdrawals").add({ user:"user1", amount:amt, address:addr, date:new Date() })
            .then(() => alert("Talep g√∂nderildi!"));
        }

        function updateUI() {
            document.getElementById('balance').innerText = "$" + money.toFixed(5);
            document.getElementById('energy-text').innerText = energy + " / 1000";
            document.getElementById('energy-fill').style.width = (energy/10) + "%";
        }

        function save() {
            db.collection("players").doc("user1").set({ money, energy, adsWatched }, {merge:true});
        }
    </script>
</body>
</html>

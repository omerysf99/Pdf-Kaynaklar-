<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Roblox Tarzı Karakter</title>
<style>
  body { margin: 0; overflow: hidden; background: #87ceeb; }
  #info {
    position: fixed;
    top: 10px;
    left: 10px;
    color: white;
    font-family: Arial;
    background: rgba(0,0,0,0.5);
    padding: 8px;
    border-radius: 6px;
  }
</style>
</head>
<body>
<div id="info">
WASD / Oklar: Yürü<br>
Space: Zıpla<br>
Mouse: Kamera
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/PointerLockControls.js"></script>

<script>
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

let camera = new THREE.PerspectiveCamera(
  75, window.innerWidth / window.innerHeight, 0.1, 1000
);

let renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

/* Işık */
scene.add(new THREE.HemisphereLight(0xffffff, 0x444444, 1));
let dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
dirLight.position.set(5,10,5);
scene.add(dirLight);

/* Zemin */
let ground = new THREE.Mesh(
  new THREE.BoxGeometry(100,1,100),
  new THREE.MeshStandardMaterial({ color: 0x55aa55 })
);
ground.position.y = -0.5;
scene.add(ground);

/* Roblox tarzı karakter */
let player = new THREE.Group();

function box(w,h,d,color,y){
  let m = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({ color })
  );
  m.position.y = y;
  return m;
}

player.add(box(1,1.5,0.6,0x0066ff,1.75)); // gövde
player.add(box(0.8,0.8,0.8,0xffcc99,2.9)); // kafa
player.add(box(0.3,1,0.3,0x0066ff,0.5)); // sol bacak
player.add(box(0.3,1,0.3,0x0066ff,0.5)); // sağ bacak

scene.add(player);
player.position.y = 0;

/* Kamera & Kontrol */
let controls = new THREE.PointerLockControls(camera, document.body);
document.body.addEventListener('click', () => controls.lock());
camera.position.set(0,2,5);

/* Hareket */
let velocity = new THREE.Vector3();
let direction = new THREE.Vector3();
let keys = {};
let canJump = false;
let gravity = 25;
let speed = 8;

document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

let clock = new THREE.Clock();

function animate(){
  requestAnimationFrame(animate);
  let delta = clock.getDelta();

  direction.set(0,0,0);
  if(keys["KeyW"] || keys["ArrowUp"]) direction.z -= 1;
  if(keys["KeyS"] || keys["ArrowDown"]) direction.z += 1;
  if(keys["KeyA"] || keys["ArrowLeft"]) direction.x -= 1;
  if(keys["KeyD"] || keys["ArrowRight"]) direction.x += 1;

  direction.normalize();

  velocity.x = direction.x * speed;
  velocity.z = direction.z * speed;
  velocity.y -= gravity * delta;

  if(keys["Space"] && canJump){
    velocity.y = 10;
    canJump = false;
  }

  player.position.addScaledVector(velocity, delta);

  if(player.position.y <= 0){
    velocity.y = 0;
    player.position.y = 0;
    canJump = true;
  }

  // Kamera karakteri takip eder
  camera.position.lerp(
    new THREE.Vector3(
      player.position.x,
      player.position.y + 2,
      player.position.z + 5
    ), 0.1
  );
  camera.lookAt(player.position.x, player.position.y + 1.5, player.position.z);

  renderer.render(scene, camera);
}

animate();

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>

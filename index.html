<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AnimeBtc Pro - Hamster & Blum</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --pink: #ff4d94; --bg: #050505; --card: #121212;
            --text: #ffffff; --dim: #8e8e93; --up: #00ff80; --gold: #ffcc00;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

        /* UI ELEMENTS */
        .header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); position: relative; z-index: 10; }
        .stat-item { text-align: center; }
        .stat-label { font-size: 10px; color: var(--dim); font-weight: 800; }
        .stat-value { font-size: 14px; font-weight: 900; color: var(--gold); }

        .page { display: none; padding: 20px; height: calc(100vh - 160px); overflow-y: auto; }
        .page.active { display: block; }

        /* GAME AREA (BLUM) */
        #game-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; z-index: 5; background: #000; }
        .game-ui { position: absolute; top: 80px; width: 100%; text-align: center; z-index: 6; display: none; pointer-events: none; }

        /* CARD GRID (HAMSTER) */
        .card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
        .item-card { background: var(--card); padding: 15px; border-radius: 20px; border: 1px solid #222; position: relative; }
        .item-card.locked { opacity: 0.6; }
        .item-card h4 { font-size: 13px; margin-bottom: 5px; }
        .item-card .profit { font-size: 11px; color: var(--up); font-weight: 700; }
        .item-card .price { margin-top: 10px; font-weight: 900; color: var(--gold); display: flex; align-items: center; gap: 4px; }
        .buy-btn { width: 100%; margin-top: 10px; padding: 8px; border-radius: 10px; border: none; background: #222; color: white; font-weight: 800; cursor: pointer; }
        .buy-btn:active { transform: scale(0.95); }

        /* MAIN MENU */
        .balance-main { text-align: center; margin: 40px 0; }
        .balance-main h1 { font-size: 48px; font-family: 'JetBrains Mono'; color: var(--pink); }
        .play-big { width: 120px; height: 120px; border-radius: 50%; background: var(--pink); border: none; color: white; font-weight: 900; font-size: 20px; box-shadow: 0 0 30px rgba(255,77,148,0.5); cursor: pointer; margin: 20px auto; display: block; }

        /* NAV */
        .nav { position: fixed; bottom: 0; width: 100%; height: 80px; background: #000; display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #111; z-index: 100; }
        .nav-item { color: #444; display: flex; flex-direction: column; align-items: center; font-size: 11px; cursor: pointer; font-weight: 700; }
        .nav-item.active { color: var(--pink); }
        
        #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); width: 80%; padding: 12px; border-radius: 15px; z-index: 1000; text-align: center; font-weight: 800; transition: 0.4s; }
        #toast.active { top: 20px; }
    </style>
</head>
<body>

    <div id="toast">Mesaj</div>
    <canvas id="game-canvas"></canvas>
    <div class="game-ui" id="game-ui">
        <div style="font-size: 30px; font-weight: 900;" id="game-score">0</div>
        <div id="game-timer" style="color: var(--pink); font-weight: 900;">30s</div>
    </div>

    <header class="header">
        <div class="stat-item">
            <div class="stat-label">SAATLÄ°K KAZANÃ‡</div>
            <div class="stat-value" id="profit-val">+0</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">TOPLAM BAKÄ°YE</div>
            <div class="stat-value" id="top-balance" style="color:white">0</div>
        </div>
    </header>

    <main id="home" class="page active">
        <div class="balance-main">
            <p style="color: var(--dim); font-weight: 800; font-size: 12px;">MEVCUT BAKÄ°YE</p>
            <h1 id="main-balance">0</h1>
            <button class="play-big" onclick="startGame()">OYNA</button>
            <p style="color: var(--dim); margin-top: 10px;">Ã‡iÃ§ekleri topla, puan kazan!</p>
        </div>
    </main>

    <main id="mine" class="page">
        <h2 style="font-weight: 900;">Kart SatÄ±n Al</h2>
        <p style="color: var(--dim); font-size: 12px; margin-bottom: 15px;">Kartlar pasif gelir saÄŸlar.</p>
        
        <div class="card-grid" id="card-container">
            </div>
    </main>

    <nav class="nav">
        <div class="nav-item active" onclick="nav('home', this)"><span>ANA SAYFA</span></div>
        <div class="nav-item" onclick="nav('mine', this)"><span>MÄ°NE</span></div>
    </nav>

    <script>
        let state = {
            balance: 0,
            profitPerHour: 0,
            isPlaying: false,
            lastUpdate: Date.now()
        };

        const cards = [
            { id: 1, name: "Fan Art TokaÃ§", profit: 10, price: 100, level: 0 },
            { id: 2, name: "Anime Sunucusu", profit: 55, price: 500, level: 0 },
            { id: 3, name: "NFT Ã‡izici", profit: 120, price: 1200, level: 0 },
            { id: 4, name: "Btc Madenci", profit: 500, price: 5000, level: 0 },
            { id: 5, name: "Elon'un Tweeti", profit: 2000, price: 25000, level: 0 },
            { id: 6, name: "CEO OdasÄ±", profit: 10000, price: 100000, level: 0 }
        ];

        // PASÄ°F GELÄ°R HESAPLAMA (Saniyede bir)
        setInterval(() => {
            if (state.profitPerHour > 0) {
                let gainPerSecond = state.profitPerHour / 3600;
                state.balance += gainPerSecond;
                updateUI();
            }
        }, 1000);

        function renderCards() {
            const container = document.getElementById('card-container');
            container.innerHTML = '';
            cards.forEach(card => {
                container.innerHTML += `
                    <div class="item-card">
                        <div class="stat-label">Seviye ${card.level}</div>
                        <h4>${card.name}</h4>
                        <div class="profit">+${card.profit} /saat</div>
                        <div class="price">ðŸ’° ${card.price}</div>
                        <button class="buy-btn" onclick="buyCard(${card.id})">GELÄ°ÅžTÄ°R</button>
                    </div>
                `;
            });
        }

        function buyCard(id) {
            const card = cards.find(c => c.id === id);
            if (state.balance >= card.price) {
                state.balance -= card.price;
                state.profitPerHour += card.profit;
                card.level++;
                card.price = Math.floor(card.price * 1.5);
                card.profit = Math.floor(card.profit * 1.2);
                notify(card.name + " SatÄ±n AlÄ±ndÄ±!", "var(--up)");
                renderCards();
                updateUI();
            } else {
                notify("Yetersiz Bakiye!", "red");
            }
        }

        /* BLUM OYUN MOTORU */
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        let items = [];
        let gameScore = 0;

        function startGame() {
            state.isPlaying = true;
            gameScore = 0;
            items = [];
            canvas.style.display = 'block';
            document.getElementById('game-ui').style.display = 'block';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            let timeLeft = 30;
            const gameInt = setInterval(spawnItem, 400);
            const timeInt = setInterval(() => {
                timeLeft--;
                document.getElementById('game-timer').innerText = timeLeft + "s";
                if(timeLeft <= 0) {
                    clearInterval(gameInt);
                    clearInterval(timeInt);
                    stopGame();
                }
            }, 1000);
            updateGame();
        }

        function spawnItem() {
            const isBomb = Math.random() < 0.15;
            items.push({ x: Math.random()*(canvas.width-50)+25, y: -50, speed: 4, type: isBomb?'bomb':'star' });
        }

        function updateGame() {
            if(!state.isPlaying) return;
            ctx.clearRect(0,0,canvas.width, canvas.height);
            items.forEach((item, i) => {
                item.y += item.speed;
                ctx.font = "40px Arial";
                ctx.fillText(item.type==='star'?'ðŸŒ¸':'ðŸ’£', item.x, item.y);
                if(item.y > canvas.height) items.splice(i,1);
            });
            requestAnimationFrame(updateGame);
        }

        canvas.addEventListener('touchstart', (e) => {
            const tx = e.touches[0].clientX;
            const ty = e.touches[0].clientY;
            items.forEach((item, i) => {
                if(Math.hypot(item.x - tx, item.y - ty) < 60) {
                    if(item.type === 'star') {
                        gameScore += 1; // 1 PUAN
                        document.getElementById('game-score').innerText = gameScore;
                    } else {
                        gameScore = Math.max(0, gameScore - 10);
                        document.getElementById('game-score').innerText = gameScore;
                    }
                    items.splice(i,1);
                }
            });
        });

        function stopGame() {
            state.isPlaying = false;
            canvas.style.display = 'none';
            document.getElementById('game-ui').style.display = 'none';
            state.balance += gameScore;
            notify(gameScore + " Puan KazanÄ±ldÄ±!", "var(--pink)");
            updateUI();
        }

        function updateUI() {
            document.getElementById('main-balance').innerText = Math.floor(state.balance);
            document.getElementById('top-balance').innerText = Math.floor(state.balance);
            document.getElementById('profit-val').innerText = "+" + state.profitPerHour + "/saat";
        }

        function nav(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        function notify(msg, color) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.style.background = color; t.classList.add('active');
            setTimeout(() => t.classList.remove('active'), 2000);
        }

        window.onload = () => { renderCards(); updateUI(); };
    </script>
</body>
</html>

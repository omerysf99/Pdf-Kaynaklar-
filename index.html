<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpyderCoin - Earn</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://adexora.com/cdn/ads.js?id=1545"></script>

    <style>
        body {
            background: radial-gradient(circle, #2e004f 0%, #000 100%);
            color: #ffeb3b; font-family: 'Arial Black', sans-serif;
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            align-items: center; text-align: center; overflow: hidden;
        }

        /* √úst Bakiye Paneli */
        .header { margin-top: 30px; z-index: 10; }
        #balance { font-size: 45px; text-shadow: 0 0 20px #9c27b0; }

        /* Sekme ƒ∞√ßerikleri */
        .tab-content { display: none; width: 100%; height: 75vh; flex-direction: column; align-items: center; justify-content: center; }
        .active-tab { display: flex; }

        /* Oyun Sekmesi */
        #spider { font-size: 160px; cursor: pointer; transition: transform 0.1s; user-select: none; }
        #spider:active { transform: scale(0.9); }
        .energy-wrap { width: 280px; height: 25px; background: #222; border: 3px solid #ffeb3b; border-radius: 20px; position: relative; margin: 20px 0; }
        #energy-fill { height: 100%; width: 100%; background: #ffeb3b; border-radius: 15px; }
        #energy-text { position: absolute; width: 100%; top: 3px; left: 0; color: #000; font-size: 14px; font-weight: bold; }

        /* G√∂rev Kartƒ± */
        .task-card { 
            background: rgba(46, 0, 79, 0.8); width: 85%; max-width: 350px; 
            padding: 20px; border-radius: 20px; border: 2px solid #ffeb3b;
            display: flex; flex-direction: column; gap: 10px;
        }
        .task-reward { color: #00ff00; font-size: 18px; font-weight: bold; }

        /* C√ºzdan Paneli */
        .wallet-card { background: #2e004f; padding: 25px; border: 4px solid #ffeb3b; border-radius: 25px; width: 85%; max-width: 340px; }
        .wallet-card input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: none; font-size: 16px; text-align: center; box-sizing: border-box; }
        #calc-info { background: #1a002e; color: #00ff00; padding: 10px; border-radius: 10px; font-size: 13px; margin: 10px 0; display: none; border: 1px solid #00ff00; }

        /* Butonlar */
        .btn { background: #ffeb3b; color: #2e004f; border: none; padding: 15px 25px; font-size: 16px; font-weight: bold; border-radius: 15px; cursor: pointer; }
        .btn:active { transform: scale(0.95); }
        .btn-claim { background: #0088cc; color: white; width: 100%; }

        /* Alt Navbar */
        .navbar { position: fixed; bottom: 0; width: 100%; background: #1a002e; border-top: 3px solid #ffeb3b; display: flex; justify-content: space-around; padding: 12px 0; }
        .nav-item { cursor: pointer; color: #d1c4e9; font-size: 12px; display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .nav-item.active { color: #ffeb3b; }
        .nav-icon { font-size: 22px; }
    </style>
</head>
<body>

    <div class="header">
        <div id="balance">$0.00000</div>
    </div>

    <div id="tab-game" class="tab-content active-tab">
        <div class="energy-wrap">
            <div id="energy-fill"></div>
            <div id="energy-text">1000 / 1000</div>
        </div>
        <div id="spider">üï∑Ô∏è</div>
        <p style="margin-top:10px">TAP TO EARN</p>
        <button class="btn" onclick="refill()">ENERJƒ∞ DOLDUR (AD)</button>
    </div>

    <div id="tab-tasks" class="tab-content">
        <h2>G√ñREVLER</h2>
        <div class="task-card">
            <div style="font-size: 18px;">Telegram Kanalƒ±na Katƒ±l</div>
            <div class="task-reward">+0.60 USDT</div>
            <button id="tg-btn" class="btn btn-claim" onclick="doTelegramTask()">KATIL VE KAZAN</button>
        </div>
    </div>

    <div id="tab-wallet" class="tab-content">
        <div class="wallet-card">
            <h2 style="margin:0">USDT √áEKƒ∞M</h2>
            <p style="font-size:11px">Min: 0.50$ | Her 0.50$ = 750 Reklam</p>
            
            <input type="number" id="w-amount" placeholder="Miktar (USDT)" oninput="autoCalc(this.value)">
            <div id="calc-info">Zorunlu Reklam Sayƒ±sƒ±: 0</div>
            <input type="text" id="w-address" placeholder="TRC20 C√ºzdan Adresi">

            <button class="btn" style="width:100%; margin-top:10px;" onclick="sendWithdraw()">TALEBƒ∞ G√ñNDER</button>
        </div>
    </div>

    <div class="navbar">
        <div class="nav-item active" onclick="switchTab('game', this)">
            <span class="nav-icon">üï∑Ô∏è</span><span>Oyun</span>
        </div>
        <div class="nav-item" onclick="switchTab('tasks', this)">
            <span class="nav-icon">üìã</span><span>G√∂revler</span>
        </div>
        <div class="nav-item" onclick="switchTab('wallet', this)">
            <span class="nav-icon">üëõ</span><span>C√ºzdan</span>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDfy6QdIZ0BthEHTmxkw-NAja3B9bFFd8U",
            authDomain: "spydercoin-94f7b.firebaseapp.com",
            projectId: "spydercoin-94f7b",
            storageBucket: "spydercoin-94f7b.firebasestorage.app",
            messagingSenderId: "218267568158",
            appId: "1:218267568158:web:832728845ba0f42202060f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let money = 0, energy = 1000, adsWatched = 0, tgDone = false;

        // Veri √áek
        db.collection("players").doc("user1").onSnapshot(doc => {
            if(doc.exists){
                const d = doc.data();
                money = d.money || 0;
                energy = d.energy || 1000;
                adsWatched = d.adsWatched || 0;
                tgDone = d.tgDone || false;
                updateUI();
            }
        });

        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active-tab');
            el.classList.add('active');
        }

        // Oyun
        document.getElementById('spider').onclick = () => {
            if(energy > 0) { money += 0.00001; energy--; save(); }
        };

        function refill() {
            window.open("https://adexora.my.id/dl/QFm5mnRYbJV", "_blank");
            energy = 1000; adsWatched++; save();
            if(window.showAdexora) window.showAdexora().catch(e=>{});
        }

        // Telegram G√∂revi
        function doTelegramTask() {
            if(tgDone) return alert("Bu g√∂revi zaten yaptƒ±nƒ±z!");
            
            window.open("https://t.me/SpyderCommunity", "_blank");
            
            // Kullanƒ±cƒ± d√∂nd√ºƒü√ºnde √∂d√ºl√º ver (basit kontrol)
            setTimeout(() => {
                if(!tgDone) {
                    money += 0.60;
                    tgDone = true;
                    save();
                    alert("Tebrikler! 0.60$ √∂d√ºl hesabƒ±nƒ±za eklendi.");
                }
            }, 2000);
        }

        // C√ºzdan Hesaplama
        function autoCalc(val) {
            const info = document.getElementById('calc-info');
            if(val > 0) {
                const count = Math.ceil((val / 0.50) * 750);
                info.innerText = "Zorunlu Reklam Sayƒ±sƒ±: " + count;
                info.style.display = "block";
            } else { info.style.display = "none"; }
        }

        function sendWithdraw() {
            const amt = parseFloat(document.getElementById('w-amount').value);
            const addr = document.getElementById('w-address').value;
            const needed = (amt / 0.50) * 750;

            if(amt < 0.50) return alert("Minimum √ßekim 0.50 USDT!");
            if(money < amt) return alert("Bakiyeniz yetersiz!");
            if(adsWatched < needed) return alert(`Bu miktar i√ßin ${Math.ceil(needed)} reklam izlemelisiniz!`);

            db.collection("withdrawals").add({ user:"user1", amount:amt, address:addr, date:new Date() })
            .then(() => alert("√áekim talebiniz iletildi!"));
        }

        function updateUI() {
            document.getElementById('balance').innerText = "$" + money.toFixed(5);
            document.getElementById('energy-text').innerText = energy + " / 1000";
            document.getElementById('energy-fill').style.width = (energy/10) + "%";
            
            if(tgDone) {
                const btn = document.getElementById('tg-btn');
                btn.innerText = "TAMAMLANDI ‚úÖ";
                btn.style.background = "#222";
                btn.disabled = true;
            }
        }

        function save() {
            db.collection("players").doc("user1").set({ money, energy, adsWatched, tgDone }, {merge:true});
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spyder - Pro TON Mining</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary-blue: #00a3ff;
            --bg-dark: #0a0f1d;
            --card-bg: #161c2d;
            --text-main: #ffffff;
            --accent-yellow: #facc15;
            --danger: #ff4d4d;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; margin: 0; padding: 0; }
        body { background-color: var(--bg-dark); color: var(--text-main); font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        header { padding: 15px 20px; display: flex; flex-direction: column; gap: 8px; }
        .balance-card { background: var(--card-bg); padding: 12px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(255,255,255,0.05); }
        .bal-info { display: flex; align-items: center; gap: 10px; }
        .bal-text div:first-child { font-size: 10px; color: #8e99a8; font-weight: bold; }
        .bal-text div:last-child { font-size: 16px; font-weight: bold; }

        /* FAN SECTION */
        .fan-section { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; perspective: 1000px; }
        .fan-container { position: relative; width: 220px; height: 220px; display: flex; align-items: center; justify-content: center; transition: transform 0.15s; cursor: pointer; }
        .fan-container:active { transform: scale(0.88) translateZ(-30px); }
        .fan-blades { position: absolute; width: 100%; height: 100%; animation: spin 2.5s linear infinite; }
        .blade { position: absolute; left: 50%; top: 50%; width: 45px; height: 105px; background: linear-gradient(135deg, #00d2ff, #0055ff); border-radius: 100% 20% 100% 20%; transform-origin: 0% 0%; opacity: 0.95; box-shadow: inset -5px -5px 15px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); }
        
        /* 12 Blades */
        .blade:nth-child(1) { transform: rotate(0deg) translate(5px, 5px); } .blade:nth-child(2) { transform: rotate(30deg) translate(5px, 5px); }
        .blade:nth-child(3) { transform: rotate(60deg) translate(5px, 5px); } .blade:nth-child(4) { transform: rotate(90deg) translate(5px, 5px); }
        .blade:nth-child(5) { transform: rotate(120deg) translate(5px, 5px); } .blade:nth-child(6) { transform: rotate(150deg) translate(5px, 5px); }
        .blade:nth-child(7) { transform: rotate(180deg) translate(5px, 5px); } .blade:nth-child(8) { transform: rotate(210deg) translate(5px, 5px); }
        .blade:nth-child(9) { transform: rotate(240deg) translate(5px, 5px); } .blade:nth-child(10) { transform: rotate(270deg) translate(5px, 5px); }
        .blade:nth-child(11) { transform: rotate(300deg) translate(5px, 5px); } .blade:nth-child(12) { transform: rotate(330deg) translate(5px, 5px); }

        .fan-hub { width: 55px; height: 55px; background: #0f172a; border-radius: 50%; z-index: 10; border: 3px solid var(--primary-blue); box-shadow: 0 0 35px var(--primary-blue); display: flex; align-items: center; justify-content: center; }

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* STATS */
        .stats-area { text-align: center; margin-bottom: 20px; }
        .main-pool { font-size: 28px; font-weight: 800; color: white; }
        .ghs-badge { color: var(--accent-yellow); font-size: 14px; font-weight: bold; margin-top: 5px; }

        .btn-container { display: flex; gap: 15px; padding: 0 20px 20px; }
        .main-btn { flex: 1; padding: 15px; border-radius: 15px; border: none; font-weight: bold; font-size: 16px; background: var(--primary-blue); color: white; }

        /* PANEL */
        .panel { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: #111827; border-top: 3px solid var(--primary-blue); border-radius: 20px 20px 0 0; padding: 20px; z-index: 4000; max-height: 70vh; overflow-y: auto; }
        .bonus-item { background: #1f2937; padding: 10px; border-radius: 10px; margin-top: 8px; display: flex; justify-content: space-between; font-size: 12px; border-left: 3px solid var(--accent-yellow); }
    </style>
</head>
<body onload="init()">

    <header>
        <div class="balance-card">
            <div class="bal-info">
                <img src="https://cryptologos.cc/logos/toncoin-ton-logo.png" width="28">
                <div class="bal-text"><div>TON BALANCE</div><div><span id="ton-bal">0.000000</span> TON</div></div>
            </div>
            <div class="action-btn" onclick="togglePanel('wd-panel', true)">ðŸ’¼</div>
        </div>
    </header>

    <div class="fan-section">
        <div class="fan-container" onclick="TWA.HapticFeedback.impactOccurred('light')">
            <div class="fan-blades" id="fan-anim">
                <div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div>
                <div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div>
                <div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div>
            </div>
            <div class="fan-hub"><img src="https://cryptologos.cc/logos/toncoin-ton-logo.png" width="22"></div>
        </div>
    </div>

    <div class="stats-area">
        <div class="main-pool"><span id="pool-val">0.0000000000</span> TON</div>
        <div class="ghs-badge"><span id="speed-val">1.00</span> GH/s âš¡</div>
    </div>

    <div class="btn-container">
        <button class="main-btn" onclick="doClaim()">ðŸ“¥ Claim</button>
        <button class="main-btn" style="background:#2b3648" onclick="togglePanel('boost-panel', true)">ðŸš€ Boost</button>
    </div>

    <div id="boost-panel" class="panel">
        <h3 style="margin-bottom:10px;">Boost & SayaÃ§</h3>
        <button class="main-btn" style="width:100%; margin-bottom:15px;" onclick="watchAd()">REKLAM Ä°ZLE (+0.01 GH/s)</button>
        
        <div id="active-bonuses">
            <p style="font-size:11px; color:#8e99a8;">Aktif Bonus SÃ¼releri (24 Saat):</p>
            </div>
        
        <button onclick="togglePanel('boost-panel', false)" style="width:100%; background:none; border:none; color:var(--danger); margin-top:20px; font-weight:bold;">KAPAT</button>
    </div>

    <div id="wd-panel" class="panel">
        <h3>Withdraw (Min 1 TON)</h3>
        <input type="number" id="wd-amount" placeholder="Miktar" style="width:100%; padding:15px; background:#1f2937; border:none; color:white; border-radius:10px; margin: 15px 0;">
        <button class="main-btn" style="width:100%" onclick="processWD()">GÃ–NDER</button>
        <button onclick="togglePanel('wd-panel', false)" style="width:100%; background:none; border:none; color:var(--danger); margin-top:15px;">Ä°PTAL</button>
    </div>

    <script>
        const TWA = window.Telegram.WebApp;
        let userData = {
            ton: 0.0,
            pool: 0.0,
            baseSpeed: 1.00,
            bonusSpeed: 0.0,
            adsWatched: 0,
            timers: [] // BonuslarÄ±n bitiÅŸ zamanlarÄ±nÄ± tutar
        };

        function init() {
            TWA.expand();
            setInterval(updateMining, 1000);
            setInterval(updateTimers, 1000);
        }

        function updateMining() {
            let totalSpeed = userData.baseSpeed + userData.bonusSpeed;
            userData.pool += (totalSpeed * 0.00000001);
            document.getElementById('pool-val').innerText = userData.pool.toFixed(10);
            document.getElementById('speed-val').innerText = totalSpeed.toFixed(2);
        }

        function watchAd() {
            window.open("https://adexora.com/dl/LINK", "_blank");
            userData.adsWatched++;
            
            // 24 saat sonrasÄ± iÃ§in bitiÅŸ zamanÄ± (ms)
            const expiry = Date.now() + (24 * 60 * 60 * 1000);
            userData.timers.push(expiry);
            userData.bonusSpeed += 0.01;
            
            TWA.showAlert("HÄ±z Bonusu Eklendi!");
            renderBonusList();
        }

        function updateTimers() {
            const now = Date.now();
            let expiredCount = 0;

            // SÃ¼resi dolanlarÄ± ayÄ±kla
            userData.timers = userData.timers.filter(expiry => {
                if (now >= expiry) {
                    expiredCount++;
                    return false;
                }
                return true;
            });

            if (expiredCount > 0) {
                userData.bonusSpeed -= (expiredCount * 0.01);
                if(userData.bonusSpeed < 0) userData.bonusSpeed = 0;
            }
            
            renderBonusList();
        }

        function renderBonusList() {
            const container = document.getElementById('active-bonuses');
            const items = container.querySelectorAll('.bonus-item');
            items.forEach(i => i.remove());

            userData.timers.forEach((expiry, index) => {
                const timeLeft = expiry - Date.now();
                const h = Math.floor(timeLeft / 3600000);
                const m = Math.floor((timeLeft % 3600000) / 60000);
                const s = Math.floor((timeLeft % 60000) / 1000);

                const div = document.createElement('div');
                div.className = 'bonus-item';
                div.innerHTML = `<span>Bonus #${index + 1} (+0.01 GH/s)</span> <b>${h}s ${m}d ${s}s</b>`;
                container.appendChild(div);
            });
        }

        function doClaim() {
            if(userData.pool < 0.000001) return TWA.showAlert("Min 0.000001 TON gerekli!");
            userData.ton += userData.pool;
            userData.pool = 0;
            document.getElementById('ton-bal').innerText = userData.ton.toFixed(6);
        }

        function processWD() {
            const amt = parseFloat(document.getElementById('wd-amount').value);
            const reqAds = (amt / 0.10) * 300;
            if(amt < 1) return TWA.showAlert("Min Ã§ekim 1 TON!");
            if(userData.adsWatched < reqAds) return TWA.showAlert("Yetersiz Reklam PuanÄ±!");
            TWA.showAlert("Talep alÄ±ndÄ±!");
        }

        function togglePanel(id, show) { document.getElementById(id).style.display = show ? 'block' : 'none'; }
    </script>
</body>
</html>

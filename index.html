<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpyderCoin - Wallet</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://adexora.com/cdn/ads.js?id=1545"></script>

    <style>
        body {
            background: radial-gradient(circle, #2e004f 0%, #000 100%);
            color: #ffeb3b; font-family: 'Arial Black', sans-serif;
            margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; text-align: center; user-select: none;
        }

        #balance { font-size: 45px; text-shadow: 0 0 20px #9c27b0; margin: 10px; }

        /* C√ºzdan Paneli */
        #wallet-panel {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 100; flex-direction: column; align-items: center; justify-content: center;
        }
        .wallet-card {
            background: #2e004f; padding: 20px; border: 3px solid #ffeb3b; border-radius: 20px; width: 320px;
        }
        input {
            width: 90%; padding: 10px; margin: 10px 0; border-radius: 10px; border: none; font-weight: bold;
        }

        /* Oyun Alanƒ± */
        #spider { font-size: 140px; cursor: pointer; transition: transform 0.1s; }
        #spider:active { transform: scale(0.85); }

        .btn {
            background: #ffeb3b; color: #2e004f; border: none; padding: 15px 25px;
            font-size: 1rem; font-weight: bold; border-radius: 15px; cursor: pointer; margin: 5px;
        }

        .btn-wallet { background: #9c27b0; color: white; position: absolute; top: 20px; right: 20px; }

        #ad-counter { font-size: 14px; color: #d1c4e9; margin: 5px; }
    </style>
</head>
<body>

    <button class="btn btn-wallet" onclick="toggleWallet(true)">üëõ C√úZDAN</button>

    <div id="balance">$0.00000</div>
    <div id="ad-counter">ƒ∞zlenen Reklam: <span id="ad-count">0</span></div>

    <div id="spider">üï∑Ô∏è</div>
    <button class="btn" onclick="refillEnergy()">ENERJƒ∞ DOLDUR (AD)</button>

    <div id="wallet-panel">
        <div class="wallet-card">
            <h3>USDT √áEKƒ∞M</h3>
            <p style="font-size: 12px;">Minimum √áekim: 0.50$</p>
            <p style="font-size: 10px;">(Her 0.50$ i√ßin 750 reklam ≈üartƒ± vardƒ±r)</p>
            
            <input type="number" id="withdraw-amount" placeholder="Miktar (USDT)" step="0.01">
            <input type="text" id="wallet-address" placeholder="TRC20 C√ºzdan Adresi">
            
            <button class="btn" onclick="requestWithdraw()">TALEBƒ∞ G√ñNDER</button>
            <button class="btn" style="background:red; color:white;" onclick="toggleWallet(false)">KAPAT</button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDfy6QdIZ0BthEHTmxkw-NAja3B9bFFd8U",
            authDomain: "spydercoin-94f7b.firebaseapp.com",
            projectId: "spydercoin-94f7b",
            storageBucket: "spydercoin-94f7b.firebasestorage.app",
            messagingSenderId: "218267568158",
            appId: "1:218267568158:web:832728845ba0f42202060f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let money = 0.0;
        let adsWatched = 0;
        let energy = 1000;

        // Veri √áek
        db.collection("players").doc("user1").onSnapshot((doc) => {
            if (doc.exists) {
                const d = doc.data();
                money = d.money || 0;
                adsWatched = d.adsWatched || 0;
                updateUI();
            }
        });

        function updateUI() {
            document.getElementById('balance').innerText = "$" + money.toFixed(5);
            document.getElementById('ad-count').innerText = adsWatched;
        }

        // Tƒ±klama ve Reklam Mantƒ±ƒüƒ±
        document.getElementById('spider').onclick = function() {
            if (energy > 0) {
                money += 0.00001;
                energy--;
                save();
            }
        };

        function refillEnergy() {
            window.open("https://adexora.my.id/dl/QFm5mnRYbJV", "_blank");
            adsWatched++; // Her enerji doldurmada reklam sayacƒ±nƒ± artƒ±r
            energy = 1000;
            save();
            if (window.showAdexora) window.showAdexora().catch(e => {});
        }

        function toggleWallet(show) {
            document.getElementById('wallet-panel').style.display = show ? 'flex' : 'none';
        }

        function requestWithdraw() {
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const address = document.getElementById('wallet-address').value;
            
            // ≈ûartlar
            const requiredAds = (amount / 0.50) * 750;

            if (amount < 0.50) {
                alert("Minimum √ßekim 0.50 USDT!");
            } else if (money < amount) {
                alert("Yetersiz bakiye!");
            } else if (adsWatched < requiredAds) {
                alert(`Yetersiz reklam! ${amount}$ √ßekmek i√ßin ${requiredAds} reklam izlemelisiniz. Mevcut: ${adsWatched}`);
            } else if (address.length < 10) {
                alert("Ge√ßerli bir c√ºzdan adresi girin!");
            } else {
                // Talebi Kaydet
                db.collection("withdrawals").add({
                    user: "user1",
                    amount: amount,
                    address: address,
                    status: "pending",
                    date: new Date()
                }).then(() => {
                    alert("√áekim talebi alƒ±ndƒ±! Onay bekleniyor.");
                    toggleWallet(false);
                });
            }
        }

        function save() {
            db.collection("players").doc("user1").set({
                money: money,
                adsWatched: adsWatched
            }, { merge: true });
        }
    </script>
</body>
</html>

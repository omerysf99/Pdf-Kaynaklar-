<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tether Max Elite - Smart Traffic Edition</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Orbitron:wght@600;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #00ffa3;
            --bg: #050505;
            --card: #121212;
            --gray: #888;
            --text: #fff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; justify-content: center; }
        .app { width: 100%; max-width: 440px; height: 100vh; background: radial-gradient(circle at top, #0d2b20, #050505); display: flex; flex-direction: column; position: relative; }

        header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); border-bottom: 1px solid #222; z-index: 10; }
        .logo { font-family: 'Orbitron'; font-size: 14px; color: var(--primary); display: flex; align-items: center; gap: 8px; }

        .scroller { flex: 1; overflow-y: auto; padding-bottom: 100px; }
        .scroller::-webkit-scrollbar { display: none; }

        /* Mining & Wallet */
        .hero { padding: 30px 20px; text-align: center; border-bottom: 1px solid #111; }
        .m-val { font-family: 'Orbitron'; font-size: 36px; font-weight: 900; margin-bottom: 15px; }
        .orb { width: 110px; height: 110px; margin: 0 auto 20px; border: 2px solid var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0,255,163,0.2); }
        .orb img { width: 55px; }
        
        .btn-main { width: 100%; background: #fff; color: #000; padding: 18px; border-radius: 15px; font-weight: 900; border: none; font-size: 16px; cursor: pointer; }

        /* Wallet Box */
        .section-tag { padding: 25px 20px 10px; font-size: 16px; font-weight: 800; display: flex; justify-content: space-between; }
        .wallet-card { background: #1a1a1a; margin: 0 15px 10px; padding: 18px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #222; }
        .w-info b { display: block; font-size: 18px; font-family: 'Orbitron'; }
        .w-info span { font-size: 11px; color: var(--gray); }
        .btn-draw { background: var(--primary); color: #000; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 800; font-size: 12px; }

        /* Tasks */
        .task-box { background: var(--card); margin: 0 15px 10px; padding: 15px; border-radius: 18px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #1a1a1a; }
        .task-box.done { opacity: 0.3; pointer-events: none; }
        .t-info b { display: block; font-size: 14px; }
        .t-info span { font-size: 12px; color: var(--primary); font-weight: 700; }

        /* Friends Area */
        .friends-view { padding: 15px; }
        .invite-banner { background: linear-gradient(90deg, #1d976c, #34e89e); padding: 25px; border-radius: 15px; color: #000; font-weight: 900; text-align: center; border: none; width: 100%; font-size: 18px; margin-bottom: 20px; }
        
        /* ÖNEMLİ: Bu panel başlangıçta gizli */
        #bonus-input-panel { display: none; background: var(--card); border: 2px dashed var(--primary); border-radius: 20px; padding: 20px; margin-bottom: 20px; text-align: center; }

        .social-row { display: flex; justify-content: center; gap: 12px; margin-bottom: 20px; }
        .soc-btn { width: 50px; height: 50px; border-radius: 12px; background: #1a1a1a; display: flex; align-items: center; justify-content: center; font-size: 22px; border: 1px solid #333; }

        /* Navigation */
        nav { position: absolute; bottom: 0; width: 100%; height: 85px; background: #000; border-top: 1px solid #222; display: flex; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--gray); font-size: 10px; font-weight: 700; gap: 5px; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 22px; }

        /* Ad Overlay */
        #ad-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .timer { width: 90px; height: 90px; border: 4px solid var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; font-family: 'Orbitron'; color: var(--primary); }

        .view { display: none; } .view.active { display: block; }
    </style>
</head>
<body>

<div class="app">
    <header>
        <div class="logo"><i class="fas fa-bolt"></i> TETHER MAX</div>
        <div style="font-size: 10px; color: var(--gray);">ID: 8392479231</div>
    </header>

    <div class="scroller">
        <div id="v-home" class="view active">
            <div class="hero">
                <div class="m-val" id="pool-ui">0.00000000</div>
                <div class="orb"><img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=025"></div>
                <button class="btn-main" onclick="collect()">BAKİYEYİ TOPLA</button>
            </div>

            <div class="section-tag">Cüzdan Bakiyesi <i class="fas fa-history"></i></div>
            <div class="wallet-card">
                <div style="display:flex; align-items:center; gap:12px;">
                    <img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=025" width="30">
                    <div class="w-info"><b id="bal-ui">0.000000</b><span>≈ $<span id="usd-ui">0.00</span></span></div>
                </div>
                <button class="btn-draw" onclick="alert('Min: 10 USDT')">Çek</button>
            </div>

            <div class="section-tag">Görevler</div>
            <div class="task-box" id="task-ad">
                <div style="display:flex; align-items:center; gap:12px;">
                    <i class="fas fa-video" style="color:red; font-size:20px;"></i>
                    <div class="t-info"><b>Reklam İzle</b><span id="ad-txt">+0.00035$ (20/20)</span></div>
                </div>
                <button class="btn-draw" onclick="watchAd()">İZLE</button>
            </div>
        </div>

        <div id="v-friends" class="view">
            <div class="friends-view">
                <div id="bonus-input-panel">
                    <b>DAVET KODU GİRİN</b>
                    <input type="number" id="ref-input" placeholder="Kod Buraya" style="width:100%; margin:15px 0; padding:12px; background:#000; border:1px solid #333; color:var(--primary); text-align:center; border-radius:10px; font-family:'Orbitron';">
                    <button class="btn-main" style="padding:10px; font-size:13px;" onclick="claimBonus()">BONUSU AL (0.50$)</button>
                </div>

                <button class="invite-banner" onclick="copyRef()">Arkadaşlarla paylaş <i class="fas fa-hand-pointer"></i></button>

                <div class="social-row">
                    <div class="soc-btn" style="color:#25D366"><i class="fab fa-whatsapp"></i></div>
                    <div class="soc-btn" style="color:#0084FF"><i class="fab fa-facebook-messenger"></i></div>
                    <div class="soc-btn" style="color:#00E676"><i class="fab fa-line"></i></div>
                    <div class="soc-btn" style="color:#fff"><i class="fab fa-x-twitter"></i></div>
                </div>

                <div class="wallet-card" style="flex-direction:column; gap:15px; text-align:center;">
                    <h4>Ortaklık Kazancı</h4>
                    <div style="font-size:32px; font-family:'Orbitron'; color:var(--primary);">$0</div>
                    <button class="btn-draw" style="padding:12px 40px; border-radius:20px;">Çekim Yap</button>
                </div>
            </div>
        </div>
    </div>

    <div id="ad-overlay">
        <p style="color:var(--gray); margin-bottom:20px;">REKLAM İZLENİYOR...</p>
        <div class="timer" id="ad-sec">15</div>
    </div>

    <nav>
        <div class="nav-item active" onclick="tab('v-home', this)"><i class="fas fa-home"></i><span>ANASAYFA</span></div>
        <div class="nav-item" onclick="tab('v-friends', this)"><i class="fas fa-users"></i><span>ARKADAŞLAR</span></div>
    </nav>
</div>

<script>
    const ADMIN_ID = "8392479231";
    let state = { bal: 0, pool: 0, ads: 20, isRefClaimed: false };

    function init() {
        // 1. Madencilik Başlat
        setInterval(() => {
            state.pool += (0.000115750 / 10);
            document.getElementById('pool-ui').innerText = state.pool.toFixed(8);
        }, 100);

        // 2. GOOGLE/TELEGRAM KONTROLÜ
        checkReferralStatus();
    }

    function checkReferralStatus() {
        // URL'de start parametresi varsa panel gösterilir
        const urlParams = new URLSearchParams(window.location.search);
        const hasStartParam = urlParams.has('start');
        
        // Eğer Telegram'dan bir referansla geldiyse paneli göster
        if(hasStartParam && !state.isRefClaimed) {
            document.getElementById('bonus-input-panel').style.display = 'block';
        } else {
            // Google'dan veya direkt girdiyse panel gizli kalır
            document.getElementById('bonus-input-panel').style.display = 'none';
        }
    }

    function collect() {
        if(state.pool <= 0) return;
        state.bal += state.pool;
        state.pool = 0;
        updateUI();
    }

    function watchAd() {
        if(state.ads <= 0) return;
        const ov = document.getElementById('ad-overlay');
        ov.style.display = 'flex';
        let s = 15;
        const t = setInterval(() => {
            s--; document.getElementById('ad-sec').innerText = s;
            if(s <= 0) {
                clearInterval(t); ov.style.display = 'none';
                state.bal += 0.00035; state.ads--; updateUI();
                document.getElementById('ad-sec').innerText = "15";
            }
        }, 1000);
    }

    function claimBonus() {
        const val = document.getElementById('ref-input').value;
        if(val && val !== ADMIN_ID) {
            state.bal += 0.50;
            state.isRefClaimed = true;
            document.getElementById('bonus-input-panel').style.display = 'none';
            updateUI();
            alert("0.50$ Bonus Eklendi!");
        }
    }

    function updateUI() {
        document.getElementById('bal-ui').innerText = state.bal.toFixed(6);
        document.getElementById('usd-ui').innerText = state.bal.toFixed(2);
        document.getElementById('ad-txt').innerText = "+0.00035$ ("+state.ads+"/20)";
        if(state.ads <= 0) document.getElementById('task-ad').classList.add('done');
    }

    function tab(id, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
    }

    function copyRef() {
        navigator.clipboard.writeText("https://t.me/TetherEliteBot?start=" + ADMIN_ID);
        alert("Referans linki kopyalandı!");
    }

    window.onload = init;
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Roblox Tarzı Oyun</title>
<style>
body { margin:0; overflow:hidden; background:#87ceeb; }
#ui {
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  font-family:Arial;
  background:rgba(0,0,0,0.55);
  padding:10px;
  border-radius:8px;
}
#crosshair {
  position:fixed;
  top:50%;
  left:50%;
  width:10px;
  height:10px;
  margin:-5px;
  border:2px solid white;
  border-radius:50%;
}
</style>
</head>
<body>

<div id="ui">
<b>Roblox Demo</b><br>
WASD / Oklar: Yürü<br>
Space: Zıpla<br>
Mouse: Kamera
</div>
<div id="crosshair"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
/* SAHNE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* IŞIK */
scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));
const sun = new THREE.DirectionalLight(0xffffff,0.8);
sun.position.set(5,10,5);
scene.add(sun);

/* ZEMİN */
function platform(x,y,z,w,h,d,color=0x55aa55){
  const p = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color})
  );
  p.position.set(x,y,z);
  scene.add(p);
  return p;
}

platform(0,-0.5,0,100,1,100);
platform(5,1,0,4,1,4);
platform(-5,2,-3,4,1,4);
platform(0,3,6,4,1,4);

/* KARAKTER */
const player = new THREE.Group();
scene.add(player);

function part(w,h,d,color,x,y,z){
  const m = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color})
  );
  m.position.set(x,y,z);
  player.add(m);
}

/* Gövde */
part(1,1.5,0.6,0x0055ff,0,1.75,0);
/* Kafa */
part(0.8,0.8,0.8,0xffcc99,0,2.9,0);
/* Kollar */
part(0.3,1.2,0.3,0x0055ff,-0.65,1.75,0);
part(0.3,1.2,0.3,0x0055ff,0.65,1.75,0);
/* Bacaklar */
part(0.4,1.2,0.4,0x0033aa,-0.25,0.6,0);
part(0.4,1.2,0.4,0x0033aa,0.25,0.6,0);

player.position.y = 0;

/* HAREKET */
let keys = {};
let velY = 0;
let canJump = false;
const speed = 0.15;
const gravity = 0.02;

document.addEventListener("keydown", e => keys[e.code]=true);
document.addEventListener("keyup", e => keys[e.code]=false);

/* MOUSE KAMERA */
let yaw=0, pitch=0;
document.body.addEventListener("mousemove", e=>{
  if(document.pointerLockElement){
    yaw -= e.movementX * 0.002;
    pitch -= e.movementY * 0.002;
    pitch = Math.max(-1.2,Math.min(1.2,pitch));
  }
});
document.body.addEventListener("click",()=>document.body.requestPointerLock());

/* DÖNGÜ */
function animate(){
  requestAnimationFrame(animate);

  let dx=0, dz=0;
  if(keys["KeyW"]||keys["ArrowUp"]) dz-=speed;
  if(keys["KeyS"]||keys["ArrowDown"]) dz+=speed;
  if(keys["KeyA"]||keys["ArrowLeft"]) dx-=speed;
  if(keys["KeyD"]||keys["ArrowRight"]) dx+=speed;

  const sin = Math.sin(yaw), cos = Math.cos(yaw);
  player.position.x += dx*cos - dz*sin;
  player.position.z += dz*cos + dx*sin;

  velY -= gravity;
  player.position.y += velY;

  if(player.position.y <= 0){
    player.position.y = 0;
    velY = 0;
    canJump = true;
  }

  if(keys["Space"] && canJump){
    velY = 0.35;
    canJump = false;
  }

  camera.position.set(
    player.position.x + Math.sin(yaw)*5,
    player.position.y + 3,
    player.position.z + Math.cos(yaw)*5
  );
  camera.lookAt(player.position.x, player.position.y+1.5, player.position.z);

  renderer.render(scene,camera);
}
animate();

addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NexTube - HÄ±zlÄ± Video Platformu</title>
    <style>
        :root {
            --nt-bg: #0f0f0f;
            --nt-surface: #1e1e1e;
            --nt-red: #ff0000;
            --nt-text: #ffffff;
            --nt-dim: #aaaaaa;
            --nt-border: #333333;
            --nt-accent: #3ea6ff;
            --nt-radius: 12px;
            --nt-font: 'Inter', system-ui, -apple-system, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: var(--nt-bg); 
            color: var(--nt-text); 
            font-family: var(--nt-font);
            overflow: hidden;
        }

        /* --- AUTH LAYER (LOCAL ONLY) --- */
        #authLayer {
            position: fixed; inset: 0; z-index: 9999;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(20px);
            display: flex; align-items: center; justify-content: center;
        }
        .auth-card {
            background: var(--nt-surface); padding: 40px; border-radius: 24px;
            width: 100%; max-width: 400px; border: 1px solid var(--nt-border);
            text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .auth-logo { font-size: 28px; font-weight: 900; margin-bottom: 30px; letter-spacing: -1px; }
        .auth-logo span { color: var(--nt-red); }
        .input-group { text-align: left; margin-bottom: 20px; }
        .input-group label { display: block; font-size: 12px; color: var(--nt-dim); margin-bottom: 8px; font-weight: 600; text-transform: uppercase; }
        .nt-input {
            width: 100%; background: #000; border: 1px solid var(--nt-border);
            padding: 14px; border-radius: 8px; color: white; font-size: 15px;
            transition: 0.2s;
        }
        .nt-input:focus { border-color: var(--nt-accent); outline: none; }
        .nt-btn-primary {
            width: 100%; background: white; color: black; border: none; padding: 15px;
            border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 16px;
        }

        /* --- LAYOUT --- */
        header {
            height: 56px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between;
            position: fixed; top: 0; width: 100%; background: var(--nt-bg); z-index: 100;
        }
        .main-wrapper { display: flex; height: 100vh; pt: 56px; margin-top: 56px; }
        aside { width: 240px; padding: 15px; border-right: 1px solid var(--nt-border); }
        main { flex: 1; overflow-y: auto; padding: 24px; }

        /* --- UPLOAD PANEL (SIMPLIFIED) --- */
        #uploadModal {
            position: fixed; inset: 0; z-index: 2000; background: rgba(0,0,0,0.8);
            display: none; align-items: center; justify-content: center;
        }
        .upload-panel {
            background: var(--nt-surface); width: 90%; max-width: 850px;
            border-radius: 16px; overflow: hidden; display: flex; flex-direction: column;
            max-height: 90vh; border: 1px solid var(--nt-border);
        }
        .up-header { padding: 16px 24px; border-bottom: 1px solid var(--nt-border); display: flex; justify-content: space-between; align-items: center; }
        .up-body { padding: 32px; overflow-y: auto; }
        .up-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 32px; }
        
        .drop-zone {
            border: 2px dashed var(--nt-border); border-radius: 12px; padding: 40px;
            text-align: center; cursor: pointer; transition: 0.3s; background: #151515;
        }
        .drop-zone:hover { border-color: var(--nt-accent); background: #1a1a1a; }
        
        .preview-box { background: #000; border-radius: 8px; aspect-ratio: 16/9; overflow: hidden; position: relative; }
        #videoPre { width: 100%; height: 100%; object-fit: cover; }
        
        .type-badge {
            display: inline-block; padding: 4px 12px; border-radius: 4px; font-size: 11px;
            font-weight: 800; text-transform: uppercase; margin-top: 10px;
        }
        .badge-shorts { background: #ff4e4e; color: white; }
        .badge-long { background: var(--nt-accent); color: white; }

        /* --- VIDEO CARDS --- */
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .v-card { cursor: pointer; }
        .v-thumb { aspect-ratio: 16/9; background: #222; border-radius: 12px; overflow: hidden; margin-bottom: 12px; position: relative; }
        .v-thumb img { width: 100%; height: 100%; object-fit: cover; }
        .v-meta { display: flex; gap: 12px; }
        .v-avatar { width: 36px; height: 36px; background: var(--nt-border); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; }
        .v-title { font-size: 15px; font-weight: 700; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .v-stats { color: var(--nt-dim); font-size: 13px; }

        /* --- PROGRESS BAR --- */
        .progress-cont { height: 6px; background: #333; border-radius: 3px; margin: 20px 0; overflow: hidden; display: none; }
        .progress-bar { height: 100%; width: 0%; background: var(--nt-accent); transition: 0.2s linear; }

        .hidden { display: none !important; }
        .locked { pointer-events: none; opacity: 0.6; }
    </style>
</head>
<body>

    <div id="authLayer">
        <div class="auth-card">
            <div class="auth-logo">Nex<span>Tube</span></div>
            <p style="color:var(--nt-dim); margin-bottom: 30px; font-size: 14px;">KanalÄ±nÄ±zÄ± yÃ¶netmek iÃ§in giriÅŸ yapÄ±n.</p>
            <div class="input-group">
                <label>KullanÄ±cÄ± AdÄ±</label>
                <input type="text" id="loginName" class="nt-input" placeholder="Ã–rn: YaratÄ±cÄ±Medya">
            </div>
            <div class="input-group">
                <label>E-Posta Adresi</label>
                <input type="email" id="loginEmail" class="nt-input" placeholder="isminiz@domain.com">
            </div>
            <button class="nt-btn-primary" onclick="Core.doLogin()">GÄ°RÄ°Åž YAP</button>
            <p style="margin-top: 20px; font-size: 10px; color: #444;">ID: 8392479231 â€¢ Verileriniz LocalStorage Ã¼zerinde saklanÄ±r.</p>
        </div>
    </div>

    <header>
        <div class="auth-logo" style="margin:0; font-size: 20px; cursor:pointer;" onclick="location.reload()">Nex<span>Tube</span></div>
        <div style="display:flex; gap:12px;">
            <button class="nt-btn-primary" style="padding:8px 16px; width:auto; font-size:13px;" onclick="Upload.open()">VÄ°DEO YÃœKLE</button>
            <div class="v-avatar" id="userInitial">U</div>
        </div>
    </header>

    <div class="main-wrapper">
        <aside>
            <div style="padding: 10px; color: var(--nt-accent); font-weight: 800; border-radius: 8px; background: rgba(62,166,255,0.1); margin-bottom: 20px;">Ana Sayfa</div>
            <div style="padding: 10px; color: var(--nt-dim);">Shorts</div>
            <div style="padding: 10px; color: var(--nt-dim);">KitaplÄ±k</div>
        </aside>
        <main>
            <h2 style="margin-bottom: 24px;">Ã–nerilen Videolar</h2>
            <div class="video-grid" id="mainFeed">
                </div>
        </main>
    </div>

    <div id="uploadModal">
        <div class="upload-panel">
            <div class="up-header">
                <h3 id="upTitleText">Video YÃ¼kle</h3>
                <button onclick="Upload.close()" style="background:none; border:none; color:white; font-size:24px; cursor:pointer;">&times;</button>
            </div>
            <div class="up-body" id="upFormBody">
                <div class="up-grid">
                    <div id="formSection">
                        <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileIn').click()">
                            <div style="font-size: 40px; margin-bottom: 10px;">ðŸ“¤</div>
                            <p>Videonuzu sÃ¼rÃ¼kleyin veya <b>dosya seÃ§in</b></p>
                            <input type="file" id="fileIn" accept="video/*" hidden onchange="Upload.handleFile(this)">
                        </div>

                        <div id="metaFields" class="hidden" style="margin-top: 24px;">
                            <div class="input-group">
                                <label>Video BaÅŸlÄ±ÄŸÄ± (Zorunlu)</label>
                                <input type="text" id="vidTitle" class="nt-input" maxlength="100" oninput="Upload.updateCount(this)">
                                <div style="text-align:right; font-size:11px; color:var(--nt-dim); margin-top:4px;"><span id="charCount">0</span>/100</div>
                            </div>
                            <div class="input-group">
                                <label>AÃ§Ä±klama</label>
                                <textarea id="vidDesc" class="nt-input" rows="4" style="resize:none;" placeholder="Ä°zleyicilere videonuzdan bahsedin"></textarea>
                            </div>
                            <div class="input-group">
                                <label>KÃ¼Ã§Ã¼k Resim (Thumbnail)</label>
                                <input type="file" id="thumbIn" accept="image/*" class="nt-input" onchange="Upload.handleThumb(this)">
                            </div>
                        </div>
                    </div>

                    <div id="previewSection" class="locked">
                        <div class="preview-box">
                            <video id="videoPre" muted></video>
                        </div>
                        <div id="typeInformer" class="hidden">
                            <div id="badgeTag" class="type-badge">Tespit Ediliyor...</div>
                            <p id="durationText" style="font-size: 12px; color: var(--nt-dim); mt: 5px;"></p>
                        </div>
                        <div class="progress-cont" id="progCont">
                            <div class="progress-bar" id="progBar"></div>
                        </div>
                        <div id="upStatus" style="font-size: 13px; color: var(--nt-accent); margin-top: 8px;"></div>
                    </div>
                </div>
            </div>
            <div class="up-header" style="justify-content: flex-end; border-top: 1px solid var(--nt-border); border-bottom: none;">
                <button class="nt-btn-primary" id="publishBtn" style="width: auto; padding: 10px 40px;" onclick="Upload.start()">YAYINLA</button>
            </div>
        </div>
    </div>

    <script>
        /**
         * NEXTUBE CORE LOGIC V5
         * No Google APIs. No Steppers. No Stress.
         */

        const Core = {
            user: null,
            vids: [],

            init() {
                const savedUser = localStorage.getItem('nt_user_8392479231');
                if(savedUser) {
                    this.user = JSON.parse(savedUser);
                    document.getElementById('authLayer').style.display = 'none';
                    document.getElementById('userInitial').innerText = this.user.name[0].toUpperCase();
                }

                const savedVids = localStorage.getItem('nt_vids_8392479231');
                if(savedVids) this.vids = JSON.parse(savedVids);
                this.renderFeed();
            },

            doLogin() {
                const name = document.getElementById('loginName').value.trim();
                const email = document.getElementById('loginEmail').value.trim();
                if(name && email.includes('@')) {
                    this.user = { name, email, id: Date.now() };
                    localStorage.setItem('nt_user_8392479231', JSON.stringify(this.user));
                    location.reload();
                } else {
                    alert("LÃ¼tfen geÃ§erli bilgiler girin.");
                }
            },

            renderFeed() {
                const feed = document.getElementById('mainFeed');
                if(this.vids.length === 0) {
                    feed.innerHTML = '<div style="grid-column:1/-1; color:#444; text-align:center; padding:50px;">HenÃ¼z video yok. Ä°lk videoyu yÃ¼kleyen siz olun!</div>';
                    return;
                }
                feed.innerHTML = this.vids.map(v => `
                    <div class="v-card">
                        <div class="v-thumb">
                            <img src="${v.thumb}">
                            ${v.isShort ? '<div style="position:absolute; bottom:8px; left:8px; background:red; font-size:10px; padding:2px 5px; border-radius:3px;">SHORTS</div>' : ''}
                        </div>
                        <div class="v-meta">
                            <div class="v-avatar">${v.author[0]}</div>
                            <div>
                                <div class="v-title">${v.title}</div>
                                <div class="v-stats">${v.author} â€¢ ${v.views} izlenme</div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        };

        const Upload = {
            currentFile: null,
            currentThumb: 'https://via.placeholder.com/640x360/111111/FFFFFF?text=NexTube+Video',
            isUploading: false,
            videoType: 'long',

            open() { 
                if(this.isUploading) return;
                document.getElementById('uploadModal').style.display = 'flex'; 
            },
            close() { 
                if(this.isUploading) return;
                document.getElementById('uploadModal').style.display = 'none'; 
            },

            updateCount(el) {
                document.getElementById('charCount').innerText = el.value.length;
            },

            handleFile(input) {
                const file = input.files[0];
                if(!file) return;
                this.currentFile = file;

                const video = document.getElementById('videoPre');
                video.src = URL.createObjectURL(file);
                
                document.getElementById('metaFields').classList.remove('hidden');
                document.getElementById('previewSection').classList.remove('locked');
                document.getElementById('typeInformer').classList.remove('hidden');
                document.getElementById('vidTitle').value = file.name.split('.')[0];
                this.updateCount(document.getElementById('vidTitle'));

                video.onloadedmetadata = () => {
                    const dur = Math.round(video.duration);
                    document.getElementById('durationText').innerText = `SÃ¼re: ${dur} saniye`;
                    
                    const badge = document.getElementById('badgeTag');
                    if(dur <= 60) {
                        this.videoType = 'short';
                        badge.innerText = "SHORTS OLARAK YAYINLANACAK";
                        badge.className = "type-badge badge-shorts";
                    } else {
                        this.videoType = 'long';
                        badge.innerText = "UZUN VÄ°DEO OLARAK YAYINLANACAK";
                        badge.className = "type-badge badge-long";
                    }
                };
            },

            handleThumb(input) {
                const file = input.files[0];
                if(file) {
                    const reader = new FileReader();
                    reader.onload = (e) => this.currentThumb = e.target.result;
                    reader.readAsDataURL(file);
                }
            },

            start() {
                const title = document.getElementById('vidTitle').value.trim();
                if(!this.currentFile || !title) {
                    alert("LÃ¼tfen bir video seÃ§in ve baÅŸlÄ±k girin.");
                    return;
                }

                this.isUploading = true;
                document.getElementById('upFormBody').classList.add('locked');
                document.getElementById('publishBtn').classList.add('locked');
                document.getElementById('progCont').style.display = 'block';
                
                let p = 0;
                const bar = document.getElementById('progBar');
                const stat = document.getElementById('upStatus');

                const interval = setInterval(() => {
                    p += Math.random() * 15;
                    if(p >= 100) {
                        p = 100;
                        clearInterval(interval);
                        this.finish(title);
                    }
                    bar.style.width = p + '%';
                    stat.innerText = `YÃ¼kleniyor... %${Math.round(p)}`;
                }, 400);
            },

            finish(title) {
                const newVid = {
                    id: Date.now(),
                    title: title,
                    desc: document.getElementById('vidDesc').value,
                    thumb: this.currentThumb,
                    author: Core.user.name,
                    views: 0,
                    isShort: this.videoType === 'short',
                    date: new Date().toISOString()
                };

                Core.vids.unshift(newVid);
                localStorage.setItem('nt_vids_8392479231', JSON.stringify(Core.vids));
                
                alert("Video baÅŸarÄ±yla yÃ¼klendi!");
                location.reload();
            }
        };

        // BaÅŸlat
        Core.init();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Roblox Tarzı Oyun</title>
<style>
body { margin:0; overflow:hidden; background:#87ceeb; }
#ui{
  position:fixed;
  top:10px; left:10px;
  color:white;
  font-family:Arial;
  background:rgba(0,0,0,.6);
  padding:10px;
  border-radius:8px;
}
#cross{
  position:fixed;
  top:50%; left:50%;
  width:8px; height:8px;
  margin:-4px;
  border:2px solid white;
  border-radius:50%;
}
</style>
</head>
<body>

<div id="ui">
<b>Roblox Clone</b><br>
WASD: Yürü<br>
Space: Zıpla<br>
Mouse: Kamera
</div>
<div id="cross"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
/* SAHNE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

/* IŞIK */
scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));
const sun = new THREE.DirectionalLight(0xffffff,0.8);
sun.position.set(10,20,10);
scene.add(sun);

/* MAP */
function block(x,y,z,w,h,d,c=0x55aa55){
  const m = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color:c})
  );
  m.position.set(x,y,z);
  scene.add(m);
}

/* Ana zemin */
block(0,-1,0,200,2,200);

/* Parkur */
block(5,1,5,6,1,6,0x888888);
block(12,3,5,6,1,6,0x888888);
block(19,5,5,6,1,6,0x888888);
block(19,5,12,6,1,6,0x888888);
block(19,7,19,6,1,6,0x888888);

/* Duvarlar */
block(-20,3,0,2,6,40,0x444444);
block(20,3,0,2,6,40,0x444444);

/* KARAKTER (ROBLOX R6 TARZI) */
const player = new THREE.Group();
scene.add(player);

function part(w,h,d,c,x,y,z){
  const p = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color:c})
  );
  p.position.set(x,y,z);
  return p;
}

/* Gövde */
const torso = part(1.6,2.2,0.8,0x0055ff,0,2.1,0);
player.add(torso);

/* Kafa */
const head = part(1.2,1.2,1.2,0xffcc99,0,3.6,0);
player.add(head);

/* Kollar */
const leftArm = part(0.6,2,0.6,0x0055ff,-1.2,2.1,0);
const rightArm = part(0.6,2,0.6,0x0055ff,1.2,2.1,0);
player.add(leftArm);
player.add(rightArm);

/* Bacaklar */
const leftLeg = part(0.7,2,0.7,0x0033aa,-0.4,0.9,0);
const rightLeg = part(0.7,2,0.7,0x0033aa,0.4,0.9,0);
player.add(leftLeg);
player.add(rightLeg);

player.position.y = 0;

/* HAREKET */
let keys={},velY=0,canJump=false;
let yaw=0,pitch=0;
let walkTime=0;

document.addEventListener("keydown",e=>keys[e.code]=true);
document.addEventListener("keyup",e=>keys[e.code]=false);

document.body.addEventListener("click",()=>document.body.requestPointerLock());
document.addEventListener("mousemove",e=>{
  if(document.pointerLockElement){
    yaw -= e.movementX*0.002;
    pitch -= e.movementY*0.002;
    pitch=Math.max(-1.2,Math.min(1.2,pitch));
  }
});

/* DÖNGÜ */
function animate(){
  requestAnimationFrame(animate);

  let moving=false;
  let speed=0.18;
  let dx=0,dz=0;

  if(keys["KeyW"]) dz-=speed,moving=true;
  if(keys["KeyS"]) dz+=speed,moving=true;
  if(keys["KeyA"]) dx-=speed,moving=true;
  if(keys["KeyD"]) dx+=speed,moving=true;

  const sin=Math.sin(yaw),cos=Math.cos(yaw);
  player.position.x+=dx*cos-dz*sin;
  player.position.z+=dz*cos+dx*sin;

  /* Yerçekimi */
  velY-=0.02;
  player.position.y+=velY;
  if(player.position.y<=0){
    player.position.y=0;
    velY=0;
    canJump=true;
  }
  if(keys["Space"]&&canJump){
    velY=0.38;
    canJump=false;
  }

  /* Yürüme animasyonu */
  if(moving){
    walkTime+=0.15;
    leftArm.rotation.x=Math.sin(walkTime)*0.6;
    rightArm.rotation.x=-Math.sin(walkTime)*0.6;
    leftLeg.rotation.x=-Math.sin(walkTime)*0.6;
    rightLeg.rotation.x=Math.sin(walkTime)*0.6;
  }else{
    leftArm.rotation.x=rightArm.rotation.x=0;
    leftLeg.rotation.x=rightLeg.rotation.x=0;
  }

  /* Kamera */
  camera.position.set(
    player.position.x+Math.sin(yaw)*6,
    player.position.y+4,
    player.position.z+Math.cos(yaw)*6
  );
  camera.lookAt(player.position.x,player.position.y+2,player.position.z);

  renderer.render(scene,camera);
}
animate();

addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>

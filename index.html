<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blum Clone - Admin: 8392479231</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #000000;
            --primary-color: #cfff00; /* Blum Yeşili */
            --text-color: #ffffff;
            --card-bg: #1a1a1a;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        #app {
            width: 100%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
        }

        .balance-section {
            text-align: center;
            margin-top: 40px;
        }

        .balance-label {
            font-size: 14px;
            color: #888;
        }

        .balance-value {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }

        .farming-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-top: auto;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid #333;
        }

        .btn-farm {
            background-color: var(--primary-color);
            color: black;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.1s;
        }

        .btn-farm:active {
            transform: scale(0.98);
        }

        .status-text {
            margin-top: 15px;
            font-size: 14px;
            color: var(--primary-color);
        }

        /* Kar Tanesi Efekti (Blum'daki gibi) */
        .particle {
            position: absolute;
            background: var(--primary-color);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.6;
        }
    </style>
</head>
<body>

<div id="app">
    <div class="balance-section">
        <div class="balance-label">TOPLAM PUAN</div>
        <div class="balance-value" id="balance">0.000</div>
    </div>

    <div class="farming-card">
        <div id="farming-status">Farming başlatılmadı</div>
        <div id="timer" style="font-size: 24px; margin: 15px 0;">08:00:00</div>
        <button class="btn-farm" id="farmBtn" onclick="startFarming()">FARMING BAŞLAT</button>
    </div>
</div>

<script>
    // Telegram WebApp Başlatma
    const tg = window.Telegram.WebApp;
    tg.expand(); // Ekranı tam boy yap

    let balance = parseFloat(localStorage.getItem('blum_balance')) || 0;
    let isFarming = localStorage.getItem('isFarming') === 'true';
    let endTime = localStorage.getItem('endTime') || 0;

    const balanceEl = document.getElementById('balance');
    const farmBtn = document.getElementById('farmBtn');
    const timerEl = document.getElementById('timer');
    const statusEl = document.getElementById('farming-status');

    function updateDisplay() {
        balanceEl.innerText = balance.toFixed(3);
    }

    function startFarming() {
        if (!isFarming) {
            isFarming = true;
            const duration = 8 * 60 * 60 * 1000; // 8 Saat
            endTime = Date.now() + duration;
            
            localStorage.setItem('isFarming', 'true');
            localStorage.setItem('endTime', endTime);
            
            runFarmingCycle();
        } else if (Date.now() >= endTime) {
            // Claim işlemi
            balance += 50.000; // Ödül
            isFarming = false;
            localStorage.setItem('isFarming', 'false');
            localStorage.setItem('blum_balance', balance);
            updateDisplay();
            farmBtn.innerText = "FARMING BAŞLAT";
            statusEl.innerText = "Ödül toplandı!";
        }
    }

    function runFarmingCycle() {
        const interval = setInterval(() => {
            const now = Date.now();
            const remaining = endTime - now;

            if (remaining <= 0) {
                clearInterval(interval);
                timerEl.innerText = "00:00:00";
                farmBtn.innerText = "PUANLARI TOPLA";
                statusEl.innerText = "Farming bitti!";
            } else {
                const hours = Math.floor(remaining / 3600000);
                const mins = Math.floor((remaining % 3600000) / 60000);
                const secs = Math.floor((remaining % 60000) / 1000);
                
                timerEl.innerText = `${hours.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
                farmBtn.innerText = "FARMING YAPILIYOR...";
                statusEl.innerText = "Puanlar kazanılıyor...";
                
                // Küçük bir görsel artış simülasyonu
                balance += 0.001;
                updateDisplay();
            }
        }, 1000);
    }

    // Uygulama açıldığında durumu kontrol et
    if (isFarming) runFarmingCycle();
    updateDisplay();

</script>

</body>
</html>

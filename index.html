<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana AI Chat | Admin 8392479231</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #050505; color: #fff; font-family: 'Inter', sans-serif; }
        .chat-container { height: calc(100vh - 200px); }
        .message-ai { background: #111; border: 1px solid #222; border-radius: 20px 20px 20px 5px; }
        .message-user { background: #2563eb; border-radius: 20px 20px 5px 20px; }
        .custom-input { background: #0a0a0a; border: 1px solid #222; border-radius: 15px; outline: none; transition: 0.3s; }
        .custom-input:focus { border-color: #3b82f6; }
        .shimmer { animation: shimmer 2s infinite linear; background: linear-gradient(90deg, #111 0%, #222 50%, #111 100%); background-size: 200% 100%; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col items-center p-4 md:p-8">

    <div class="max-w-4xl w-full flex flex-col space-y-4">
        <header class="flex justify-between items-center border-b border-zinc-900 pb-4">
            <div>
                <h1 class="text-2xl font-black italic tracking-tighter">NANO <span class="text-blue-500">CHAT</span></h1>
                <p class="text-[10px] text-zinc-600 font-mono">GPT-5 NANO ENGINE | ID: 8392479231</p>
            </div>
            <button onclick="clearChat()" class="text-[10px] text-zinc-500 hover:text-red-500 transition-colors uppercase font-bold tracking-widest">Sohbeti Temizle</button>
        </header>

        <div id="chatWindow" class="chat-container overflow-y-auto space-y-4 p-4 flex flex-col custom-scrollbar">
            <div class="message-ai p-4 max-w-[80%] self-start text-sm leading-relaxed">
                Merhaba Admin **8392479231**. Ben Nano Banana Sohbet Botu. Bugün sana nasıl yardımcı olabilirim?
            </div>
        </div>

        <div class="relative mt-auto">
            <div id="typingIndicator" class="hidden absolute -top-8 left-2 text-[10px] text-zinc-500 italic animate-pulse">Bot yanıt yazıyor...</div>
            <div class="flex gap-2 bg-zinc-950 p-2 rounded-2xl border border-zinc-900">
                <input type="text" id="userInput" onkeypress="handleKey(event)"
                    placeholder="Mesajınızı buraya yazın..." 
                    class="flex-1 p-4 custom-input text-sm">
                <button onclick="sendMessage()" id="sendBtn" 
                    class="bg-blue-600 hover:bg-blue-500 text-white px-6 rounded-xl font-bold transition-all active:scale-95">
                    GÖNDER
                </button>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = "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";
        let conversationHistory = [
            { role: "system", content: "Sen yardımsever, profesyonel ve zeki bir asistansın. Kullanıcı (Admin 8392479231) ile konuşuyorsun." }
        ];

        function handleKey(e) { if (e.key === 'Enter') sendMessage(); }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const chatWindow = document.getElementById('chatWindow');
            const sendBtn = document.getElementById('sendBtn');
            const typing = document.getElementById('typingIndicator');
            const text = input.value.trim();

            if (!text) return;

            // Kullanıcı Mesajını Ekle
            appendMessage('user', text);
            input.value = '';
            conversationHistory.push({ role: "user", content: text });

            // UI Ayarları
            sendBtn.disabled = true;
            typing.classList.remove('hidden');

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "gpt-4-turbo", // GPT-5 Nano henüz genel API'ye tam açılmamışsa en stabil sürüm budur
                        messages: conversationHistory,
                        temperature: 0.7
                    })
                });

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;

                // AI Mesajını Ekle
                appendMessage('ai', aiResponse);
                conversationHistory.push({ role: "assistant", content: aiResponse });

            } catch (err) {
                appendMessage('ai', "Hata: Mesaj iletilemedi. Lütfen API bağlantınızı kontrol edin.");
            } finally {
                sendBtn.disabled = false;
                typing.classList.add('hidden');
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
        }

        function appendMessage(role, text) {
            const chatWindow = document.getElementById('chatWindow');
            const div = document.createElement('div');
            div.className = `p-4 max-w-[85%] text-sm leading-relaxed ${role === 'user' ? 'message-user self-end' : 'message-ai self-start'}`;
            
            // Markdown benzeri basit formatlama (yıldızlar için)
            div.innerHTML = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
            
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function clearChat() {
            document.getElementById('chatWindow').innerHTML = '';
            conversationHistory = [conversationHistory[0]];
            appendMessage('ai', "Sohbet geçmişi temizlendi, Admin.");
        }
    </script>
</body>
</html>

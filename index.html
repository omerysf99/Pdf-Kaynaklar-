<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flappy Wallet Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        
        body { 
            background-color: #4eb5d3; 
            font-family: 'Fredoka', sans-serif; 
            margin: 0; overflow: hidden; user-select: none;
        }

        .page { display: none; height: calc(100vh - 70px); position: relative; }
        .page.active { display: block; }

        /* Geli≈ümi≈ü Oyun Ekranƒ± */
        #game-container {
            display: none;
            position: absolute;
            inset: 0;
            z-index: 200;
            background: #70c5ce;
        }

        #ui-layer {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            font-size: 40px;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 0 #000;
            z-index: 210;
        }

        /* Modern Custom Alert Animasyonu */
        .custom-alert {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            z-index: 300;
            text-align: center;
            width: 80%;
            display: none;
        }

        .ground-anim {
            height: 25px;
            background: repeating-linear-gradient(45deg, #8bc34a, #8bc34a 15px, #aed581 15px, #aed581 30px);
            position: absolute;
            bottom: 70px;
            width: 200%;
            animation: moveGround 1.5s linear infinite;
        }

        @keyframes moveGround { from { transform: translateX(0); } to { transform: translateX(-50%); } }

        .bird-float { animation: floating 2s ease-in-out infinite; }
        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
    </style>
</head>
<body>

<div id="alert-box" class="custom-alert animate__animated">
    <h2 id="alert-title" class="text-2xl font-bold mb-2"></h2>
    <p id="alert-msg" class="text-gray-600 mb-4"></p>
    <button onclick="closeAlert()" class="bg-blue-500 text-white px-6 py-2 rounded-full font-bold shadow-lg">TAMAM</button>
</div>

<div class="max-w-md mx-auto h-screen flex flex-col relative bg-[#4eb5d3] shadow-2xl">
    
    <div id="game-container">
        <div id="ui-layer">0</div>
        <canvas id="game-canvas"></canvas>
    </div>

    <div id="flappy-page" class="page active">
        <div class="p-4 grid grid-cols-2 gap-3 animate__animated animate__fadeInDown">
            <div class="bg-white rounded-2xl p-3 shadow-lg border-b-4 border-blue-200">
                <div class="text-[11px] text-gray-400 font-bold uppercase">‚ù§Ô∏è Deneme Hakkƒ±</div>
                <div class="flex items-center justify-between">
                    <span id="heart-count" class="text-2xl font-black text-blue-600">10</span>
                    <button class="bg-blue-500 text-white text-[10px] px-3 py-1 rounded-full font-bold hover:bg-blue-600 active:scale-95 transition">ARTIR</button>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-3 shadow-lg border-b-4 border-blue-200 text-[10px] font-bold">
                <div class="flex justify-between border-b pb-1"><span>üèÜ G√úNL√úK</span> <span id="daily-score-ui" class="text-blue-500">0.00</span></div>
                <div class="flex justify-between py-1 border-b"><span>üèÜ REKOR</span> <span id="best-score-ui" class="text-blue-500">0.00</span></div>
                <div class="flex justify-between pt-1"><span>üöÄ √áARPAN</span> <span class="text-green-500 font-black">x1.00</span></div>
            </div>
        </div>

        <div class="flex-grow flex flex-col items-center justify-center gap-8">
            <div class="bird-float">
                <div class="w-14 h-10 bg-[#9c5c3c] border-4 border-black rounded-lg shadow-xl flex items-center justify-center text-white font-bold text-xs">CW</div>
            </div>
            
            <button id="play-btn" class="group relative bg-white p-8 rounded-full shadow-2xl hover:scale-110 transition-transform active:scale-90">
                <div class="w-0 h-0 border-t-[20px] border-t-transparent border-l-[35px] border-l-green-500 border-b-[20px] border-b-transparent ml-2"></div>
            </button>
        </div>
    </div>

    <div id="wallet-page" class="page p-6 text-white">
        <h1 class="text-3xl font-black mb-6">C√ºzdanƒ±m</h1>
        <div class="bg-blue-800/50 p-6 rounded-3xl backdrop-blur-md border border-white/20">
            <p class="opacity-70">Toplam Bakiye</p>
            <h2 class="text-4xl font-bold">0.00 CW</h2>
        </div>
    </div>

    <div class="ground-anim"></div>

    <div class="h-[70px] bg-white border-t flex justify-around items-center z-[100]">
        <button onclick="showPage('flappy')" class="tab-btn active text-blue-500"><span class="text-2xl block">üéÆ</span><small class="font-bold">Oyna</small></button>
        <button onclick="showAlert('Sƒ±ralama', '√áok yakƒ±nda aktif olacak!')" class="tab-btn text-gray-400"><span class="text-2xl block">‚≠ê</span><small class="font-bold">Sƒ±ralama</small></button>
        <button onclick="showPage('wallet')" class="tab-btn text-gray-400"><span class="text-2xl block">üí∞</span><small class="font-bold">C√ºzdan</small></button>
    </div>
</div>

<script>
    let hearts = 10;
    let dailyScore = 0;
    let bestScore = 0;
    let currentScore = 0;

    // --- √ñZEL UYARI Sƒ∞STEMƒ∞ ---
    function showAlert(title, msg) {
        const box = document.getElementById('alert-box');
        document.getElementById('alert-title').innerText = title;
        document.getElementById('alert-msg').innerText = msg;
        box.style.display = 'block';
        box.classList.remove('animate__fadeOut');
        box.classList.add('animate__bounceIn');
    }

    function closeAlert() {
        const box = document.getElementById('alert-box');
        box.classList.replace('animate__bounceIn', 'animate__fadeOut');
        setTimeout(() => box.style.display = 'none', 500);
    }

    // --- SAYFA Y√ñNETƒ∞Mƒ∞ ---
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id + '-page').classList.add('active');
    }

    // --- OYUN MOTORU ---
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const uiScore = document.getElementById('ui-layer');
    let pipes = [];
    let frame = 0;
    let gameReq;

    canvas.width = window.innerWidth > 450 ? 450 : window.innerWidth;
    canvas.height = window.innerHeight - 70;

    const bird = {
        x: 50, y: 250, w: 34, h: 24,
        v: 0, g: 0.25, jump: 5,
        draw() {
            ctx.fillStyle = "#f7d015";
            ctx.fillRect(this.x, this.y, this.w, this.h);
            ctx.strokeRect(this.x, this.y, this.w, this.h);
        },
        update() {
            this.v += this.g;
            this.y += this.v;
            if(this.y > canvas.height || this.y < 0) this.gameOver();
        },
        gameOver() {
            cancelAnimationFrame(gameReq);
            hearts--;
            document.getElementById('heart-count').innerText = hearts;
            
            // Skor G√ºncelleme
            if(currentScore > dailyScore) dailyScore = currentScore;
            if(currentScore > bestScore) bestScore = currentScore;
            
            document.getElementById('daily-score-ui').innerText = dailyScore.toFixed(2);
            document.getElementById('best-score-ui').innerText = bestScore.toFixed(2);

            showAlert("EYVAH!", `√áarptƒ±n kanka! Skorun: ${currentScore}. Kalan Kalp: ${hearts}`);
            document.getElementById('game-container').style.display = 'none';
        }
    };

    function gameLoop() {
        ctx.fillStyle = "#70c5ce";
        ctx.fillRect(0,0, canvas.width, canvas.height);

        bird.update(); bird.draw();

        if(frame % 90 === 0) {
            pipes.push({ x: canvas.width, y: Math.random() * (canvas.height - 250) + 50, gap: 130 });
        }

        pipes.forEach((p, i) => {
            p.x -= 2.5;
            ctx.fillStyle = "#2ecc71";
            ctx.fillRect(p.x, 0, 50, p.y);
            ctx.fillRect(p.x, p.y + p.gap, 50, canvas.height);

            if(bird.x + bird.w > p.x && bird.x < p.x + 50 && (bird.y < p.y || bird.y + bird.h > p.y + p.gap)) bird.gameOver();
            if(p.x === 50) {
                currentScore++;
                uiScore.innerText = currentScore;
            }
        });

        pipes = pipes.filter(p => p.x > -50);
        frame++;
        gameReq = requestAnimationFrame(gameLoop);
    }

    document.getElementById('play-btn').addEventListener('click', () => {
        if(hearts <= 0) {
            showAlert("Bƒ∞TTƒ∞", "Kalbin kalmadƒ±! Admin ID: 8392479231'e ula≈ü.");
            return;
        }
        currentScore = 0;
        uiScore.innerText = "0";
        pipes = []; bird.y = 250; bird.v = 0;
        document.getElementById('game-container').style.display = 'block';
        gameLoop();
    });

    // Kontroller
    const flap = () => bird.v = -bird.jump;
    window.addEventListener('keydown', e => { if(e.code==='Space') flap(); });
    canvas.addEventListener('touchstart', e => { e.preventDefault(); flap(); });

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>Video Platform Prototype</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ========== GLOBAL ========== */
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
body{background:#0f0f0f;color:#fff;display:flex;height:100vh;overflow:hidden}
button{cursor:pointer}
.hidden{display:none}

/* ========== SIDEBAR ========== */
#sidebar{
  width:220px;background:#181818;padding:15px;display:flex;flex-direction:column;gap:8px
}
#sidebar button{
  background:none;border:none;color:#ccc;text-align:left;
  padding:10px;border-radius:8px;font-size:14px
}
#sidebar button.active,#sidebar button:hover{background:#272727;color:#fff}

/* ========== MAIN ========== */
#main{flex:1;overflow:auto;padding:20px}

/* ========== UPLOAD ========== */
#uploadBox{
  background:#1e1e1e;padding:15px;border-radius:10px;max-width:500px
}
#uploadBox input,#uploadBox textarea{
  width:100%;margin-bottom:10px;padding:8px;border-radius:6px;border:none
}
#progress{
  height:8px;background:#333;border-radius:5px;overflow:hidden;margin-top:10px
}
#bar{height:100%;width:0;background:#ff0000}

/* ========== VIDEO GRID ========== */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:15px}
.card{background:#1c1c1c;border-radius:10px;overflow:hidden;cursor:pointer}
.card img{width:100%;height:130px;object-fit:cover}
.card div{padding:8px;font-size:14px}

/* ========== PLAYER ========== */
#player{max-width:900px}
#player video{width:100%;border-radius:10px}
.actions button{background:none;border:none;color:#fff;margin-right:10px}

/* ========== SHORTS ========== */
#shorts{height:100%;overflow-y:auto;scroll-snap-type:y mandatory}
.short{
  height:100vh;position:relative;scroll-snap-align:start;
}
.short video{
  width:100%;height:100%;object-fit:cover
}
.shortActions{
  position:absolute;right:10px;bottom:100px;
  background:rgba(0,0,0,.35);padding:10px;border-radius:20px
}
.shortActions button{
  display:block;background:none;border:none;color:#fff;margin:10px 0
}

/* ========== TOAST ========== */
#toast{
  position:fixed;right:20px;bottom:20px;
  background:rgba(0,0,0,.6);padding:10px 15px;
  border-radius:8px;backdrop-filter:blur(5px);display:none
}
</style>
</head>

<body>

<div id="sidebar">
  <button class="active" onclick="showHome()">üè† Ana Sayfa</button>
  <button onclick="showShorts()">üé¨ Shorts</button>
  <button onclick="showUpload()">‚ûï Video Y√ºkle</button>
</div>

<div id="main">
  <!-- HOME -->
  <div id="home">
    <div class="grid" id="videoGrid"></div>
  </div>

  <!-- PLAYER -->
  <div id="player" class="hidden"></div>

  <!-- SHORTS -->
  <div id="shorts" class="hidden"></div>

  <!-- UPLOAD -->
  <div id="upload" class="hidden">
    <div id="uploadBox">
      <input type="file" id="videoFile" accept="video/*">
      <input type="file" id="thumbFile" accept="image/*">
      <input placeholder="Ba≈ülƒ±k" id="title">
      <textarea placeholder="A√ßƒ±klama"></textarea>
      <button onclick="startUpload()">Y√ºkle</button>
      <div id="progress"><div id="bar"></div></div>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
/* ========== DATA ========== */
let videos=[]
let shorts=[]
const grid=document.getElementById("videoGrid")
const shortsBox=document.getElementById("shorts")

/* ========== NAV ========== */
function reset(){
  home.style.display=player.style.display=shortsBox.style.display=upload.style.display="none"
}
function showHome(){reset();home.style.display="block"}
function showShorts(){reset();shortsBox.style.display="block"}
function showUpload(){reset();upload.style.display="block"}

/* ========== UPLOAD ========== */
function startUpload(){
  const file=videoFile.files[0]
  if(!file)return
  let p=0;bar.style.width="0%"
  const int=setInterval(()=>{
    p++;bar.style.width=p+"%"
    if(p>=100){
      clearInterval(int)
      createVideo(file)
      toast("Video ba≈üarƒ±yla y√ºklendi")
    }
  },100)
}

/* ========== CREATE VIDEO ========== */
function createVideo(file){
  const url=URL.createObjectURL(file)
  const v=document.createElement("video")
  v.src=url
  v.onloadedmetadata=()=>{
    const isShort=v.duration<=60
    const obj={url,title:title.value||"Video",likes:0,comments:0}
    isShort?addShort(obj):addLong(obj)
  }
}

/* ========== LONG VIDEO ========== */
function addLong(v){
  const card=document.createElement("div")
  card.className="card"
  card.innerHTML=`<img><div>${v.title}</div>`
  card.onclick=()=>playVideo(v)
  grid.appendChild(card)

  const vid=document.createElement("video")
  vid.src=v.url
  vid.currentTime=1
  vid.onloadeddata=()=>{
    const c=document.createElement("canvas")
    c.width=320;c.height=180
    c.getContext("2d").drawImage(vid,0,0,320,180)
    card.querySelector("img").src=c.toDataURL()
  }
}

/* ========== PLAYER ========== */
function playVideo(v){
  reset();player.style.display="block"
  player.innerHTML=`
    <video controls autoplay src="${v.url}"></video>
    <div class="actions">
      <button onclick="v.likes++;toast('Beƒüenildi')">‚ù§Ô∏è ${v.likes}</button>
      <button onclick="v.comments++;toast('Yorum eklendi')">üí¨ ${v.comments}</button>
      <button onclick="toast('Link kopyalandƒ±')">üîó Payla≈ü</button>
    </div>`
}

/* ========== SHORTS ========== */
function addShort(v){
  const box=document.createElement("div")
  box.className="short"
  box.innerHTML=`
    <video src="${v.url}" autoplay loop muted></video>
    <div class="shortActions">
      <button onclick="v.likes++;toast('Beƒüenildi')">‚ù§Ô∏è ${v.likes}</button>
      <button onclick="v.comments++;toast('Yorum eklendi')">üí¨ ${v.comments}</button>
      <button onclick="toast('Link kopyalandƒ±')">üîó</button>
    </div>`
  shortsBox.appendChild(box)
}

/* ========== TOAST ========== */
function toast(t){
  toastDiv.innerText=t
  toastDiv.style.display="block"
  setTimeout(()=>toastDiv.style.display="none",1500)
}
const toastDiv=document.getElementById("toast")
</script>
</body>
</html>

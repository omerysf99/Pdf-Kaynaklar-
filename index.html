<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexTube Pro - Video Ekosistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        body { font-family: 'Roboto', sans-serif; background-color: #0f0f0f; color: #ffffff; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f0f0f; }
        ::-webkit-scrollbar-thumb { background: #3f3f3f; border-radius: 10px; }
        .video-card:hover .play-overlay { opacity: 1; }
        .page-transition { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="antialiased overflow-x-hidden">

    <header class="fixed top-0 w-full h-14 bg-[#0f0f0f] flex items-center justify-between px-4 z-50 border-b border-white/10">
        <div class="flex items-center gap-4">
            <button class="p-2 hover:bg-white/10 rounded-full" onclick="showHome()"><i data-lucide="menu"></i></button>
            <div class="flex items-center gap-1 cursor-pointer" onclick="showHome()">
                <div class="bg-red-600 p-1 rounded-lg"><i data-lucide="play" class="fill-white text-white w-5 h-5"></i></div>
                <span class="text-xl font-bold tracking-tighter">NexTube</span>
            </div>
        </div>
        <div class="hidden md:flex flex-1 max-w-[600px] ml-10">
            <div class="flex w-full group">
                <input type="text" placeholder="Ara" class="w-full bg-[#121212] border border-white/10 rounded-l-full px-5 py-2 outline-none focus:border-blue-500 transition">
                <button class="bg-white/10 px-5 border border-l-0 border-white/10 rounded-r-full hover:bg-white/20"><i data-lucide="search" class="w-5 h-5 text-gray-400"></i></button>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="toggleUploadModal(true)" class="flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full text-sm font-medium transition">
                <i data-lucide="plus" class="w-5 h-5"></i> <span class="hidden sm:inline">Yükle</span>
            </button>
            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 border border-white/20"></div>
        </div>
    </header>

    <div class="flex pt-14 h-screen">
        <main id="main-content" class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar">
            
            <section id="home-view" class="page-transition">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-10" id="video-grid"></div>
            </section>

            <section id="watch-view" class="hidden page-transition">
                <div class="max-w-[1700px] mx-auto flex flex-col lg:flex-row gap-6">
                    <div class="flex-1">
                        <div class="bg-black rounded-2xl overflow-hidden aspect-video shadow-2xl">
                            <video id="player" controls autoplay class="w-full h-full"></video>
                        </div>
                        <div class="mt-4">
                            <h1 id="watch-title" class="text-xl font-bold">Video Başlığı</h1>
                            <div class="flex flex-wrap items-center justify-between gap-4 mt-4 border-b border-white/10 pb-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-full bg-indigo-600"></div>
                                    <div><p class="font-bold">Kanal Sahibi</p><p class="text-xs text-gray-400">8392479231 Abone</p></div>
                                    <button class="ml-4 bg-white text-black px-4 py-2 rounded-full text-sm font-bold hover:bg-gray-200 transition">Abone Ol</button>
                                </div>
                                <div class="flex items-center bg-white/10 rounded-full overflow-hidden">
                                    <button class="px-4 py-2 hover:bg-white/10 border-r border-white/5 flex items-center gap-2"><i data-lucide="thumbs-up" class="w-4 h-4"></i> 4.2B</button>
                                    <button class="px-4 py-2 hover:bg-white/10"><i data-lucide="thumbs-down" class="w-4 h-4"></i></button>
                                </div>
                            </div>
                            <div class="mt-4 p-4 bg-white/5 rounded-xl text-sm">
                                <p class="font-bold mb-1" id="watch-stats">1.234 görüntüleme</p>
                                <p id="watch-description" class="text-gray-300 whitespace-pre-wrap"></p>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-[400px] flex flex-col gap-3" id="recommended-list">
                        </div>
                </div>
            </section>
        </main>
    </div>

    <div id="upload-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] hidden items-center justify-center p-4">
        <div class="bg-[#282828] w-full max-w-lg rounded-3xl border border-white/10 shadow-2xl overflow-hidden p-6 space-y-4">
            <div class="flex justify-between items-center mb-2">
                <h2 class="text-lg font-bold">Video Yükle</h2>
                <button onclick="toggleUploadModal(false)" class="p-2 hover:bg-white/10 rounded-full"><i data-lucide="x"></i></button>
            </div>
            <input type="file" id="input-video" accept="video/*" class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700">
            <input type="file" id="input-thumb" accept="image/*" class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-zinc-700 file:text-white hover:file:bg-zinc-600">
            <input type="text" id="input-title" placeholder="Video Başlığı" class="w-full bg-[#121212] border border-white/10 rounded-xl px-4 py-3 outline-none focus:border-blue-500">
            <textarea id="input-desc" placeholder="Açıklama" rows="3" class="w-full bg-[#121212] border border-white/10 rounded-xl px-4 py-3 outline-none focus:border-blue-500 resize-none"></textarea>
            <button onclick="publishVideo()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-2xl font-bold shadow-lg">Yayınla</button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        let videos = [];

        function toggleUploadModal(show) { document.getElementById('upload-modal').style.display = show ? 'flex' : 'none'; }

        function publishVideo() {
            const vFile = document.getElementById('input-video').files[0];
            const tFile = document.getElementById('input-thumb').files[0];
            const title = document.getElementById('input-title').value;
            const desc = document.getElementById('input-desc').value;

            if (!vFile || !title) return alert("Dosya ve başlık zorunludur!");

            const videoObj = {
                id: Date.now(),
                title: title,
                description: desc,
                videoUrl: URL.createObjectURL(vFile),
                thumbUrl: tFile ? URL.createObjectURL(tFile) : 'https://picsum.photos/seed/tube/640/360',
                date: "Şimdi"
            };

            videos.unshift(videoObj);
            renderHomeGrid();
            toggleUploadModal(false);
        }

        function renderHomeGrid() {
            const grid = document.getElementById('video-grid');
            grid.innerHTML = videos.map(v => `
                <div class="video-card cursor-pointer group" onclick="watchVideo(${v.id})">
                    <div class="relative aspect-video rounded-xl overflow-hidden bg-zinc-800">
                        <img src="${v.thumbUrl}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                        <div class="absolute inset-0 bg-black/40 opacity-0 play-overlay transition-opacity flex items-center justify-center">
                            <i data-lucide="play" class="fill-white text-white w-10 h-10"></i>
                        </div>
                    </div>
                    <div class="mt-3 flex gap-3">
                        <div class="w-9 h-9 rounded-full bg-zinc-700 flex-shrink-0"></div>
                        <div>
                            <h3 class="text-sm font-bold line-clamp-2 leading-tight">${v.title}</h3>
                            <p class="text-xs text-gray-400 mt-1">Admin 8392479231 • ${v.date}</p>
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function watchVideo(id) {
            const video = videos.find(v => v.id === id);
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('watch-view').classList.remove('hidden');

            const player = document.getElementById('player');
            player.src = video.videoUrl;
            document.getElementById('watch-title').innerText = video.title;
            document.getElementById('watch-description').innerText = video.description || "Açıklama yok.";
            
            // ÖNERİLEN VİDEOLARI OLUŞTUR (İzlenen hariç diğerleri)
            const recList = document.getElementById('recommended-list');
            const otherVideos = videos.filter(v => v.id !== id);

            if(otherVideos.length === 0) {
                recList.innerHTML = '<p class="text-sm text-gray-500 text-center py-4 border border-dashed border-white/10 rounded-xl">Başka video bulunamadı</p>';
            } else {
                recList.innerHTML = otherVideos.map(v => `
                    <div class="flex gap-2 cursor-pointer group" onclick="watchVideo(${v.id})">
                        <div class="w-40 h-24 bg-zinc-800 rounded-lg overflow-hidden flex-shrink-0 relative">
                            <img src="${v.thumbUrl}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <h4 class="text-sm font-bold line-clamp-2 leading-tight group-hover:text-blue-400 transition">${v.title}</h4>
                            <p class="text-[11px] text-gray-400 mt-1">Admin 8392479231</p>
                            <p class="text-[11px] text-gray-400">12B izlenme</p>
                        </div>
                    </div>
                `).join('');
            }
            
            lucide.createIcons();
            window.scrollTo(0,0);
        }

        function showHome() {
            document.getElementById('player').pause();
            document.getElementById('watch-view').classList.add('hidden');
            document.getElementById('home-view').classList.remove('hidden');
        }
    </script>
</body>
</html>

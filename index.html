<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SpyderCoin - God Mode</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #050505; --purple: #a855f7; --text: #ffffff; --red: #ff3b30; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; overflow: hidden; }
        
        /* üï∑Ô∏è OYUN ALANI */
        .page { display: flex; flex-direction: column; align-items: center; height: 100vh; padding: 20px; box-sizing: border-box; }
        .bal { font-size: 60px; font-weight: 900; margin-top: 40px; text-shadow: 0 0 20px var(--purple); }
        
        .tap-area { position: relative; width: 300px; height: 300px; display: flex; justify-content: center; align-items: center; margin: 40px 0; touch-action: none; }
        .ring { position: absolute; width: 280px; height: 280px; border: 8px solid var(--purple); border-radius: 50%; box-shadow: 0 0 40px var(--purple); }
        #spider { width: 220px; z-index: 10; transition: transform 0.05s; }
        
        .emoji-pop { position: absolute; font-size: 40px; pointer-events: none; animation: fly 0.6s forwards; }
        @keyframes fly { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: translateY(-120px) scale(1.5); } }

        /* üîê KONTROL MERKEZƒ∞ */
        #admin-panel { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; padding: 30px; flex-direction: column; align-items: center; }
        .admin-card { background: #151517; width: 100%; padding: 25px; border-radius: 20px; border: 1px solid #333; margin-top: 20px; }
        .admin-btn { background: var(--red); color: white; border: none; width: 100%; padding: 15px; border-radius: 12px; font-weight: bold; margin-top: auto; cursor: pointer; }
    </style>
</head>
<body>

    <div class="page">
        <div class="bal" id="ui-bal">0</div>
        
        <div class="tap-area" id="tap-target">
            <div class="ring"></div>
            <img src="https://api.mimic.ai/api/v1/files/image_7ba2e0.png" id="spider">
        </div>

        <button id="adm-trigger" style="display:none; background:none; border:1px solid var(--purple); color:var(--purple); padding:10px 20px; border-radius:10px;" onclick="toggleAdmin(true)">üïµÔ∏è KONTROL MERKEZƒ∞</button>

        <div style="margin-top:auto; width:100%; margin-bottom:40px;">
            <div style="font-size:12px; margin-bottom:5px;">‚ö° Enerji: <span id="ui-nrg">100</span>/100</div>
            <div style="width:100%; height:8px; background:#111; border-radius:10px; overflow:hidden;">
                <div id="nrg-bar" style="width:100%; height:100%; background:var(--purple); transition: 0.2s;"></div>
            </div>
        </div>
    </div>

    <div id="admin-panel">
        <h1 style="color:var(--purple); font-size: 28px;">KONTROL MERKEZƒ∞</h1>
        <div class="admin-card">
            <p>Admin: <b id="adm-name"></b></p>
            <p>Kullanƒ±cƒ± Adƒ±: <b id="adm-user"></b></p>
            <p>Senin Bakiyen: <b id="adm-bal-val">0</b></p>
            <hr style="border:0; border-top:1px solid #222; margin: 15px 0;">
            <p style="font-size:11px; color:#666; line-height: 1.5;">* Firebase olmadƒ±ƒüƒ± i√ßin t√ºm √ºyeleri bir kanala logluyorum. Kanaldan herkesi takip edebilirsin.</p>
        </div>
        <button class="admin-btn" onclick="toggleAdmin(false)">KAPAT</button>
        <p style="margin-top:20px; color:#333; font-size:12px;">@SpyderCoin_Bot</p>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const MY_ID = 8392479231;
        const user = tg.initDataUnsafe?.user || { id: 0, first_name: "User", username: "unknown" };

        let bal = parseInt(localStorage.getItem('spy_bal')) || 0;
        let nrg = 100;

        // üõ†Ô∏è TAKƒ∞P Sƒ∞STEMƒ∞ (TOKEN VE ID Gƒ∞R)
        const BOT_TOKEN = "7547185360:AAHY_Z1_v... (Senin Tokenin)"; 
        const LOG_CHAT_ID = "8392479231"; // Mesajlarƒ±n geleceƒüi Chat ID

        function reportToAdmin(action) {
            const text = `üï∑Ô∏è *Spyder Raporu*\nüë§ ƒ∞sim: ${user.first_name}\nüÜî ID: ${user.id}\nüë§ User: @${user.username || 'yok'}\nüí∞ Bakiye: ${bal}\nüöÄ Olay: ${action}`;
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${LOG_CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=Markdown`);
        }

        function init() {
            tg.ready(); tg.expand();
            
            // Veriyi Telegram Cloud'dan √ßek
            tg.CloudStorage.getItem('spy_save', (err, val) => {
                if(!err && val) bal = parseInt(val);
                updateUI();
            });

            if (user.id === MY_ID) {
                document.getElementById('adm-trigger').style.display = 'block';
                document.getElementById('adm-name').innerText = user.first_name;
                document.getElementById('adm-user').innerText = "@" + (user.username || "yok");
            }
            reportToAdmin("Oyuna Giri≈ü Yaptƒ±");
        }

        function updateUI() {
            document.getElementById('ui-bal').innerText = bal.toLocaleString();
            document.getElementById('ui-nrg').innerText = nrg;
            document.getElementById('nrg-bar').style.width = nrg + "%";
            document.getElementById('adm-bal-val').innerText = bal;
            localStorage.setItem('spy_bal', bal);
        }

        function tap(e) {
            if (nrg <= 0) return;
            bal += 1; nrg--; updateUI();

            const p = document.createElement('div');
            p.className = 'emoji-pop'; p.innerText = "üï∑Ô∏è";
            const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
            p.style.left = (x - 20) + "px"; p.style.top = (y - 40) + "px";
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 600);

            document.getElementById('spider').style.transform = "scale(0.9)";
            setTimeout(() => {
                document.getElementById('spider').style.transform = "scale(1)";
                tg.CloudStorage.setItem('spy_save', String(bal));
            }, 50);

            if (bal % 100 === 0) reportToAdmin("100 Tƒ±k Daha Yaptƒ±");
        }

        function toggleAdmin(s) { document.getElementById('admin-panel').style.display = s ? 'flex' : 'none'; }

        document.getElementById('tap-target').addEventListener('touchstart', (e) => { e.preventDefault(); tap(e); });
        document.getElementById('tap-target').addEventListener('mousedown', tap);

        init();
    </script>
</body>
</html>

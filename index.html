<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Nano Banana - Direct Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; }
        .main-card { background: #0a0a0a; border: 1px solid #1a1a1a; border-radius: 24px; }
        .input-box { background: #111; border: 1px solid #222; border-radius: 16px; color: #fff; outline: none; transition: 0.3s; }
        .input-box:focus { border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.1); }
        .btn-generate { background: linear-gradient(90deg, #2563eb, #7c3aed); font-weight: 800; border-radius: 16px; transition: 0.4s; }
        .btn-generate:hover { opacity: 0.9; transform: scale(1.01); }
        .btn-generate:disabled { background: #222; color: #555; cursor: not-allowed; }
        .loader { width: 20px; height: 20px; border: 3px solid #fff; border-bottom-color: transparent; border-radius: 50%; display: none; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="max-w-2xl w-full space-y-6">
        <div class="flex justify-between items-end px-2">
            <div>
                <h1 class="text-2xl font-black tracking-tighter italic">NANO BANANA</h1>
                <p class="text-[10px] text-gray-600 font-mono uppercase">System Node: 8392479231</p>
            </div>
            <div class="text-right">
                <span class="text-[10px] bg-blue-900/30 text-blue-400 px-2 py-1 rounded border border-blue-500/30 font-bold">LIVE ACCESS</span>
            </div>
        </div>

        <div class="main-card p-8 space-y-6">
            <div class="space-y-2">
                <label class="text-xs font-bold text-gray-500 uppercase ml-1">Hayalindekini Yaz</label>
                <textarea id="prompt" placeholder="Örn: Siberpunk bir şehirde yağmurda yürüyen samuray, 8k, gerçekçi..." 
                    class="w-full p-5 h-40 input-box resize-none text-lg leading-relaxed"></textarea>
            </div>

            <button onclick="generate()" id="genBtn" class="w-full py-5 btn-generate flex items-center justify-center gap-3">
                <span id="btnText">GÖRSELİ OLUŞTUR</span>
                <div id="loading" class="loader"></div>
            </button>
        </div>

        <div id="result" class="hidden main-card p-2 overflow-hidden animate-pulse">
            <img id="outImg" src="" class="w-full rounded-2xl shadow-2xl">
            <div class="p-4 flex justify-between items-center">
                <span class="text-[10px] text-gray-700 font-mono">DALL-E 3 ENGINE ACTIVE</span>
                <button onclick="download()" class="text-sm font-bold text-blue-500 hover:text-white transition-colors">KAYDET</button>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = "sk-pfmKK0Dyxd4h53j1R91kd5xG38FWF"; // Yeni Key Entegre Edildi
        
        async function generate() {
            const prompt = document.getElementById('prompt').value;
            const btn = document.getElementById('genBtn');
            const btnText = document.getElementById('btnText');
            const loader = document.getElementById('loading');
            const result = document.getElementById('result');
            const outImg = document.getElementById('outImg');

            if(!prompt) return;

            // UI Hazırlık
            btn.disabled = true;
            btnText.innerText = "OLUŞTURULUYOR...";
            loader.style.display = "block";
            result.classList.add('hidden');

            try {
                // OpenAI DALL-E 3 Endpoint
                const response = await fetch('https://api.openai.com/v1/images/generations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "dall-e-3",
                        prompt: prompt,
                        n: 1,
                        size: "1024x1024"
                    })
                });

                const data = await response.json();

                if(data.data && data.data[0].url) {
                    outImg.src = data.data[0].url;
                    result.classList.remove('hidden');
                    result.classList.remove('animate-pulse');
                    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
                } else {
                    alert("Hata: " + (data.error?.message || "Görsel üretilemedi. Key limitini veya bakiyenizi kontrol edin."));
                }
            } catch (err) {
                alert("Bağlantı Hatası: " + err.message);
            } finally {
                btn.disabled = false;
                btnText.innerText = "GÖRSELİ OLUŞTUR";
                loader.style.display = "none";
            }
        }

        function download() {
            const url = document.getElementById('outImg').src;
            const link = document.createElement('a');
            link.href = url;
            link.target = "_blank";
            link.download = `banana-art-${Date.now()}.png`;
            link.click();
        }
    </script>

    <footer class="fixed bottom-4 text-[9px] text-gray-800 font-mono">
        AUTH_TOKEN_ACTIVE_KEY_PFMKK...
    </footer>

</body>
</html>

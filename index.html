<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hamster Miner Pro</title>
    <style>
        :root {
            --gold: #f3ba2f;
            --blue: #007aff;
            --bg: #000000;
            --card-bg: #1c1c1e;
        }

        body {
            margin: 0; background-color: var(--bg); color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica;
            display: flex; flex-direction: column; height: 100vh; overflow: hidden;
        }

        /* Ãœst Bilgi Paneli */
        #top-info {
            display: flex; justify-content: space-around; padding: 15px;
            background: rgba(255,255,255,0.05); border-bottom: 1px solid #333;
        }
        .stat-box { text-align: center; }
        .stat-label { font-size: 10px; color: #888; text-transform: uppercase; }
        .stat-value { font-size: 14px; font-weight: bold; color: var(--gold); }

        /* Skor AlanÄ± */
        #score-container { text-align: center; padding: 20px 0; }
        #score { font-size: 3rem; font-weight: 800; margin: 0; }

        /* Ana TÄ±klama AlanÄ± */
        #game-page { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .circle-outer {
            width: 280px; height: 280px; border-radius: 50%;
            background: radial-gradient(circle, #2c3e50 0%, #000 100%);
            border: 8px solid #333; display: flex; align-items: center; justify-content: center;
            position: relative; cursor: pointer; transition: transform 0.05s;
            box-shadow: 0 0 50px rgba(0, 122, 255, 0.2);
        }
        .circle-outer:active { transform: scale(0.95); border-color: var(--blue); }
        .character { font-size: 120px; }

        /* GeliÅŸtirme (Mining) SayfasÄ± */
        #mine-page { display: none; padding: 20px; overflow-y: auto; flex-grow: 1; }
        .card-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding-bottom: 100px; }
        .card {
            background: var(--card-bg); padding: 15px; border-radius: 15px;
            border: 1px solid #333; display: flex; flex-direction: column; gap: 10px;
        }
        .card-title { font-size: 12px; font-weight: bold; }
        .card-profit { font-size: 10px; color: #4cd964; }
        .card-btn {
            background: #333; border: none; color: white; padding: 8px;
            border-radius: 8px; font-size: 12px; cursor: pointer;
        }
        .card-btn:enabled { background: var(--blue); }

        /* Alt Navigasyon */
        #nav {
            height: 70px; background: #111; display: flex;
            justify-content: space-around; align-items: center;
            border-top: 1px solid #333; position: fixed; bottom: 0; width: 100%;
        }
        .nav-item { text-align: center; color: #888; font-size: 11px; flex: 1; cursor: pointer; }
        .nav-item.active { color: white; }
        .nav-icon { font-size: 24px; display: block; margin-bottom: 4px; }

        /* Enerji BarÄ± */
        #energy-area { width: 80%; margin-bottom: 30px; }
        .bar-bg { width: 100%; height: 12px; background: #333; border-radius: 6px; margin-top: 8px; }
        #bar-fill { width: 100%; height: 100%; background: var(--gold); border-radius: 6px; transition: width 0.1s; }

        /* TÄ±klama Efekti */
        .float-text {
            position: absolute; color: white; font-weight: bold; font-size: 24px;
            pointer-events: none; animation: rise 0.8s ease-out forwards;
        }
        @keyframes rise { 0% { opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }
    </style>
</head>
<body>

    <div id="top-info">
        <div class="stat-box">
            <div class="stat-label">TÄ±k BaÅŸÄ±</div>
            <div class="stat-value" id="tap-val">+1</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Saatlik KÃ¢r</div>
            <div class="stat-value" id="profit-val">0</div>
        </div>
    </div>

    <div id="game-page">
        <div id="score-container">
            <h1 id="score">0</h1>
        </div>

        <div class="circle-outer" onpointerdown="handleTap(event)">
            <div class="character">ğŸ‘¨â€ğŸ’¼</div>
        </div>

        <div id="energy-area">
            <div style="display: flex; justify-content: space-between; font-size: 14px;">
                <span>âš¡ <span id="energy-now">1000</span></span>
                <span style="color:#888">/ <span id="energy-max">1000</span></span>
            </div>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>

    <div id="mine-page">
        <h2 style="text-align: center;">Maden KartlarÄ±</h2>
        <div class="card-grid">
            <div class="card">
                <div class="card-title">Strateji PlanÄ±</div>
                <div class="card-profit">KÃ¢r: +50/saat</div>
                <button class="card-btn" onclick="buyCard('strategy', 100, 50)">100 ğŸ’°</button>
            </div>
            <div class="card">
                <div class="card-title">Maden Ä°ÅŸÃ§isi</div>
                <div class="card-profit">KÃ¢r: +120/saat</div>
                <button class="card-btn" onclick="buyCard('worker', 500, 120)">500 ğŸ’°</button>
            </div>
            <div class="card">
                <div class="card-title">AltÄ±n Kazma</div>
                <div class="card-profit">TÄ±k: +2</div>
                <button class="card-btn" onclick="buyCard('drill', 1000, 0, 2)">1000 ğŸ’°</button>
            </div>
            <div class="card">
                <div class="card-title">Yapay Zeka</div>
                <div class="card-profit">KÃ¢r: +500/saat</div>
                <button class="card-btn" onclick="buyCard('ai', 2500, 500)">2500 ğŸ’°</button>
            </div>
        </div>
    </div>

    <nav id="nav">
        <div class="nav-item active" onclick="switchPage('game')">
            <span class="nav-icon">ğŸ </span>Borsa
        </div>
        <div class="nav-item" onclick="switchPage('mine')">
            <span class="nav-icon">â›ï¸</span>Maden
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ‘¥</span>ArkadaÅŸlar
        </div>
    </nav>

    <script>
        let state = {
            balance: 0,
            energy: 1000,
            maxEnergy: 1000,
            tapPower: 1,
            profitPerHour: 0
        };

        function handleTap(e) {
            if (state.energy >= state.tapPower) {
                state.balance += state.tapPower;
                state.energy -= state.tapPower;
                showEffect(e.clientX, e.clientY);
                updateUI();
                if(window.Telegram?.WebApp) window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
        }

        function buyCard(id, cost, profit, addTap = 0) {
            if (state.balance >= cost) {
                state.balance -= cost;
                state.profitPerHour += profit;
                state.tapPower += addTap;
                updateUI();
            }
        }

        function switchPage(page) {
            document.getElementById('game-page').style.display = page === 'game' ? 'flex' : 'none';
            document.getElementById('mine-page').style.display = page === 'mine' ? 'block' : 'none';
            document.querySelectorAll('.nav-item').forEach((el, i) => {
                el.classList.toggle('active', (page === 'game' && i === 0) || (page === 'mine' && i === 1));
            });
        }

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(state.balance).toLocaleString();
            document.getElementById('energy-now').innerText = state.energy;
            document.getElementById('energy-max').innerText = state.maxEnergy;
            document.getElementById('tap-val').innerText = "+" + state.tapPower;
            document.getElementById('profit-val').innerText = "+" + state.profitPerHour;
            document.getElementById('bar-fill').style.width = (state.energy / state.maxEnergy * 100) + "%";

            // Kart butonlarÄ±nÄ± kontrol et
            document.querySelectorAll('.card-btn').forEach(btn => {
                let cost = parseInt(btn.innerText);
                btn.disabled = state.balance < cost;
            });
        }

        function showEffect(x, y) {
            const txt = document.createElement('div');
            txt.className = 'float-text';
            txt.innerText = "+" + state.tapPower;
            txt.style.left = x + 'px'; txt.style.top = y + 'px';
            document.body.appendChild(txt);
            setTimeout(() => txt.remove(), 800);
        }

        // Pasif Gelir (Saniyede bir eklenir)
        setInterval(() => {
            if (state.profitPerHour > 0) {
                state.balance += (state.profitPerHour / 3600);
                updateUI();
            }
        }, 1000);

        // Enerji Dolumu
        setInterval(() => {
            if (state.energy < state.maxEnergy) {
                state.energy = Math.min(state.energy + 3, state.maxEnergy);
                updateUI();
            }
        }, 1000);

        if(window.Telegram?.WebApp) window.Telegram.WebApp.expand();
        updateUI();
    </script>
</body>
</html>

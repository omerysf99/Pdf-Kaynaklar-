<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpyderCoin - Tap to Earn</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://adexora.com/cdn/ads.js?id=1545"></script>

    <style>
        body {
            background: radial-gradient(circle, #2e004f 0%, #000 100%);
            color: #ffeb3b; font-family: 'Arial Black', sans-serif;
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center; overflow: hidden;
        }

        /* √úst Panel */
        .top-bar { position: absolute; top: 20px; width: 90%; display: flex; justify-content: space-between; align-items: center; }
        #balance { font-size: 40px; text-shadow: 0 0 20px #9c27b0; }

        /* Enerji Barƒ± */
        .energy-container { width: 280px; height: 25px; background: #222; border: 3px solid #ffeb3b; border-radius: 20px; position: relative; margin: 15px 0; }
        #energy-fill { height: 100%; width: 100%; background: #ffeb3b; transition: 0.1s; }
        #energy-text { position: absolute; width: 100%; top: 3px; left: 0; color: #000; font-size: 14px; font-weight: bold; }

        /* Ana Tƒ±klama Alanƒ± (Tap to Earn) */
        #spider { font-size: 180px; cursor: pointer; transition: transform 0.1s; user-select: none; margin: 20px 0; }
        #spider:active { transform: scale(0.9); }
        .disabled { opacity: 0.3; pointer-events: none; filter: grayscale(1); }

        /* Butonlar */
        .btn { background: #ffeb3b; color: #2e004f; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 15px; cursor: pointer; box-shadow: 0 5px #9c27b0; }
        .btn:active { transform: translateY(3px); box-shadow: 0 2px #9c27b0; }
        .btn-wallet { background: #9c27b0; color: white; padding: 10px 20px; font-size: 14px; }

        /* C√ºzdan Paneli (Modal) */
        #wallet-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 1000; align-items: center; justify-content: center;
        }
        .wallet-card {
            background: #2e004f; padding: 30px; border: 4px solid #ffeb3b; border-radius: 25px; width: 350px;
        }
        .wallet-card input { width: 90%; padding: 12px; margin: 10px 0; border-radius: 10px; border: none; font-size: 16px; text-align: center; }
        #calc-info { background: #1a002e; color: #00ff00; padding: 10px; border-radius: 10px; font-size: 13px; margin: 10px 0; display: none; border: 1px solid #00ff00; }
        .modal-btns { display: flex; gap: 10px; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div id="balance">$0.00000</div>
        <button class="btn btn-wallet" onclick="openWallet()">üëõ C√úZDAN</button>
    </div>

    <div class="energy-container">
        <div id="energy-fill"></div>
        <div id="energy-text">1000 / 1000</div>
    </div>

    <div id="spider">üï∑Ô∏è</div>
    <p style="font-size: 14px; color: #d1c4e9;">Kazanmak i√ßin √ñr√ºmceƒüe Tƒ±kla!</p>

    <button class="btn" onclick="refill()">ENERJƒ∞ DOLDUR (AD)</button>

    <div id="wallet-modal">
        <div class="wallet-card">
            <h2 style="margin-top:0">USDT √áEKƒ∞M</h2>
            <p style="font-size: 12px;">Min √áekim: 0.50$ (0.50$ = 750 Reklam)</p>
            
            <input type="number" id="w-amount" placeholder="Miktar (USDT)" oninput="autoCalc(this.value)">
            <div id="calc-info">Zorunlu Reklam Sayƒ±sƒ±: 0</div>
            <input type="text" id="w-address" placeholder="TRC20 C√ºzdan Adresi">

            <div class="modal-btns">
                <button class="btn" style="flex:2" onclick="sendRequest()">TALEBƒ∞ G√ñNDER</button>
                <button class="btn" style="flex:1; background:red; color:white;" onclick="closeWallet()">KAPAT</button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDfy6QdIZ0BthEHTmxkw-NAja3B9bFFd8U",
            authDomain: "spydercoin-94f7b.firebaseapp.com",
            projectId: "spydercoin-94f7b",
            storageBucket: "spydercoin-94f7b.firebasestorage.app",
            messagingSenderId: "218267568158",
            appId: "1:218267568158:web:832728845ba0f42202060f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let money = 0;
        let energy = 1000;
        let adsWatched = 0;

        // Veri Senkronizasyonu
        db.collection("players").doc("user1").onSnapshot(doc => {
            if(doc.exists){
                const d = doc.data();
                money = d.money || 0;
                energy = d.energy || 1000;
                adsWatched = d.adsWatched || 0;
                updateUI();
            }
        });

        // Tap To Earn Mekanizmasƒ±
        document.getElementById('spider').onclick = () => {
            if(energy > 0) {
                money += 0.00001;
                energy--;
                updateUI();
                save();
            }
        };

        function refill() {
            window.open("https://adexora.my.id/dl/QFm5mnRYbJV", "_blank");
            energy = 1000;
            adsWatched++;
            save();
            if(window.showAdexora) window.showAdexora().catch(e=>{});
        }

        // C√ºzdan Fonksiyonlarƒ±
        function openWallet() { document.getElementById('wallet-modal').style.display = 'flex'; }
        function closeWallet() { document.getElementById('wallet-modal').style.display = 'none'; }
        
        function autoCalc(val) {
            const info = document.getElementById('calc-info');
            if(val > 0) {
                const count = Math.ceil((val / 0.50) * 750);
                info.innerText = "Zorunlu Reklam Sayƒ±sƒ±: " + count;
                info.style.display = "block";
            } else { info.style.display = "none"; }
        }

        function sendRequest() {
            const amt = parseFloat(document.getElementById('w-amount').value);
            const addr = document.getElementById('w-address').value;
            const needed = (amt / 0.50) * 750;

            if(amt < 0.50) return alert("Minimum 0.50 USDT!");
            if(money < amt) return alert("Bakiye Yetersiz!");
            if(adsWatched < needed) return alert(`Hata: Bu miktar i√ßin ${Math.ceil(needed)} reklam izlemelisiniz!`);
            
            db.collection("withdrawals").add({
                user: "user1", amount: amt, address: addr, date: new Date(), status: "beklemede"
            }).then(() => {
                alert("Talebiniz ba≈üarƒ±yla g√∂nderildi!");
                closeWallet();
            });
        }

        function updateUI() {
            document.getElementById('balance').innerText = "$" + money.toFixed(5);
            document.getElementById('energy-text').innerText = energy + " / 1000";
            document.getElementById('energy-fill').style.width = (energy/10) + "%";
            if(energy <= 0) document.getElementById('spider').classList.add('disabled');
            else document.getElementById('spider').classList.remove('disabled');
        }

        function save() {
            db.collection("players").doc("user1").set({ money, energy, adsWatched }, {merge:true});
        }
    </script>
</body>
</html>

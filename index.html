<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Koalas Arcade | Official Mini App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        :root {
            --primary: #007aff;
            --accent: #fcd535;
            --bg: #000000;
            --card-bg: #0c0c0c;
            --border: rgba(255,255,255,0.06);
            --text-main: #ffffff;
            --text-dim: #71717a;
        }

        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
        }

        /* --- DEVICE PROTECTOR --- */
        #pc-blocker {
            position: fixed; inset: 0; background: #000; z-index: 100000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 40px;
        }

        /* --- 7 SECOND CHECKING SYSTEM --- */
        #checking-screen {
            position: fixed; inset: 0; background: var(--bg); z-index: 9000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .spinner-container {
            position: relative; width: 120px; height: 120px;
            display: flex; align-items: center; justify-content: center; margin-bottom: 50px;
        }

        .spinner-outer {
            position: absolute; inset: 0; border-radius: 50%;
            border: 3px solid rgba(255,255,255,0.03); border-top: 3px solid var(--primary);
            animation: spin 1s cubic-bezier(0.42, 0, 0.58, 1) infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        .analysis-list { width: 100%; max-width: 280px; gap: 12px; display: flex; flex-direction: column; }
        
        .analysis-item {
            background: rgba(255,255,255,0.02); border: 1px solid var(--border);
            padding: 14px 20px; border-radius: 18px; display: flex;
            justify-content: space-between; align-items: center;
            opacity: 0; transform: translateY(15px); transition: all 0.6s ease-out;
        }
        .analysis-item.active { opacity: 1; transform: translateY(0); }
        .analysis-item .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--primary); margin-right: 10px; box-shadow: 0 0 10px var(--primary); }

        /* --- DASHBOARD STYLING --- */
        #main-app {
            display: none; height: 100vh; overflow-y: scroll; opacity: 0; 
            transition: opacity 1s ease; scroll-behavior: smooth;
        }
        
        .hero-section {
            height: 240px; background: linear-gradient(to bottom, rgba(0,0,0,0), #000), url('Koalas.jpg');
            background-size: cover; background-position: center; position: relative;
        }

        .main-card {
            background: var(--bg); border-top-left-radius: 35px; border-top-right-radius: 35px;
            margin-top: -40px; padding: 30px 20px 150px; position: relative;
        }

        .balance-box { text-align: center; margin-bottom: 35px; }
        .balance-box h1 { font-size: 4.5rem; font-weight: 900; font-style: italic; letter-spacing: -2px; line-height: 1; margin-bottom: 8px; }
        
        .earn-btn {
            background: linear-gradient(135deg, #fcd535 0%, #f3ba2f 100%);
            color: #000; width: 100%; padding: 18px; border-radius: 22px;
            font-weight: 900; display: flex; align-items: center; justify-content: center;
            gap: 12px; font-size: 16px; transition: transform 0.2s;
            box-shadow: 0 10px 25px rgba(252, 213, 53, 0.2);
        }
        .earn-btn:active { transform: scale(0.97); }

        /* --- CEX GRID --- */
        .cex-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 15px; }
        .cex-card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 22px; padding: 18px 10px; display: flex; flex-direction: column;
            align-items: center; gap: 10px; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; overflow: hidden;
        }
        .cex-card img { width: 45px; height: 45px; border-radius: 14px; object-fit: cover; }
        .cex-card.selected { border-color: var(--primary); background: rgba(0,122,255,0.06); transform: translateY(-5px); }
        .cex-card .check-badge {
            position: absolute; top: 8px; right: 8px; background: var(--primary);
            width: 16px; height: 16px; border-radius: 50%; display: none;
            align-items: center; justify-content: center; font-size: 10px;
        }
        .cex-card.selected .check-badge { display: flex; }

        /* --- MODAL SYSTEM --- */
        .modal-wrap {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            backdrop-filter: blur(12px); z-index: 9999; display: none;
            align-items: center; justify-content: center; padding: 25px;
        }
        .modal-wrap.active { display: flex; }
        .modal-content {
            background: #111; border: 1px solid var(--border);
            border-radius: 35px; width: 100%; max-width: 340px; padding: 35px;
            text-align: center; transform: scale(0.9); transition: 0.3s;
        }
        .modal-wrap.active .modal-content { transform: scale(1); }

        /* --- LOADER --- */
        .progress-container { width: 100%; height: 8px; background: #1a1a1a; border-radius: 10px; margin: 25px 0; display: none; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background: var(--accent); transition: width 2s linear; }

    </style>
</head>
<body>

    <div id="pc-blocker">
        <div class="bg-zinc-900/50 p-10 rounded-[40px] border border-white/5">
            <i class="fa-solid fa-mobile-button text-6xl text-yellow-500 mb-6"></i>
            <h2 class="text-2xl font-black mb-4 italic">ONLY FOR MOBILE</h2>
            <p class="text-zinc-500 font-medium leading-relaxed">Koalas Arcade is a mobile-first experience.<br>Please launch from your smartphone.</p>
        </div>
    </div>

    <div id="checking-screen">
        <div class="spinner-container">
            <div class="spinner-outer"></div>
            <img src="Koalas.jpg" class="w-16 h-16 rounded-full border border-white/10">
        </div>
        <h3 class="text-zinc-500 font-black italic tracking-[0.3em] uppercase mb-10 text-sm">Analyzing Profile</h3>
        
        <div class="analysis-list">
            <div id="step1" class="analysis-item"><div class="flex items-center"><div class="dot"></div><span class="text-[11px] font-bold text-zinc-500 uppercase">Telegram Age</span></div><span class="val font-black italic text-sm">Checking...</span></div>
            <div id="step2" class="analysis-item"><div class="flex items-center"><div class="dot"></div><span class="text-[11px] font-bold text-zinc-500 uppercase">User Status</span></div><span class="val font-black italic text-sm">Checking...</span></div>
            <div id="step3" class="analysis-item"><div class="flex items-center"><div class="dot"></div><span class="text-[11px] font-bold text-zinc-500 uppercase">Koala Rank</span></div><span class="val font-black italic text-sm">Checking...</span></div>
        </div>
    </div>

    <div id="reward-screen" class="hidden fixed inset-0 bg-black z-[8500] flex flex-col items-center justify-center p-10 text-center">
        <p class="text-zinc-500 font-black text-xs uppercase tracking-widest mb-6">Allocation Ready</p>
        <div id="reward-amount" class="text-8xl font-black italic tracking-tighter mb-12">0</div>
        <button onclick="enterApp()" class="w-full bg-white text-black py-5 rounded-2xl font-black text-lg shadow-xl shadow-white/5">COLLECT REWARD</button>
    </div>

    <div id="main-app">
        <div class="hero-section"></div>
        <div class="main-card">
            
            <div class="balance-box">
                <img src="Koalas.jpg" class="w-20 h-20 rounded-[28px] mx-auto border-4 border-black -mt-20 mb-4 shadow-2xl">
                <h1 id="user-balance">0</h1>
                <p class="text-zinc-500 font-black text-[10px] uppercase tracking-[0.4em] italic">$KOALA COINS</p>
            </div>

            <button onclick="triggerAdModal()" class="earn-btn mb-10">
                <i class="fa-solid fa-circle-play text-xl"></i> EARN +1 KOALA
            </button>

            <div class="space-y-4 mb-10">
                <p class="text-zinc-500 text-[10px] font-black uppercase tracking-[0.3em] px-2">Web3 Identity</p>
                <button onclick="openWalletModal()" id="wallet-btn" class="w-full bg-zinc-900 border border-white/5 h-16 rounded-2xl font-black text-sm flex items-center justify-center gap-3">
                    <i class="fa-solid fa-wallet text-blue-500"></i> CONNECT WALLET
                </button>
            </div>

            <p class="text-zinc-500 text-[10px] font-black uppercase tracking-[0.3em] px-2 mb-2">Exchange Partner</p>
            <div class="cex-grid">
                <div class="cex-card" onclick="setEx(this, 'Binance')">
                    <div class="check-badge"><i class="fa-solid fa-check"></i></div>
                    <img src="binance.jpg" onerror="this.src='https://via.placeholder.com/100?text=B'">
                    <span class="font-black text-[10px] italic">BINANCE</span>
                </div>
                <div class="cex-card" onclick="setEx(this, 'OKX')">
                    <div class="check-badge"><i class="fa-solid fa-check"></i></div>
                    <img src="okx.jpg" onerror="this.src='https://via.placeholder.com/100?text=OKX'">
                    <span class="font-black text-[10px] italic">OKX</span>
                </div>
                <div class="cex-card" onclick="setEx(this, 'Bitget')">
                    <div class="check-badge"><i class="fa-solid fa-check"></i></div>
                    <img src="bitget.jpg" onerror="this.src='https://via.placeholder.com/100?text=BG'">
                    <span class="font-black text-[10px] italic">BITGET</span>
                </div>
            </div>

        </div>
    </div>

    <div id="modal-ad" class="modal-wrap">
        <div class="modal-content">
            <div class="text-5xl mb-6">ðŸŽ¬</div>
            <h2 class="text-xl font-black italic uppercase mb-2">Watch & Earn</h2>
            <p class="text-zinc-500 font-bold text-[10px] tracking-widest uppercase">Boost your balance by +1 Koala</p>
            
            <div id="ad-loader" class="progress-container"><div id="ad-fill" class="progress-fill"></div></div>
            
            <button id="ad-confirm-btn" onclick="runAdSim()" class="w-full bg-white text-black py-4 rounded-2xl font-black mt-6 mb-4">WATCH AD</button>
            <button onclick="closeModals()" class="text-zinc-600 font-bold text-xs uppercase tracking-widest">Maybe Later</button>
        </div>
    </div>

    <div id="modal-wallet" class="modal-wrap">
        <div class="modal-content">
            <h2 class="text-xl font-black italic uppercase mb-6">Link Address</h2>
            <input type="text" id="wallet-input" placeholder="Paste TON Address (UQ...)" 
                   class="w-full bg-black border border-zinc-800 rounded-2xl py-5 px-4 text-center text-blue-400 font-mono text-xs outline-none mb-6">
            <button onclick="saveWalletAddress()" class="w-full bg-white text-black py-4 rounded-2xl font-black mb-4">SAVE WALLET</button>
            <button onclick="closeModals()" class="text-zinc-600 font-bold text-xs uppercase tracking-widest">Close</button>
        </div>
    </div>

    <div id="modal-alert" class="modal-wrap">
        <div class="modal-content">
            <div id="alert-icon" class="text-4xl mb-4"></div>
            <p id="alert-msg" class="text-white font-bold mb-8 px-4 leading-relaxed text-sm"></p>
            <button onclick="closeModals()" class="w-full bg-white text-black py-4 rounded-2xl font-black uppercase">Understood</button>
        </div>
    </div>

    <script>
        /* --- APP STATE --- */
        let state = {
            balance: 0,
            wallet: localStorage.getItem('koala_wallet') || null,
            cex: localStorage.getItem('koala_cex') || null
        };

        /* --- DEVICE GUARD --- */
        const isMobile = () => {
            return /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && window.innerWidth < 1024;
        };

        /* --- CORE ENGINE --- */
        window.onload = () => {
            if (!isMobile()) {
                document.getElementById('pc-blocker').style.display = 'flex';
                document.getElementById('checking-screen').style.display = 'none';
                return;
            }
            startAnalysing();
        };

        function startAnalysing() {
            const steps = [
                {id: 'step1', val: '4.8 Years', time: 1500},
                {id: 'step2', val: 'Verified OG', time: 3500},
                {id: 'step3', val: 'Top 2%', time: 5500}
            ];

            steps.forEach(s => {
                setTimeout(() => {
                    const el = document.getElementById(s.id);
                    el.classList.add('active');
                    setTimeout(() => {
                        const valEl = el.querySelector('.val');
                        valEl.innerText = s.val;
                        valEl.className = "val font-black italic text-sm text-blue-500";
                    }, 500);
                }, s.time);
            });

            setTimeout(() => {
                state.balance = Math.floor(Math.random() * 9000) + 1000;
                document.getElementById('checking-screen').style.display = 'none';
                document.getElementById('reward-screen').classList.remove('hidden');
                document.getElementById('reward-amount').innerText = state.balance.toLocaleString();
            }, 7000); // TAM 7 SANIYE
        }

        function enterApp() {
            document.getElementById('reward-screen').style.display = 'none';
            const app = document.getElementById('main-app');
            app.style.display = 'block';
            setTimeout(() => app.style.opacity = '1', 50);
            updateUI();
        }

        /* --- UI ACTIONS --- */
        function updateUI() {
            document.getElementById('user-balance').innerText = state.balance.toLocaleString();
            if(state.wallet) {
                const mask = `${state.wallet.slice(0,4)}...${state.wallet.slice(-4)}`;
                const btn = document.getElementById('wallet-btn');
                btn.innerHTML = `<i class="fa-solid fa-circle-check text-green-500"></i> ${mask}`;
                btn.style.color = "#007aff";
            }
        }

        function customNotify(msg, iconClass) {
            document.getElementById('alert-msg').innerText = msg;
            document.getElementById('alert-icon').innerHTML = `<i class="fa-solid ${iconClass}"></i>`;
            document.getElementById('modal-alert').classList.add('active');
        }

        /* --- AD SYSTEM --- */
        function triggerAdModal() { document.getElementById('modal-ad').classList.add('active'); }
        
        function runAdSim() {
            const btn = document.getElementById('ad-confirm-btn');
            const loader = document.getElementById('ad-loader');
            const fill = document.getElementById('ad-fill');
            
            btn.disabled = true; btn.style.opacity = "0.5"; btn.innerText = "LOADING AD...";
            loader.style.display = "block";
            
            setTimeout(() => fill.style.width = "100%", 100);

            setTimeout(() => {
                state.balance += 1;
                updateUI();
                closeModals();
                // Reset for next time
                fill.style.width = "0%";
                loader.style.display = "none";
                btn.disabled = false; btn.style.opacity = "1"; btn.innerText = "WATCH AD";
                customNotify("Tebrikler! Bakiyene +1 Koala eklendi.", "fa-coins text-yellow-500");
            }, 2500);
        }

        /* --- WALLET & CEX --- */
        function openWalletModal() { 
            if(state.wallet) customNotify("Your wallet is already secured.", "fa-shield-halved text-blue-500");
            else document.getElementById('modal-wallet').classList.add('active'); 
        }

        function saveWalletAddress() {
            const addr = document.getElementById('wallet-input').value.trim();
            if(addr.length > 10) {
                state.wallet = addr;
                localStorage.setItem('koala_wallet', addr);
                updateUI();
                closeModals();
                customNotify("Wallet address saved successfully!", "fa-circle-check text-green-500");
            } else {
                customNotify("Please enter a valid TON address.", "fa-triangle-exclamation text-red-500");
            }
        }

        function setEx(el, name) {
            document.querySelectorAll('.cex-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            state.cex = name;
            localStorage.setItem('koala_cex', name);
            customNotify(`${name} selected as your exchange.`, "fa-building-columns text-blue-400");
        }

        function closeModals() {
            document.querySelectorAll('.modal-wrap').forEach(m => m.classList.remove('active'));
        }
    </script>
</body>
</html>

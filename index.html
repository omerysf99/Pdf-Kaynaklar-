<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earn Tether Ultimate - Admin 8392479231</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <style>
        /* CSS RESET & VARS */
        :root {
            --primary: #00ffa3; --bg: #050505; --card: #111111; --text: #ffffff;
            --dim: #777777; --border: #1a1a1a; --binance: #f3ba2f; --danger: #ff4757;
            --glass: rgba(255, 255, 255, 0.03);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background: var(--bg); color: var(--text); height: 100vh; display: flex; justify-content: center; overflow: hidden; }

        /* APP SHELL */
        .app-container { width: 100%; max-width: 430px; height: 100vh; position: relative; display: flex; flex-direction: column; background: radial-gradient(circle at top, #0a2018 0%, #050505 100%); border: 1px solid var(--border); }
        
        header { padding: 18px 25px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); z-index: 100; }
        .h-logo { font-family: 'Orbitron'; font-weight: 900; color: var(--primary); font-size: 16px; letter-spacing: 1px; }

        .viewport { flex: 1; overflow-y: auto; padding: 20px 20px 120px; scroll-behavior: smooth; }
        .viewport::-webkit-scrollbar { display: none; }

        /* MINING CORE - CSS ART */
        .mining-section { background: var(--card); border-radius: 35px; padding: 45px 25px; text-align: center; border: 1px solid var(--border); position: relative; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .mining-section::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(from 0deg, transparent, var(--primary), transparent); opacity: 0.05; animation: rotate 10s linear infinite; }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .pool-counter { font-family: 'Orbitron'; font-size: 40px; font-weight: 900; color: var(--primary); margin: 20px 0; text-shadow: 0 0 20px rgba(0,255,163,0.4); }
        
        .orb-nexus { width: 140px; height: 140px; margin: 0 auto; position: relative; display: flex; align-items: center; justify-content: center; }
        .orb-ring { position: absolute; width: 100%; height: 100%; border: 2px dashed var(--primary); border-radius: 50%; animation: spin-slow 8s linear infinite; opacity: 0.3; }
        .orb-core { width: 100px; height: 100px; background: rgba(0,255,163,0.1); border: 4px solid var(--primary); border-radius: 50%; box-shadow: 0 0 40px rgba(0,255,163,0.3); display: flex; align-items: center; justify-content: center; z-index: 2; animation: breathe 3s ease-in-out infinite; }
        @keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.08); } }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* CARDS & BUTTONS */
        .stat-card { background: var(--glass); border: 1px solid var(--border); border-radius: 24px; padding: 20px; display: flex; justify-content: space-between; align-items: center; margin-top: 20px; transition: 0.3s; }
        .btn-primary { width: 100%; background: #fff; color: #000; padding: 20px; border-radius: 18px; font-weight: 900; border: none; font-size: 16px; cursor: pointer; margin-top: 25px; transition: 0.2s; }
        .btn-primary:active { transform: scale(0.96); opacity: 0.8; }
        .btn-draw { background: var(--primary); color: #000; padding: 12px 25px; border-radius: 14px; font-weight: 900; font-size: 12px; border: none; }

        /* TASK SYSTEM */
        .task-container { margin-top: 35px; }
        .task-header { font-weight: 900; font-size: 18px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .task-card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 18px; display: flex; align-items: center; gap: 15px; margin-bottom: 15px; transition: 0.4s; }
        .task-card.completed { opacity: 0.2; filter: grayscale(1); pointer-events: none; }
        .t-icon { width: 50px; height: 50px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 22px; }
        .t-info b { font-size: 15px; display: block; }
        .t-info span { font-size: 12px; color: var(--primary); font-weight: 800; }
        .t-action { background: var(--primary); color: #000; border: none; padding: 10px 18px; border-radius: 30px; font-weight: 900; font-size: 11px; margin-left: auto; }

        /* FRIENDS TAB (GREEN HERO) */
        .friends-hero { background: linear-gradient(135deg, #1d976c, #00ffa3); border-radius: 28px; padding: 40px 25px; color: #000; position: relative; cursor: pointer; overflow: hidden; }
        .friends-hero h2 { font-weight: 900; font-size: 26px; line-height: 1; }
        .friends-hero p { font-size: 14px; font-weight: 700; margin-top: 10px; opacity: 0.8; }
        .hand-anim { position: absolute; right: 15px; bottom: -10px; font-size: 65px; animation: jump 2s infinite; }
        @keyframes jump { 0%, 100% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-15px) rotate(-10deg); } }

        /* NAVIGATION BAR */
        nav { position: absolute; bottom: 0; width: 100%; height: 95px; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding-top: 15px; }
        .nav-item { flex: 1; text-align: center; color: var(--dim); cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 26px; display: block; margin-bottom: 5px; }
        .nav-item span { font-size: 11px; font-weight: 700; }

        /* MODALS */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 25px; }
        .modal-box { background: var(--card); width: 100%; border-radius: 35px; border: 1px solid var(--border); padding: 35px; text-align: center; }
        .modal-box input { width: 100%; padding: 20px; background: #000; border: 1px solid var(--border); border-radius: 18px; color: #fff; font-size: 16px; margin: 20px 0; text-align: center; }

        .view-screen { display: none; }
        .view-screen.active { display: block; animation: fadeUp 0.4s ease forwards; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <div class="h-logo">TETHER GOLD</div>
        <div style="font-size: 12px; font-weight: 800; background: var(--glass); padding: 5px 12px; border-radius: 20px; border: 1px solid var(--border);">PRO v2.4</div>
    </header>

    <div class="viewport">
        <div id="screen-home" class="view-screen active">
            <div class="mining-section">
                <div class="pool-counter" id="main_pool">0.00000000</div>
                <div class="orb-nexus">
                    <div class="orb-ring"></div>
                    <div class="orb-core"><img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=025" width="60"></div>
                </div>
                <button class="btn-primary" onclick="claimToWallet()">BAKÄ°YEYÄ° TOPLA</button>
            </div>

            <div class="stat-card">
                <div>
                    <div id="main_wallet" style="font-size: 22px; font-weight: 900; font-family: 'Orbitron';">0.000000</div>
                    <div style="font-size: 11px; color: var(--dim); font-weight: 800; margin-top: 4px;">TOPLAM CÃœZDAN (USDT)</div>
                </div>
                <button class="btn-draw" onclick="showModal('withdrawModal')">PARA Ã‡EK</button>
            </div>

            <div class="task-container">
                <div class="task-header">ðŸ”¥ GÃœNLÃœK GÃ–REVLER</div>
                
                <div class="task-card" id="task-bin">
                    <div class="t-icon" style="background: var(--binance); color: #000;"><i class="fab fa-bitcoin"></i></div>
                    <div class="t-info"><b>Binance News Join</b><span>+0.05 $USDT</span></div>
                    <button class="t-action" onclick="runTask('bin', 0.05, 'https://t.me/BinanceBrazilNews')">KATIL</button>
                </div>

                <div class="task-card" id="task-tg">
                    <div class="t-icon" style="background: #24A1DE;"><i class="fab fa-telegram-plane"></i></div>
                    <div class="t-info"><b>Official Channel</b><span>+0.05 $USDT</span></div>
                    <button class="t-action" onclick="runTask('tg', 0.05, 'https://t.me/earntether2026')">KATIL</button>
                </div>

                <div class="task-card" id="task-insta">
                    <div class="t-icon" style="background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);"><i class="fab fa-instagram"></i></div>
                    <div class="t-info"><b>Instagram Takip</b><span>+0.05 $USDT</span></div>
                    <button class="t-action" onclick="runTask('insta', 0.05, 'https://instagram.com')">TAKÄ°P ET</button>
                </div>

                <div class="task-card">
                    <div class="t-icon" style="background: var(--danger);"><i class="fas fa-play"></i></div>
                    <div class="t-info"><b>Video Reklam Ä°zle</b><span id="ad_count">Kalan: 20/20 (+0.0003)</span></div>
                    <button class="t-action" onclick="watchVideoAd()">Ä°ZLE</button>
                </div>
            </div>
        </div>

        <div id="screen-friends" class="view-screen">
            <div class="friends-hero" onclick="copyInviteLink()">
                <h2>EKÄ°BÄ°NÄ°<br>KURMAYA BAÅžLA</h2>
                <p>Her baÅŸarÄ±lÄ± davet, Ã¶mÃ¼r boyu %10 ekstra kazanÃ§ saÄŸlar.</p>
                <div class="hand-anim">ðŸ‘†</div>
            </div>

            <div class="stat-card" style="flex-direction: column; padding: 40px 20px; text-align: center; gap: 15px;">
                <div style="font-size: 12px; color: var(--dim); font-weight: 800;">DAVET LÄ°NKÄ°NÄ°Z</div>
                <div id="invite_box" style="background: #000; border: 1px dashed var(--primary); padding: 18px; border-radius: 15px; color: var(--primary); font-size: 11px; font-weight: 800; width: 100%; word-break: break-all;">YÃ¼kleniyor...</div>
                <button class="btn-primary" style="margin-top: 10px; background: var(--primary);" onclick="copyInviteLink()">LÄ°NKÄ° KOPYALA</button>
            </div>
        </div>

        <div id="screen-market" class="view-screen">
            <div style="padding: 80px 20px; text-align: center; opacity: 0.4;">
                <i class="fas fa-microchip" style="font-size: 60px; color: var(--primary); margin-bottom: 25px;"></i>
                <h2 style="font-family: 'Orbitron';">MARKET KAPALI</h2>
                <p style="margin-top: 10px;">Yeni ekran kartlarÄ± ve iÅŸlemciler Ã§ok yakÄ±nda eklenecektir.</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="withdrawModal">
        <div class="modal-box">
            <h2 style="font-family: 'Orbitron'; font-weight: 900;">PARA Ã‡EKME</h2>
            <p style="font-size: 12px; color: var(--dim); margin-top: 8px;">Minimum Ã§ekim 5$ | Ä°ÅŸlem sÃ¼resi 24s</p>
            <input type="text" id="w_address" placeholder="BEP20 / TRC20 CÃ¼zdan Adresi">
            <input type="number" id="w_amount" placeholder="Tutar (Min 5)">
            <button class="btn-primary" style="background: var(--primary);" onclick="processWithdrawRequest()">TALEBÄ° GÃ–NDER</button>
            <button class="btn-primary" style="background: transparent; color: var(--dim); margin-top: 5px;" onclick="hideModal('withdrawModal')">KAPAT</button>
        </div>
    </div>

    <nav>
        <div class="nav-item active" onclick="switchNav('screen-home', this)"><i class="fas fa-th-large"></i><span>ANA SAYFA</span></div>
        <div class="nav-item" onclick="switchNav('screen-market', this)"><i class="fas fa-shopping-cart"></i><span>MARKET</span></div>
        <div class="nav-item" onclick="switchNav('screen-friends', this)"><i class="fas fa-user-friends"></i><span>EKÄ°P</span></div>
    </nav>
</div>

<script>
    /* ============================================================
       FIREBASE & CONFIGURATION
       ============================================================ */
    const firebaseConfig = {
        apiKey: "AIzaSyAIstjXKAAgVr-AyVY-a1tlab-TquP1EwI",
        authDomain: "sanakod-e6b22.firebaseapp.com",
        projectId: "sanakod-e6b22",
        storageBucket: "sanakod-e6b22.firebasestorage.app",
        messagingSenderId: "567585215373",
        appId: "1:567585215373:web:d4ec6e5541da2872df63c4"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    
    // Sabit Admin / KullanÄ±cÄ± ID (8392479231)
    const CURRENT_USER = "8392479231";
    const MINING_SPEED = 0.00000125; // Saniyelik KazÄ±m

    let session = { pool: 0, wallet: 0, ads: 20, tasks: [], lastSync: Date.now() };

    /* ============================================================
       CORE ENGINE (NaN PROTECTION)
       ============================================================ */
    async function bootApp() {
        // Linki her kullanÄ±cÄ± iÃ§in dinamik oluÅŸtur
        document.getElementById('invite_box').innerText = `https://t.me/EarnTetherBot?start=${CURRENT_USER}`;

        try {
            const docRef = db.collection('users').doc(CURRENT_USER);
            const doc = await docRef.get();

            if (doc.exists) {
                const data = doc.data();
                // NaN SAFE LOADING
                session.pool = Number(data.pool) || 0;
                session.wallet = Number(data.wallet) || 0;
                session.ads = data.ads !== undefined ? data.ads : 20;
                session.tasks = data.tasks || [];
                session.lastSync = Number(data.lastSync) || Date.now();

                // OFFLINE EARNINGS
                const elapsedSeconds = (Date.now() - session.lastSync) / 1000;
                session.pool += (elapsedSeconds * MINING_SPEED);
            }
            
            // Task states
            session.tasks.forEach(t => document.getElementById('task-'+t)?.classList.add('completed'));
            
            ui_refresh();
            setInterval(main_loop, 100);
        } catch (e) {
            console.error("Boot Error:", e);
            setInterval(main_loop, 100);
        }
    }

    function main_loop() {
        // Double NaN check
        if (isNaN(session.pool)) session.pool = 0;
        
        session.pool += (MINING_SPEED / 10);
        document.getElementById('main_pool').innerText = session.pool.toFixed(8);
        
        // Auto-save probability
        if (Math.random() > 0.99) cloud_sync();
    }

    async function claimToWallet() {
        if (session.pool < 0.00001) return;
        session.wallet += session.pool;
        session.pool = 0;
        ui_refresh();
        await cloud_sync();
        vibratePhone(50);
        alert("KazanÃ§lar cÃ¼zdana aktarÄ±ldÄ±!");
    }

    async function processWithdrawRequest() {
        const addr = document.getElementById('w_address').value;
        const amt = parseFloat(document.getElementById('w_amount').value);

        if (amt < 5 || isNaN(amt)) return alert("Minimum Ã§ekim 5.00 USDT.");
        if (amt > session.wallet) return alert("Yetersiz bakiye.");
        if (addr.length < 10) return alert("GeÃ§ersiz cÃ¼zdan adresi.");

        await db.collection('withdrawals').add({
            userId: CURRENT_USER,
            address: addr,
            amount: amt,
            status: "Pending",
            created: new Date()
        });

        session.wallet -= amt;
        hideModal('withdrawModal');
        ui_refresh();
        await cloud_sync();
        alert("Talebiniz incelenmek Ã¼zere admin paneline iletildi.");
    }

    /* ============================================================
       TASK & AD SYSTEM
       ============================================================ */
    function runTask(id, reward, url) {
        window.open(url, '_blank');
        setTimeout(async () => {
            if (!session.tasks.includes(id)) {
                session.wallet += reward;
                session.tasks.push(id);
                document.getElementById('task-'+id).classList.add('completed');
                ui_refresh();
                await cloud_sync();
            }
        }, 3000);
    }

    function watchVideoAd() {
        if (session.ads <= 0) return alert("GÃ¼nlÃ¼k reklam limitiniz doldu.");
        alert("Reklam yÃ¼kleniyor... (15 saniye)");
        setTimeout(async () => {
            session.wallet += 0.0003;
            session.ads--;
            ui_refresh();
            await cloud_sync();
            alert("Ã–dÃ¼l kazanÄ±ldÄ±: +0.0003 $USDT");
        }, 15000);
    }

    /* ============================================================
       UTILITIES
       ============================================================ */
    function ui_refresh() {
        const wVal = Number(session.wallet) || 0;
        document.getElementById('main_wallet').innerText = wVal.toFixed(6);
        document.getElementById('ad_count').innerText = `Kalan: ${session.ads}/20 (+0.0003)`;
    }

    async function cloud_sync() {
        session.lastSync = Date.now();
        await db.collection('users').doc(CURRENT_USER).set(session);
    }

    function switchNav(id, el) {
        document.querySelectorAll('.view-screen').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
    }

    function showModal(id) { document.getElementById(id).style.display = 'flex'; }
    function hideModal(id) { document.getElementById(id).style.display = 'none'; }

    function copyInviteLink() {
        const link = `https://t.me/EarnTetherBot?start=${CURRENT_USER}`;
        navigator.clipboard.writeText(link);
        alert("Referans linkiniz kopyalandÄ±!");
    }

    function vibratePhone(ms) { if (navigator.vibrate) navigator.vibrate(ms); }

    window.onload = bootApp;
</script>
</body>
</html>

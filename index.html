<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Miner Tap - Pro</title>
    <style>
        :root {
            --gold: #f1c40f;
            --blue: #3498db;
            --dark: #1a0f07;
        }

        body {
            margin: 0; background: var(--dark); color: white;
            font-family: 'Arial Black', sans-serif;
            display: flex; flex-direction: column; height: 100vh; overflow: hidden;
        }

        /* --- SAYFA YÃ–NETÄ°MÄ° --- */
        .page { display: none; flex-direction: column; align-items: center; width: 100%; flex-grow: 1; padding-top: 40px; }
        .active-page { display: flex; }

        /* --- ANA OYUN EKRANI --- */
        #score { font-size: 3.5rem; color: var(--gold); text-shadow: 0 4px #000; margin: 10px 0; }
        
        #main-character {
            width: 260px; height: 260px; background: #2c3e50;
            border: 10px solid var(--blue); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 8rem; cursor: pointer; position: relative;
            box-shadow: 0 0 40px rgba(52, 152, 219, 0.3);
            transition: transform 0.05s;
        }
        #main-character:active { transform: scale(0.92); }
        #main-character::after { content: "ğŸ‘¨â€ğŸ’¼"; }

        /* --- GELÄ°ÅTÄ°RME SAYFALARI --- */
        .upgrade-list { width: 90%; margin-top: 20px; }
        .upgrade-item {
            background: rgba(255,255,255,0.1); padding: 15px;
            margin-bottom: 10px; border-radius: 15px;
            display: flex; justify-content: space-between; align-items: center;
            border-left: 5px solid var(--blue);
        }
        .buy-btn {
            background: var(--gold); border: none; padding: 10px 15px;
            border-radius: 10px; font-weight: bold; cursor: pointer;
        }
        .buy-btn:disabled { background: #555; opacity: 0.5; }

        /* --- ALT MENÃœ --- */
        #nav {
            height: 85px; background: #000; display: flex;
            justify-content: space-around; align-items: center;
            border-top: 3px solid var(--blue); z-index: 100;
        }
        .nav-item { text-align: center; color: #7f8c8d; cursor: pointer; flex: 1; transition: 0.3s; }
        .nav-item.active { color: var(--gold); transform: translateY(-5px); }
        .nav-icon { font-size: 1.6rem; display: block; }

        /* Enerji */
        #energy-container { width: 80%; margin: 20px 0; }
        .bar-bg { width: 100%; height: 20px; background: #111; border-radius: 10px; overflow: hidden; }
        #bar-fill { width: 100%; height: 100%; background: linear-gradient(90deg, #f1c40f, #e67e22); }

        .tap-ani { position: absolute; color: var(--gold); font-size: 2rem; animation: float 0.7s forwards; pointer-events: none; }
        @keyframes float { 0% { opacity: 1; } 100% { transform: translateY(-100px); opacity: 0; } }
    </style>
</head>
<body>

    <div id="game-page" class="page active-page">
        <p style="color: #bdc3c7; margin: 0;">TOPLAM PUAN</p>
        <h1 id="score">0</h1>
        
        <div style="flex-grow: 1; display: flex; align-items: center;">
            <div id="main-character" onpointerdown="handleTap(event)"></div>
        </div>

        <div id="energy-container">
            <small>âš¡ <span id="energy-val">1000</span> / <span id="max-energy-val">1000</span></small>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>

    <div id="miner-page" class="page">
        <h2>Madenciler</h2>
        <div class="upgrade-list">
            <div class="upgrade-item">
                <div>
                    <b>Keskin Kazma</b><br>
                    <small>TÄ±k BaÅŸÄ±: +<span id="tap-power-val">1</span></small>
                </div>
                <button class="buy-btn" onclick="buyUpgrade('tap')">GeliÅŸtir <br> <span id="tap-cost">50</span> ğŸ’°</button>
            </div>
        </div>
    </div>

    <div id="elev-page" class="page">
        <h2>AsansÃ¶r Sistemi</h2>
        <div class="upgrade-list">
            <div class="upgrade-item">
                <div>
                    <b>Enerji BataryasÄ±</b><br>
                    <small>Kapasite: +500</small>
                </div>
                <button class="buy-btn" onclick="buyUpgrade('energy')">GeliÅŸtir <br> <span id="energy-cost">100</span> ğŸ’°</button>
            </div>
        </div>
    </div>

    <nav id="nav">
        <div class="nav-item active" onclick="showPage('game-page', this)">
            <span class="nav-icon">ğŸ’°</span>Borsa
        </div>
        <div class="nav-item" onclick="showPage('miner-page', this)">
            <span class="nav-icon">â›ï¸</span>Madenciler
        </div>
        <div class="nav-item" onclick="showPage('elev-page', this)">
            <span class="nav-icon">ğŸ‘©â€âœˆï¸</span>AsansÃ¶r
        </div>
    </nav>

    <script>
        let state = {
            money: 0,
            energy: 1000,
            maxEnergy: 1000,
            tapPower: 1,
            costs: { tap: 50, energy: 100 }
        };

        // --- SAYFA GEÃ‡Ä°Å FONKSÄ°YONU ---
        function showPage(pageId, navEl) {
            // TÃ¼m sayfalarÄ± gizle
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            // SeÃ§ilen sayfayÄ± gÃ¶ster
            document.getElementById(pageId).classList.add('active-page');
            
            // Navigasyon stilini gÃ¼ncelle
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            navEl.classList.add('active');
        }

        // --- TIKLAMA MANTIÄI ---
        function handleTap(e) {
            if (state.energy >= state.tapPower) {
                state.money += state.tapPower;
                state.energy -= state.tapPower;
                updateUI();
                createEffect(e.clientX, e.clientY);
                if(window.Telegram?.WebApp) window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
            }
        }

        // --- GELÄ°ÅTÄ°RME SATIN ALMA ---
        function buyUpgrade(type) {
            let cost = state.costs[type];
            if (state.money >= cost) {
                state.money -= cost;
                if (type === 'tap') {
                    state.tapPower += 1;
                    state.costs.tap *= 2;
                } else if (type === 'energy') {
                    state.maxEnergy += 500;
                    state.energy = state.maxEnergy;
                    state.costs.energy *= 2;
                }
                updateUI();
            }
        }

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(state.money).toLocaleString();
            document.getElementById('energy-val').innerText = state.energy;
            document.getElementById('max-energy-val').innerText = state.maxEnergy;
            document.getElementById('tap-power-val').innerText = state.tapPower;
            document.getElementById('tap-cost').innerText = state.costs.tap;
            document.getElementById('energy-cost').innerText = state.costs.energy;
            
            let percent = (state.energy / state.maxEnergy) * 100;
            document.getElementById('bar-fill').style.width = percent + "%";

            // Buton kontrolÃ¼
            document.querySelectorAll('.buy-btn').forEach(btn => {
                let cost = parseInt(btn.querySelector('span').innerText);
                btn.disabled = state.money < cost;
            });
        }

        function createEffect(x, y) {
            const div = document.createElement('div');
            div.className = 'tap-ani';
            div.style.left = x + 'px'; div.style.top = y + 'px';
            div.innerText = "+" + state.tapPower;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 700);
        }

        // Enerji Yenileme
        setInterval(() => {
            if (state.energy < state.maxEnergy) {
                state.energy = Math.min(state.energy + 3, state.maxEnergy);
                updateUI();
            }
        }, 1000);

        updateUI();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SpyderCoin - Official</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        :root {
            --bg: #070708;
            --purple: #a855f7;
            --purple-glow: rgba(168, 85, 247, 0.5);
            --card: #141416;
            --text: #ffffff;
            --text-dim: #8e8e93;
            --green: #10b981;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { 
            background: var(--bg); 
            color: var(--text); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 0; height: 100vh; overflow: hidden; 
            display: flex; flex-direction: column;
        }

        /* Sayfa D√ºzeni */
        .page { display: none; height: 100%; width: 100%; flex-direction: column; align-items: center; padding: 20px 24px; }
        .page.active { display: flex; animation: pageIn 0.2s ease-out; }
        @keyframes pageIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* --- üï∑Ô∏è ANA SAYFA MODERNE EDƒ∞LDƒ∞ --- */
        .header-main { text-align: center; margin-top: 35px; width: 100%; }
        .label-top { color: var(--text-dim); font-size: 13px; letter-spacing: 2px; font-weight: 700; margin-bottom: 8px; }
        
        .balance-container { 
            display: flex; align-items: center; justify-content: center; gap: 10px;
            font-size: 64px; font-weight: 900; letter-spacing: -2px;
        }
        .balance-container img { width: 50px; height: 50px; } /* Opsiyonel coin ikonu i√ßin */

        .tap-universe {
            flex-grow: 1; display: flex; justify-content: center; align-items: center;
            width: 100%; position: relative;
        }

        /* √ñr√ºmcek Butonu - G√∂rseldeki Gibi */
        .spider-wrapper {
            position: relative; width: 280px; height: 280px;
            display: flex; justify-content: center; align-items: center;
        }

        .spider-aura {
            position: absolute; inset: 0;
            background: radial-gradient(circle, var(--purple-glow) 0%, transparent 70%);
            border-radius: 50%; animation: pulse 2s infinite;
        }

        .spider-btn {
            width: 240px; height: 240px;
            background: linear-gradient(145deg, var(--purple), #7c3aed);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-size: 110px; z-index: 10; cursor: pointer;
            box-shadow: 0 0 50px var(--purple-glow), inset 0 0 20px rgba(0,0,0,0.2);
            transition: transform 0.05s cubic-bezier(0.1, 0.7, 1.0, 0.1);
        }

        .spider-btn:active { transform: scale(0.94); }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 0.8; } 100% { opacity: 0.5; } }

        /* Efektler */
        .web-effect {
            position: absolute; border: 2px solid rgba(255,255,255,0.6);
            border-radius: 50%; pointer-events: none;
            animation: webGrow 0.5s ease-out forwards;
        }
        @keyframes webGrow { 0% { width: 0; height: 0; opacity: 1; } 100% { width: 500px; height: 500px; opacity: 0; } }

        .coin-popup {
            position: absolute; color: #fff; font-size: 32px; font-weight: 900;
            pointer-events: none; z-index: 100; animation: coinFloat 0.8s ease-out forwards;
            text-shadow: 0 0 10px var(--purple);
        }
        @keyframes coinFloat { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }

        /* Alt Enerji Alanƒ± */
        .bottom-info { width: 100%; padding-bottom: 20px; }
        .energy-header { display: flex; justify-content: space-between; font-weight: 700; font-size: 14px; margin-bottom: 10px; }
        .energy-bar-container { 
            width: 100%; height: 14px; background: #1c1c1e; 
            border-radius: 20px; border: 1px solid #2c2c2e; overflow: hidden;
        }
        .energy-bar-fill { 
            height: 100%; background: linear-gradient(90deg, var(--purple), #d8b4fe);
            width: 100%; transition: width 0.2s ease;
        }

        /* --- C√úZDAN ≈ûARTLARI --- */
        .wallet-card { background: var(--card); border-radius: 20px; padding: 25px; width: 100%; border: 1px solid #232326; margin-top: 20px; }
        .condition-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 12px; background: #0a0a0b; border-radius: 12px; }
        .badge { padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 800; text-transform: uppercase; }
        .badge-wait { background: #3f3f46; color: #a1a1aa; }
        .badge-done { background: var(--green); color: #fff; }

        input { 
            width: 100%; background: #000; border: 1px solid #2c2c2e; padding: 18px; 
            border-radius: 15px; color: #fff; margin: 15px 0; font-size: 14px; text-align: center;
        }

        .btn-action {
            width: 100%; padding: 18px; border-radius: 15px; border: none;
            font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s;
        }
        .btn-purple { background: var(--purple); color: white; }
        .btn-purple:disabled { background: #27272a; color: #52525b; cursor: not-allowed; }

        /* Alt Men√º */
        .nav-bar { 
            position: fixed; bottom: 0; width: 100%; background: rgba(10,10,11,0.98);
            display: grid; grid-template-columns: repeat(4, 1fr); 
            padding: 12px 0 35px; border-top: 1px solid #1c1c1e; z-index: 1000;
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-dim); font-size: 11px; font-weight: 600; cursor: pointer; }
        .nav-item.active { color: var(--purple); }
        .nav-item i { font-size: 22px; margin-bottom: 2px; font-style: normal; }
    </style>
</head>
<body>

    <div id="p-home" class="page active">
        <div class="header-main">
            <div class="label-top">TOTAL BALANCE</div>
            <div class="balance-container" id="ui-bal">0</div>
        </div>

        <div class="tap-universe">
            <div class="spider-wrapper">
                <div class="spider-aura"></div>
                <div class="spider-btn" id="spider-btn">üï∑Ô∏è</div>
            </div>
        </div>

        <div class="bottom-info">
            <div class="energy-header">
                <span>‚ö° Available Energy</span>
                <span><span id="ui-nrg">1000</span> / 1000</span>
            </div>
            <div class="energy-bar-container">
                <div id="energy-fill" class="energy-bar-fill"></div>
            </div>
        </div>
    </div>

    <div id="p-tasks" class="page">
        <h2 style="margin-right:auto;">Tasks</h2>
        <div class="wallet-card" style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <div style="font-weight:700;">Join Telegram</div>
                <div style="color:var(--purple); font-size:13px;">+5,000 SPYDER</div>
            </div>
            <button class="btn-action btn-purple" style="width:auto; padding:8px 20px;" onclick="tg.openTelegramLink('https://t.me/SpyderCommunity')">Join</button>
        </div>
    </div>

    <div id="p-friends" class="page">
        <h2 style="margin-right:auto;">Friends</h2>
        <div class="wallet-card" style="text-align:center;">
            <p style="color:var(--text-dim);">Invite friends and get 10% of their earnings!</p>
            <button class="btn-action" style="background:#fff; color:#000;">COPY INVITE LINK</button>
        </div>
    </div>

    <div id="p-wallet" class="page">
        <h2 style="margin-right:auto;">Vault</h2>
        <div style="text-align:center; margin-top:20px;">
            <div id="ui-usdt" style="font-size:48px; font-weight:900; color:var(--green);">$0.00</div>
            <div style="color:var(--text-dim); font-size:12px;">Estimated USDT Value</div>
        </div>

        <div class="wallet-card">
            <div style="font-size:11px; color:var(--text-dim); margin-bottom:15px; font-weight:800; letter-spacing:1px;">WITHDRAWAL CONDITIONS</div>
            
            <div class="condition-row">
                <span>Min. Balance (0.01$)</span>
                <span id="cond-bal" class="badge badge-wait">Wait</span>
            </div>
            
            <div class="condition-row">
                <span>Watch Ads (20)</span>
                <span id="cond-ads" class="badge badge-wait">0 / 20</span>
            </div>

            <input type="text" id="wallet-addr" placeholder="Enter USDT BEP20 Address">
            <button id="btn-withdraw" class="btn-action btn-purple" onclick="requestPayout()" disabled>WITHDRAW NOW</button>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="nav-item active" onclick="nav('p-home', this)"><i>üéÆ</i>Oyna</div>
        <div class="nav-item" onclick="nav('p-tasks', this)"><i>üìã</i>G√∂rev</div>
        <div class="nav-item" onclick="nav('p-friends', this)"><i>üë•</i>Dost</div>
        <div class="nav-item" onclick="nav('p-wallet', this)"><i>üí∞</i>C√ºzdan</div>
    </nav>

    <script>
        const firebaseConfig = { apiKey: "AIzaSy...", projectId: "spyder-coin" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const tg = window.Telegram.WebApp;
        const user = tg.initDataUnsafe?.user || { id: "8392479231", first_name: "Admin" };

        let state = { bal: 0, nrg: 1000, ads: 0 };

        async function init() {
            tg.ready(); tg.expand();
            const doc = await db.collection('users').doc(String(user.id)).get();
            if (doc.exists) state = { ...state, ...doc.data() };
            updateUI();
            setInterval(regen, 1000);
            setInterval(sync, 10000);
        }

        function handleTap(e) {
            if (state.nrg <= 0) return;
            
            state.bal += 1;
            state.nrg -= 1;
            updateUI();
            
            // WEB EFFECT
            const ring = document.createElement('div');
            ring.className = 'web-effect';
            document.querySelector('.spider-wrapper').appendChild(ring);
            setTimeout(() => ring.remove(), 500);

            // +1 POPUP
            const touch = e.touches ? e.touches[0] : e;
            const popup = document.createElement('div');
            popup.className = 'coin-popup';
            popup.innerText = '+1';
            popup.style.left = touch.pageX + 'px';
            popup.style.top = touch.pageY + 'px';
            document.body.appendChild(popup);
            setTimeout(() => popup.remove(), 800);

            tg.HapticFeedback.impactOccurred('light');
        }

        function updateUI() {
            document.getElementById('ui-bal').innerText = state.bal.toLocaleString();
            document.getElementById('ui-nrg').innerText = state.nrg;
            document.getElementById('energy-fill').style.width = (state.nrg / 10) + "%";
            document.getElementById('ui-usdt').innerText = "$" + (state.bal * 0.00001).toFixed(3);

            // C√ºzdan ≈ûartlarƒ±
            const b = document.getElementById('btn-withdraw');
            const cb = document.getElementById('cond-bal');
            const ca = document.getElementById('cond-ads');

            if (state.bal >= 1000) { cb.innerText = "OK"; cb.className = "badge badge-done"; }
            else { cb.innerText = "WAIT"; cb.className = "badge badge-wait"; }

            ca.innerText = state.ads + " / 20";
            if (state.ads >= 20) ca.className = "badge badge-done";
            else ca.className = "badge badge-wait";

            b.disabled = !(state.bal >= 1000 && state.ads >= 20);
        }

        function requestPayout() {
            const addr = document.getElementById('wallet-addr').value;
            if(!addr.startsWith("0x")) return tg.showAlert("Invalid BEP20 Address!");
            tg.showAlert("Request sent! Verification in progress.");
        }

        function regen() { if(state.nrg < 1000) { state.nrg++; updateUI(); } }
        async function sync() { await db.collection('users').doc(String(user.id)).update(state); }
        function nav(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        document.getElementById('spider-btn').addEventListener('touchstart', (e) => {
            e.preventDefault(); handleTap(e);
        });
        init();
    </script>
</body>
</html>
